<xxl-add-socket [type]="newSocketType"
                (create)="createSocket($event)" (cancel)="newSocketType = null"></xxl-add-socket>

<section class="component">
  <xxl-flow-based #flow *ngIf="!!state.children && active" [flow]="state" [active]="active" [root]="false"></xxl-flow-based>

  <ng-container *ngIf="!active || !state.children">
    <ng-container *xxlDynamicComponent="component"></ng-container>
  </ng-container>

  <section *ngIf="state?.sockets" class="sockets sockets-in">
    <button class="add-socket" (click)="newSocketIn()">+</button>
    <span *ngFor="let socket of state.sockets | socketIn;trackBy: socketTrackByFn"
          [xxlSocket]="socket"
          [attr.data-socket-id]="socket.id"
          (pointerdown)="onSocketClick(1, socket, $event)" class="socket"></span>
  </section>

  <section *ngIf="state?.sockets" class="sockets sockets-out">
    <button class="add-socket" (click)="newSocketOut()">+</button>
    <span *ngFor="let socket of state.sockets | socketOut" [xxlSocket]="socket" (pointerdown)="onSocketClick(2,socket, $event)"
          [attr.data-socket-id]="socket.id"
          class="socket"></span>
  </section>

  <input class="title" placeholder="Title" [(ngModel)]="state.title" [class.is-empty]="!state.title" [readonly]="!active">
</section>

