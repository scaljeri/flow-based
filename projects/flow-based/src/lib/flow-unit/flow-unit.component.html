<section class="component">
  <ng-container *ngIf="isFlow() && active">
    <xxl-flow-based #flow [state]="state" [active]="active" [root]="false"></xxl-flow-based>
  </ng-container>

  <xxl-connection-lines *ngIf="!!unitService.connections"
                        [connections]="unitService.connections"
                        [class.is-dark]="isFlow()" class="tmp-lines" ></xxl-connection-lines>

  <ng-container *xxlDynamicComponent="state"></ng-container>

  <section class="sockets sockets-in" [class.is-disabled]="active && !isFlow()">
    <xxl-socket *ngFor="let socket of sockets | socketIn"
          [state]="socket"
          [scope]="getScope()"
          [invert]="isInverted()"
          [parent]="id"
          [attr.data-socket-id]="socket.id"
          class="socket"></xxl-socket>
  </section>

  <section class="sockets sockets-out" [class.is-disabled]="active && !isFlow()">
    <ng-container *ngIf="isFlow() && active">
    </ng-container>
    <xxl-socket *ngFor="let socket of sockets | socketOut"
          [state]="socket"
          [scope]="getScope()"
          [invert]="isInverted()"
          [parent]="id"
          class="socket"></xxl-socket>
  </section>

  <input *ngIf="active" class="title" placeholder="Title" [(ngModel)]="state.title" [class.is-empty]="!state.title">
  <span class="title" *ngIf="!active">{{state.title}}</span>
</section>
