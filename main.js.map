{"version":3,"sources":["webpack:///./node_modules/ngx-web-worker/node_modules/@angular/core/fesm5 lazy namespace object","webpack:///./projects/flow-based/src/lib/connection-lines/bezier.ts","webpack:///./projects/flow-based/src/lib/connection-lines/connection-lines.component.html","webpack:///./projects/flow-based/src/lib/connection-lines/connection-lines.component.scss","webpack:///./projects/flow-based/src/lib/connection-lines/connection-lines.component.ts","webpack:///./projects/flow-based/src/lib/drag-drop/draggable/draggable.directive.ts","webpack:///./projects/flow-based/src/lib/drag-drop/movable-area/movable-area.directive.ts","webpack:///./projects/flow-based/src/lib/drag-drop/movable/movable.directive.ts","webpack:///./projects/flow-based/src/lib/dynamic-component.directive.ts","webpack:///./projects/flow-based/src/lib/flow-based.component.html","webpack:///./projects/flow-based/src/lib/flow-based.component.scss","webpack:///./projects/flow-based/src/lib/flow-based.component.ts","webpack:///./projects/flow-based/src/lib/flow-based.module.ts","webpack:///./projects/flow-based/src/lib/flow-based.service.ts","webpack:///./projects/flow-based/src/lib/flow-based.ts","webpack:///./projects/flow-based/src/lib/node/node-service.ts","webpack:///./projects/flow-based/src/lib/node/node.component.html","webpack:///./projects/flow-based/src/lib/node/node.component.scss","webpack:///./projects/flow-based/src/lib/node/node.component.ts","webpack:///./projects/flow-based/src/lib/pipes/socket-in.pipe.ts","webpack:///./projects/flow-based/src/lib/pipes/socket-out.pipe.ts","webpack:///./projects/flow-based/src/lib/services/flow-based-manager.service.ts","webpack:///./projects/flow-based/src/lib/socket-builder.service.ts","webpack:///./projects/flow-based/src/lib/socket.service.ts","webpack:///./projects/flow-based/src/lib/socket/socket.component.html","webpack:///./projects/flow-based/src/lib/socket/socket.component.scss","webpack:///./projects/flow-based/src/lib/socket/socket.component.ts","webpack:///./projects/flow-based/src/lib/utils/deep-clone.ts","webpack:///./projects/flow-based/src/lib/utils/flow-worker.ts","webpack:///./projects/flow-based/src/lib/utils/flow.ts","webpack:///./src/$_lazy_route_resource lazy namespace object","webpack:///./src/app/app.component.html","webpack:///./src/app/app.component.scss","webpack:///./src/app/app.component.ts","webpack:///./src/app/app.module.ts","webpack:///./src/app/component-selection.service.ts","webpack:///./src/app/components/component-selection/component-selection.component.html","webpack:///./src/app/components/component-selection/component-selection.component.scss","webpack:///./src/app/components/component-selection/component-selection.component.ts","webpack:///./src/app/components/default-front/default-front.component.html","webpack:///./src/app/components/default-front/default-front.component.scss","webpack:///./src/app/components/default-front/default-front.component.ts","webpack:///./src/app/components/edit-node/edit-node.component.html","webpack:///./src/app/components/edit-node/edit-node.component.scss","webpack:///./src/app/components/edit-node/edit-node.component.ts","webpack:///./src/app/components/node-header/node-header.component.html","webpack:///./src/app/components/node-header/node-header.component.scss","webpack:///./src/app/components/node-header/node-header.component.ts","webpack:///./src/app/components/normal-node/normal-node.component.html","webpack:///./src/app/components/normal-node/normal-node.component.scss","webpack:///./src/app/components/normal-node/normal-node.component.ts","webpack:///./src/app/context-menu/context-menu.component.html","webpack:///./src/app/context-menu/context-menu.component.scss","webpack:///./src/app/context-menu/context-menu.component.ts","webpack:///./src/app/fb-config.ts","webpack:///./src/app/fixtures.ts","webpack:///./src/app/flow/flow.component.html","webpack:///./src/app/flow/flow.component.scss","webpack:///./src/app/flow/flow.component.ts","webpack:///./src/app/node-helpers.ts","webpack:///./src/app/nodes/basic-graph/basic-graph.component.html","webpack:///./src/app/nodes/basic-graph/basic-graph.component.scss","webpack:///./src/app/nodes/basic-graph/basic-graph.component.ts","webpack:///./src/app/nodes/canvas/canvas.component.html","webpack:///./src/app/nodes/canvas/canvas.component.scss","webpack:///./src/app/nodes/canvas/canvas.component.ts","webpack:///./src/app/nodes/custom-code/custom-code.component.html","webpack:///./src/app/nodes/custom-code/custom-code.component.scss","webpack:///./src/app/nodes/custom-code/custom-code.component.ts","webpack:///./src/app/nodes/default-flow/add-socket/add-socket.component.html","webpack:///./src/app/nodes/default-flow/add-socket/add-socket.component.scss","webpack:///./src/app/nodes/default-flow/add-socket/add-socket.component.ts","webpack:///./src/app/nodes/default-flow/default-flow.component.html","webpack:///./src/app/nodes/default-flow/default-flow.component.scss","webpack:///./src/app/nodes/default-flow/default-flow.component.ts","webpack:///./src/app/nodes/fractal/fractal.component.html","webpack:///./src/app/nodes/fractal/fractal.component.scss","webpack:///./src/app/nodes/fractal/fractal.component.ts","webpack:///./src/app/nodes/merge-streams/merge-streams.component.html","webpack:///./src/app/nodes/merge-streams/merge-streams.component.scss","webpack:///./src/app/nodes/merge-streams/merge-streams.component.ts","webpack:///./src/app/nodes/random-numbers/random-numbers.component.html","webpack:///./src/app/nodes/random-numbers/random-numbers.component.scss","webpack:///./src/app/nodes/random-numbers/random-numbers.component.ts","webpack:///./src/app/nodes/stats/stats.component.html","webpack:///./src/app/nodes/stats/stats.component.scss","webpack:///./src/app/nodes/stats/stats.component.ts","webpack:///./src/app/nodes/tap/tap.component.html","webpack:///./src/app/nodes/tap/tap.component.scss","webpack:///./src/app/nodes/tap/tap.component.ts","webpack:///./src/app/nodes/zoom-canvas/zoom-canvas.component.html","webpack:///./src/app/nodes/zoom-canvas/zoom-canvas.component.scss","webpack:///./src/app/nodes/zoom-canvas/zoom-canvas.component.ts","webpack:///./src/app/workers/basic-graph.ts","webpack:///./src/app/workers/canvas.ts","webpack:///./src/app/workers/custom-code.ts","webpack:///./src/app/workers/fractals.ts","webpack:///./src/app/workers/fractals/mandelbrod.ts","webpack:///./src/app/workers/merge-streams.ts","webpack:///./src/app/workers/random-numbers.ts","webpack:///./src/app/workers/stats.ts","webpack:///./src/app/workers/tap.ts","webpack:///./src/app/workers/utils/gauss.ts","webpack:///./src/app/workers/webworker.ts","webpack:///./src/app/workers/zoom-canvas.ts","webpack:///./src/environments/environment.ts","webpack:///./src/main.ts"],"names":[],"mappings":"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","file":"main.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./node_modules/ngx-web-worker/node_modules/@angular/core/fesm5 lazy recursive\";","import { XxlPosition } from '../flow-based';\n\nfunction factorial(n): number {\n  return !(n > 1) ? 1 : factorial(n - 1) * n;\n}\n\nfunction round(num: number): number {\n  return Math.round(num * 100) / 100;\n}\n\nfunction bezierValue(n: number, u: number, i: number, v: number) {\n  return Math.pow(u, i) * Math.pow(1 - u, n - i) * v;\n}\n\nfunction binomialCoefficient(n, i): number {\n  return factorial(n) / (factorial(i) * factorial(n - i));\n}\n\nexport function gradient(point: XxlPosition): number {\n  return point.y / point.x;\n}\n\nexport function normal(u: number, cp: XxlPosition[]): XxlPosition {\n  const n = cp.length - 1;\n  let x = 0, y = 0;\n\n  cp.forEach((p: XxlPosition, i: number) => {\n    const binC = binomialCoefficient(n, i);\n\n    x += binC * bezierValue(n, u, i, p.x);\n    y += binC * bezierValue(n, u, i, p.y);\n  });\n\n  return { x: round(x), y: round(y) } as XxlPosition;\n}\n\nexport function derivative(u: number, cp: XxlPosition[]): XxlPosition {\n  const n = cp.length - 2;\n  let x = 0, y = 0;\n\n  for (let i = 0; i <= n; i++) {\n    const QiX = (cp.length - 1) * (cp[i + 1].x - cp[i].x),\n      QiY = (cp.length - 1) * (cp[i + 1].y - cp[i].y),\n      binC = binomialCoefficient(n, i);\n\n    x += binC * bezierValue(n, u, i, QiX);\n    y += binC * bezierValue(n, u, i, QiY);\n  }\n\n  return { x: round(x), y: round(y) } as XxlPosition;\n}\n","module.exports = \"<svg #svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"100%\\\" height=\\\"100%\\\">\\n\\n  <ng-container *ngFor=\\\"let connection of connections\\\">\\n    <defs>\\n      <linearGradient id=\\\"{{connection.id}}\\\">\\n        <stop offset=\\\"0%\\\" [attr.stop-color]=\\\"stopColorStart(connection.out)\\\"/>\\n        <stop offset=\\\"100%\\\" [attr.stop-color]=\\\"stopColorEnd(connection.in)\\\"/>\\n      </linearGradient>\\n    </defs>\\n\\n    <path\\n      (pointerdown)=\\\"onClick($event, connection)\\\"\\n      [attr.d]=\\\"d(connection)\\\"\\n      class=\\\"connection\\\"\\n      [attr.stroke]=\\\"'url(#' + connection.id + ')'\\\"\\n      stroke-linecap=\\\"round\\\"></path>\\n    <path class=\\\"arrow\\\" d=\\\"M0 5 L 5 0 L0 -5z\\\" [attr.transform]=\\\"arrow(connection)\\\"></path>\\n  </ng-container>\\n\\n  <path *ngIf=\\\"from || to\\\"\\n        [attr.d]=\\\"pointerPath()\\\"\\n        [attr.stroke]=\\\"pointerColor()\\\"\\n        class=\\\"connection pointer-path\\\"\\n        stroke-width=\\\"5\\\"\\n        stroke-linecap=\\\"round\\\"></path>\\n</svg>\\n\"","module.exports = \"svg {\\n  fill: none;\\n  stroke: #fff;\\n  stroke-width: 3px; }\\n  svg .connection:not(.pointer-path):hover,\\n  svg .arrow:hover,\\n  svg .connection:hover ~ .arrow {\\n    cursor: pointer;\\n    stroke: #fa0;\\n    stroke-width: 5px; }\\n  svg .arrow:hover,\\n  svg .connection:hover ~ .arrow {\\n    fill: #fa0; }\\n  svg .arrow {\\n    fill: #fff;\\n    pointer-events: none; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9sdWNhc2NhbGplL1dlYnN0b3JtUHJvamVjdHMvZmxvdy1iYXNlZC9wcm9qZWN0cy9mbG93LWJhc2VkL3NyYy9saWIvY29ubmVjdGlvbi1saW5lcy9jb25uZWN0aW9uLWxpbmVzLmNvbXBvbmVudC5zY3NzIiwiL1VzZXJzL2x1Y2FzY2FsamUvV2Vic3Rvcm1Qcm9qZWN0cy9mbG93LWJhc2VkL3Byb2plY3RzL2Zsb3ctYmFzZWQvc3JjL2xpYi91dGlscy9fdmFyaWFibGVzLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBRUE7RUFDRSxXQUFVO0VBQ1YsYUFBWTtFQUNaLGtCQUFpQixFQXNCbEI7RUF6QkQ7OztJQVFJLGdCQUFlO0lBQ2YsYUNMZTtJRE1mLGtCQUFpQixFQUNsQjtFQVhIOztJQWVJLFdDWGUsRURZaEI7RUFoQkg7SUFtQkksV0FBVTtJQUNWLHFCQUFvQixFQUNyQiIsImZpbGUiOiJwcm9qZWN0cy9mbG93LWJhc2VkL3NyYy9saWIvY29ubmVjdGlvbi1saW5lcy9jb25uZWN0aW9uLWxpbmVzLmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiQGltcG9ydCAnLi4vdXRpbHMvX3ZhcmlhYmxlcyc7XG5cbnN2ZyB7XG4gIGZpbGw6IG5vbmU7XG4gIHN0cm9rZTogI2ZmZjtcbiAgc3Ryb2tlLXdpZHRoOiAzcHg7XG5cbiAgLmNvbm5lY3Rpb246bm90KC5wb2ludGVyLXBhdGgpOmhvdmVyLFxuICAuYXJyb3c6aG92ZXIsXG4gIC5jb25uZWN0aW9uOmhvdmVyIH4gLmFycm93IHtcbiAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgc3Ryb2tlOiAkYWN0aXZlLWNvbG9yO1xuICAgIHN0cm9rZS13aWR0aDogNXB4O1xuICB9XG5cbiAgLmFycm93OmhvdmVyLFxuICAuY29ubmVjdGlvbjpob3ZlciB+IC5hcnJvdyB7XG4gICAgZmlsbDogJGFjdGl2ZS1jb2xvcjtcbiAgfVxuXG4gIC5hcnJvdyB7XG4gICAgZmlsbDogI2ZmZjtcbiAgICBwb2ludGVyLWV2ZW50czogbm9uZTtcbiAgfVxuXG4gIC5wb2ludGVyLXBhdGgge1xuICB9XG59XG4iLCIkeHhsLWd1dHRlci1zaXplOiAxNnB4O1xuLy8gei1pbmRpY2VzXG4kemluZGV4LW5vZGU6IDEwO1xuJHppbmRleC1ub2RlLWFjdGl2ZTogMjA7XG5cbiR4eGwtYWRkLXNvY2tldC1mb3JtOiAxMDtcbiRhY3RpdmUtY29sb3I6ICNmYTA7XG4kYWNjZXB0LWNvbG9yOiAjYmFkYTU1O1xuJHJlamVjdC1jb2xvcjogI2YwNjtcbiJdfQ== */\"","import {\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n  Component,\n  ElementRef,\n  EventEmitter, Inject,\n  Input,\n  OnChanges,\n  OnInit, Optional,\n  Output, SimpleChanges\n} from '@angular/core';\nimport { FB_SOCKET_COLORS, FbSocketColors, XxlConnection, XxlPosition } from '../flow-based';\nimport * as bezier from './bezier';\nimport { SocketService } from '../socket.service';\n\n@Component({\n  selector: 'xxl-connection-lines',\n  templateUrl: './connection-lines.component.html',\n  styleUrls: ['./connection-lines.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ConnectionLinesComponent implements OnInit, OnChanges {\n  @Input() connections: XxlConnection[];\n  @Input() from: number;\n  @Input() to: number;\n\n  @Input() set pointerMoved(event: PointerEvent) {\n    if (event) {\n      this.pointer = {x: event.pageX, y: event.pageY};\n    } else {\n      this.pointer = null;\n    }\n  }\n\n  @Output() lineClick = new EventEmitter<XxlConnection>();\n\n  pointer: XxlPosition | null;\n  controlPoints: { [key: number]: XxlPosition[] } = {};\n  lines: string[] = [];\n  private rect;\n\n  constructor(private element: ElementRef,\n              private viewRef: ChangeDetectorRef,\n              private socketService: SocketService,\n              @Optional() @Inject(FB_SOCKET_COLORS) private colors: FbSocketColors) {\n  }\n\n  ngOnInit() {\n    this.rect = this.element.nativeElement.getBoundingClientRect();\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    if (changes.connection) {\n      this.rect = this.element.nativeElement.getBoundingClientRect();\n      this.controlPoints = [];\n    } else {\n      if (!this.to && !this.from) {\n        this.pointer = null;\n      }\n    }\n  }\n\n  onClick(event: PointerEvent, connection: XxlConnection): void {\n    event.stopPropagation();\n    this.lineClick.next(connection);\n  }\n\n  pointerPath(): string {\n    const start = this.socketService.getSocket(this.from || this.to).comp.position;\n    let output = '';\n\n    if (this.from && this.pointer) {\n      output = this.computeD(0,\n        start.x - this.rect.left, start.y - this.rect.top,\n        this.pointer.x - this.rect.left, this.pointer.y - this.rect.top);\n    } else if (this.to && this.pointer) {\n      output = this.computeD(0,\n        this.pointer.x - this.rect.left, this.pointer.y - this.rect.top,\n        start.x - this.rect.left, start.y - this.rect.top);\n    }\n\n    return output;\n  }\n\n  pointerColor(): string {\n    const socket = this.socketService.getSocket(this.from || this.to).comp.state;\n\n    return socket.color || (this.colors && this.colors[socket.format!]) || '#fff';\n  }\n\n  stopColorStart(connId): string {\n    const socketDetails = this.socketService.getSocket(connId);\n\n    if (!socketDetails) {\n      return '#ffffff';\n    }\n\n    return socketDetails.comp.state.color || this.colors[socketDetails.comp.state.format!] || '#fff';\n  }\n\n  stopColorEnd(connId): string {\n    return this.stopColorStart(connId);\n  }\n\n  d(connection: XxlConnection): string {\n    let cx1, cx2, cy1, cy2;\n\n    if (typeof connection.from === 'object') {\n      return this.dFromElements(connection);\n    } else {\n\n      const start = this.socketService.getSocket(connection.out!).comp.position;\n      const end = (this.socketService.getSocket(connection.in!) || {comp: {position: start}} as any).comp.position;\n\n      if (!start || !start.x || !end || !end.x) {\n        return '';\n      }\n\n      const x1 = start.x - this.rect.left;\n      const y1 = start.y - this.rect.top;\n      const x2 = end.x - this.rect.left;\n      const y2 = end.y - this.rect.top;\n\n      cx1 = Math.round(x1 + Math.abs(x1 - x2) / 2);\n      cx2 = Math.round(x2 - Math.abs(x1 - x2) / 2);\n      cy1 = y1;\n      cy2 = y2;\n\n      if (x2 < x1) {\n        cy1 = y1 + (y2 - y1) / 2;\n        cy2 = y2 - (y2 - y1) / 2;\n      }\n\n      this.controlPoints[connection.id] = [\n        {x: x1, y: y1},\n        {x: cx1, y: cy1},\n        {x: cx2, y: cy2},\n        {x: x2, y: y2},\n      ];\n\n      return this.valuesToD(x1, y1, x2, y2, cx1, cy1, cx2, cy2);\n    }\n  }\n\n  dFromElements(connection: XxlConnection): string {\n    const fromRect = (connection.from as HTMLElement).getBoundingClientRect(),\n      toRect = (connection.to as HTMLElement).getBoundingClientRect();\n\n    const x1 = fromRect.left - this.rect.left + fromRect.width / 2;\n    const y1 = fromRect.top - this.rect.top + fromRect.height / 2;\n\n    const x2 = toRect.left - this.rect.left + toRect.width / 2;\n    const y2 = toRect.top - this.rect.top + toRect.height / 2;\n\n    return this.computeD(connection.id, x1, y1, x2, y2);\n  }\n\n  private computeD(id: number, fromX: number, fromY: number, toX: number, toY: number): string {\n    const cx1 = Math.round(fromX + Math.abs(fromX - toX) / 2),\n      cx2 = Math.round(toX - Math.abs(fromX - toX) / 2);\n    let cy1 = fromY,\n      cy2 = toY;\n\n    if (toX < fromX) {\n      cy1 = fromY + (toY - fromY) / 2;\n      cy2 = toY - (toY - fromY) / 2;\n    }\n\n    this.controlPoints[id] = [\n      {x: fromX, y: fromY},\n      {x: cx1, y: cy1},\n      {x: cx2, y: cy2},\n      {x: toX, y: toY},\n    ];\n\n    return this.valuesToD(fromX, fromY, toX, toY, cx1, cy1, cx2, cy2);\n  }\n\n  private valuesToD(x1, y1, x2, y2, cx1, cy1, cx2, cy2): string {\n    return `M ${x1} ${y1 - .0001} C ${cx1} ${cy1} ${cx2} ${cy2} ${x2} ${y2}`;\n  }\n\n  arrow(connection: XxlConnection): string {\n    const points = this.controlPoints[connection.id];\n\n    if (!points) {\n      return '';\n    }\n\n    const {x, y} = bezier.normal(.5, points);\n    const der = bezier.derivative(.5, points);\n\n    const grad = bezier.gradient(der);\n\n    let deg = Math.atan(grad) * 180 / Math.PI;\n\n    if (der.x < 0) {\n      deg += 180;\n    }\n\n    return `translate(${x}, ${y}) rotate(${deg})`;\n  }\n}\n","import { Directive, EventEmitter, HostBinding, HostListener, Output } from '@angular/core';\nimport { fromEvent, Subscription } from 'rxjs';\n\n@Directive({\n  selector: '[xxlDraggable]'\n})\nexport class DraggableDirective {\n  @Output() dragStart = new EventEmitter<PointerEvent>();\n  @Output() dragMove = new EventEmitter<PointerEvent>();\n  @Output() dragEnd = new EventEmitter<PointerEvent>();\n  @Output() noDrag = new EventEmitter<PointerEvent>();\n\n  @HostBinding('class.draggable') draggable = true;\n  pointerId?: number;\n\n  private dragState;\n  private isDragging = false;\n  private pointerMoveSubscription: Subscription;\n\n  @HostListener('pointerdown', ['$event']) onPointerDown(event) {\n    if (!event.target.closest('.fb-drag-ignore')) {\n      event.stopPropagation();\n\n      if (event.button !== 0) {\n        return;\n      }\n\n      this.pointerId = event.pointerId;\n\n      this.dragState = event;\n\n      this.pointerMoveSubscription = fromEvent(document, 'pointermove')\n        .subscribe(e => this.onPointerMove(e));\n    }\n  }\n\n  @HostListener('document:pointerup', ['$event'])\n  @HostListener('document:pointercancel', ['$event'])\n  onPointerUp(event) {\n    if (this.pointerMoveSubscription) {\n      this.pointerMoveSubscription.unsubscribe();\n    }\n\n    if (this.isDragging && event.timeStamp - this.dragState.timeStamp > 200) {\n      this.dragEnd.emit(event);\n    } else if (this.dragState) {\n      this.noDrag.emit(event);\n    }\n\n    this.dragState = null;\n    this.isDragging = false;\n  }\n\n  onPointerMove(event) {\n    if (!this.dragState || event.pointerId !== this.pointerId) {\n      return;\n    }\n\n    if (!this.isDragging) {\n      this.dragStart.emit(this.dragState);\n\n        this.isDragging = true;\n    }\n\n    this.dragMove.emit(event);\n  }\n}\n","import { AfterContentInit, ContentChildren, Directive, ElementRef, OnDestroy, QueryList } from '@angular/core';\nimport {Subscription} from 'rxjs';\nimport {MovableDirective} from '../movable/movable.directive';\n\nexport interface Boundaries {\n  minX: number;\n  minY: number;\n  maxX: number;\n  maxY: number;\n}\n\n@Directive({\n  selector: '[xxlMovableArea]'\n})\nexport class MovableAreaDirective implements OnDestroy, AfterContentInit {\n  @ContentChildren(MovableDirective) movables: QueryList<MovableDirective>;\n\n  private boundaries: Boundaries;\n  private subscriptions: Subscription[] = [];\n  private mainSub: Subscription;\n\n  constructor(private element: ElementRef) {\n  }\n\n  ngAfterContentInit(): void {\n    this.mainSub = this.movables.changes.subscribe(() => {\n      this.subscriptions.forEach(sub => sub.unsubscribe());\n      this.subscriptions = [];\n\n      this.movables.forEach(movable => {\n        this.subscriptions.push(movable.dragStart.subscribe(() => this.measureBoundaries(movable)));\n        this.subscriptions.push(movable.dragMove.subscribe(() => this.maintainBoundaries(movable)));\n      });\n    });\n\n    this.movables.notifyOnChanges();\n  }\n\n  ngOnDestroy(): void {\n    if (this.subscriptions.length){\n      this.subscriptions.forEach(s => s.unsubscribe());\n    }\n\n    this.mainSub.unsubscribe();\n  }\n\n  private measureBoundaries(movable: MovableDirective): void {\n    const areaRect = this.element.nativeElement.getBoundingClientRect();\n    const movableRect = movable.element.nativeElement.getBoundingClientRect();\n    const movablePos = movable.position || { x: 0, y: 0};\n\n    this.boundaries = {\n      minX: (areaRect.left - movableRect.left) / areaRect.width * 100 + movablePos.x,\n      maxX: (areaRect.right - movableRect.right) / areaRect.width * 100 + movablePos.x,\n      minY: (areaRect.top - movableRect.top) / areaRect.height * 100 + movablePos.y,\n      maxY: (areaRect.bottom - movableRect.bottom) / areaRect.height * 100 + movablePos.y\n    };\n  }\n\n  private maintainBoundaries(movable: MovableDirective): void {\n    movable.position.x = Math.max(this.boundaries.minX, movable.position.x);\n    movable.position.x = Math.min(this.boundaries.maxX, movable.position.x);\n    movable.position.y = Math.max(this.boundaries.minY, movable.position.y);\n    movable.position.y = Math.min(this.boundaries.maxY, movable.position.y);\n  }\n}\n","import { Directive, ElementRef, EventEmitter, HostBinding, HostListener, Input, Output } from '@angular/core';\nimport { DomSanitizer } from '@angular/platform-browser';\nimport { DraggableDirective } from '../draggable/draggable.directive';\nimport { XxlPosition } from '../../flow-based';\n\n@Directive({\n  selector: '[xxlMovable]'\n})\nexport class MovableDirective extends DraggableDirective {\n  @Input() position: XxlPosition;\n  @Output() positionChange = new EventEmitter<XxlPosition>();\n\n  private parentWidth;\n  private parentHeight;\n\n  @HostBinding('class.is-moving') isMoving = false;\n\n  // @HostBinding('style.transform') get transform(): SafeStyle {\n  //   return this.sanitzier.bypassSecurityTrustStyle(`translateX(${this.position.x}px) translateY(${this.position.y}px)`);\n  // }\n\n  @HostBinding('style.top.%') get top(): number {\n    return this.position ? this.position.y : 0;\n  }\n\n  @HostBinding('style.left.%') get left(): number {\n    return this.position ? this.position.x : 0;\n  }\n\n  private startPosition: XxlPosition;\n\n  constructor(public element: ElementRef, private sanitzier: DomSanitizer) {\n    super();\n  }\n\n  @HostListener('dragStart', ['$event']) onDragStart(event: PointerEvent) {\n    const { height, width } = this.element.nativeElement.parentElement.getBoundingClientRect();\n\n    this.parentHeight = height;\n    this.parentWidth = width;\n\n    this.startPosition = {\n      x: (event.clientX  / width * 100 - this.left),\n      y: (event.clientY  / height * 100 - this.top)\n    };\n  }\n\n  @HostListener('dragMove', ['$event']) onDragMove(event: PointerEvent) {\n    this.isMoving = true;\n\n    this.position = {\n      x: event.clientX / this.parentWidth * 100 - this.startPosition.x,\n      y: event.clientY / this.parentHeight * 100 - this.startPosition.y\n    };\n\n    this.positionChange.emit(this.position);\n  }\n\n  @HostListener('dragEnd', ['$event']) onDragEnd(event: PointerEvent) {\n    this.isMoving = false;\n    this.positionChange.emit(this.position);\n  }\n}\n","import { Directive, Input, Type, ViewContainerRef, ComponentFactoryResolver, OnChanges, Injector, Inject } from '@angular/core';\nimport { ReplaySubject } from 'rxjs';\nimport { XXL_FLOW_TYPES, XXL_FLOW_UNIT_STATE, XxlFlowUnitState, FbNodeTypes } from './flow-based';\n\n@Directive({\n  selector: '[xxlDynamicComponent]'\n})\nexport class DynamicComponentDirective<T = any> implements OnChanges {\n  // tslint:disable:no-input-rename\n  @Input('xxlDynamicComponent')  state: XxlFlowUnitState;\n  // tslint:enable:no-input-rename\n\n  instance: T;\n  instance$ = new ReplaySubject<T>(1);\n\n  constructor(@Inject(XXL_FLOW_TYPES) public flowTypes: FbNodeTypes,\n              private viewContainer: ViewContainerRef,\n              private injector: Injector,\n              private componentFactoryResolver: ComponentFactoryResolver) {}\n\n  ngOnChanges(): void {\n    this.viewContainer.clear();\n\n    const injector = Injector.create({\n      providers: [\n        {\n          provide: XXL_FLOW_UNIT_STATE,\n          useValue: this.state\n        }\n      ],\n      parent: this.injector\n    });\n\n    const factory = this.componentFactoryResolver.resolveComponentFactory(this.flowTypes[this.state.type].component);\n    this.instance = this.viewContainer.createComponent(factory, 0, injector).instance as T;\n\n    this.instance$.next(this.instance);\n  }\n}\n","module.exports = \"<article *ngIf=\\\"active\\\" xxlMovableArea #dragArea>\\n  <xxl-connection-lines\\n    [connections]=\\\"state.connections\\\"\\n    [pointerMoved]=\\\"pointerMove\\\"\\n    [from]=\\\"activeSocketFrom\\\"\\n    [to]=\\\"activeSocketTo\\\"\\n    (lineClick)=\\\"removeConnection($event)\\\"></xxl-connection-lines>\\n\\n  <ng-container *ngFor=\\\"let child of state.children; index as i\\\">\\n    <fb-node #node\\n               class=\\\"block\\\"\\n               xxlMovable\\n               [(position)]=\\\"child.position\\\"\\n               (updated)=\\\"reset()\\\"\\n               (dragStart)=\\\"onDragStart($event, child)\\\"\\n               (dragEnd)=\\\"onDragEnd($event, child)\\\"\\n               [scope]=\\\"state.id\\\"\\n               [state]=\\\"child\\\"\\n               (noDrag)=\\\"entryClicked(i)\\\"\\n               [class.is-moving]=\\\"movingNode === child.id\\\">\\n    </fb-node>\\n  </ng-container>\\n</article>\\n\"","module.exports = \":host {\\n  background-color: transparent;\\n  border-radius: 13px;\\n  display: inline-flex;\\n  height: 100%;\\n  width: 100%; }\\n  :host .active-socket-in {\\n    --socket-in-disabled: #900; }\\n  :host .active-socket-in ::ng-deep .sockets-in .socket {\\n      pointer-events: none; }\\n  :host .active-socket-out {\\n    --socket-out-disabled: #900; }\\n  :host .active-socket-out ::ng-deep .sockets-out .socket {\\n      pointer-events: none; }\\n  :host > [xxlmovablearea] {\\n    height: 100%;\\n    width: 100%; }\\n  xxl-connection-lines {\\n  position: absolute;\\n  top: 0px;\\n  right: 0px;\\n  bottom: 0px;\\n  left: 0px; }\\n  fb-node {\\n  z-index: 2; }\\n  fb-node.is-moving {\\n    z-index: 5; }\\n  fb-node.is-active {\\n    z-index: 4; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9sdWNhc2NhbGplL1dlYnN0b3JtUHJvamVjdHMvZmxvdy1iYXNlZC9wcm9qZWN0cy9mbG93LWJhc2VkL3NyYy9saWIvZmxvdy1iYXNlZC5jb21wb25lbnQuc2NzcyIsIi9Vc2Vycy9sdWNhc2NhbGplL1dlYnN0b3JtUHJvamVjdHMvZmxvdy1iYXNlZC9wcm9qZWN0cy9mbG93LWJhc2VkL3NyYy9saWIvdXRpbHMvX3V0aWxzLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBR0E7RUFDRSw4QkFBNkI7RUFDN0Isb0JBQW1CO0VBQ25CLHFCQUFvQjtFQ3FDcEIsYURwQ3NCO0VDcUN0QixZRHJDc0IsRUFxQnZCO0VBekJEO0lBT0ksMkJBQXFCLEVBS3RCO0VBWkg7TUFVTSxxQkFBb0IsRUFDckI7RUFYTDtJQWVJLDRCQUFzQixFQUt2QjtFQXBCSDtNQWtCTSxxQkFBb0IsRUFDckI7RUFuQkw7SUN3Q0UsYURqQndCO0lDa0J4QixZRGxCd0IsRUFDdkI7RUFHSDtFQ25CRSxtQkRvQjZCO0VDZDNCLFNEY2dDO0VDUGhDLFdET29DO0VDQXBDLFlEQXdDO0VDT3hDLFVEUDRDLEVBQy9DO0VBRUQ7RUFDRSxXQUFVLEVBU1g7RUFWRDtJQUlJLFdBQVUsRUFDWDtFQUxIO0lBUUksV0FBVSxFQUNYIiwiZmlsZSI6InByb2plY3RzL2Zsb3ctYmFzZWQvc3JjL2xpYi9mbG93LWJhc2VkLmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiQGltcG9ydCAnLi91dGlscy91dGlscyc7XG5AaW1wb3J0ICcuL3V0aWxzL3ZhcmlhYmxlcyc7XG5cbjpob3N0IHtcbiAgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7XG4gIGJvcmRlci1yYWRpdXM6IDEzcHg7XG4gIGRpc3BsYXk6IGlubGluZS1mbGV4O1xuICBAaW5jbHVkZSB4eGwtc2l6ZSgxMDAlKTtcblxuICAuYWN0aXZlLXNvY2tldC1pbiB7XG4gICAgLS1zb2NrZXQtaW4tZGlzYWJsZWQ6ICM5MDA7XG5cbiAgICA6Om5nLWRlZXAgLnNvY2tldHMtaW4gLnNvY2tldCB7XG4gICAgICBwb2ludGVyLWV2ZW50czogbm9uZTtcbiAgICB9XG4gIH1cblxuICAuYWN0aXZlLXNvY2tldC1vdXQge1xuICAgIC0tc29ja2V0LW91dC1kaXNhYmxlZDogIzkwMDtcblxuICAgIDo6bmctZGVlcCAuc29ja2V0cy1vdXQgLnNvY2tldCB7XG4gICAgICBwb2ludGVyLWV2ZW50czogbm9uZTtcbiAgICB9XG4gIH1cblxuICA+IFt4eGxtb3ZhYmxlYXJlYV0ge1xuICAgIEBpbmNsdWRlIHh4bC1zaXplKDEwMCUpO1xuICB9XG59XG5cbnh4bC1jb25uZWN0aW9uLWxpbmVzIHtcbiAgQGluY2x1ZGUgZmItcG9zaXRpb24oYWJzb2x1dGUsIDBweCAwcHggMHB4IDBweCk7XG59XG5cbmZiLW5vZGUge1xuICB6LWluZGV4OiAyO1xuXG4gICYuaXMtbW92aW5nIHtcbiAgICB6LWluZGV4OiA1O1xuICB9XG5cbiAgJi5pcy1hY3RpdmUge1xuICAgIHotaW5kZXg6IDQ7XG4gIH1cbn1cbiIsIkBtaXhpbiBmYi1wb3NpdGlvbigkcG9zaXRpb246IHJlbGF0aXZlLCAkY29vcmRpbmF0ZXM6IDAgMCAwIDApIHtcbiAgQGlmIHR5cGUtb2YoJHBvc2l0aW9uKSA9PSBsaXN0IHtcbiAgICAkY29vcmRpbmF0ZXM6ICRwb3NpdGlvbjtcbiAgICAkcG9zaXRpb246IHJlbGF0aXZlO1xuICB9XG5cbiAgJHRvcDogbnRoKCRjb29yZGluYXRlcywgMSk7XG4gICRyaWdodDogbnRoKCRjb29yZGluYXRlcywgMik7XG4gICRib3R0b206IG50aCgkY29vcmRpbmF0ZXMsIDMpO1xuICAkbGVmdDogbnRoKCRjb29yZGluYXRlcywgNCk7XG5cbiAgcG9zaXRpb246ICRwb3NpdGlvbjtcblxuICAvLyBUb3BcbiAgQGlmICR0b3AgPT0gYXV0byB7XG4gICAgdG9wOiAkdG9wO1xuICB9IEBlbHNlIGlmIG5vdCh1bml0bGVzcygkdG9wKSkge1xuICAgIHRvcDogJHRvcDtcbiAgfVxuXG4gIC8vIFJpZ2h0XG4gIEBpZiAkcmlnaHQgPT0gYXV0byB7XG4gICAgcmlnaHQ6ICRyaWdodDtcbiAgfSBAZWxzZSBpZiBub3QodW5pdGxlc3MoJHJpZ2h0KSkge1xuICAgIHJpZ2h0OiAkcmlnaHQ7XG4gIH1cblxuICAvLyBCb3R0b21cbiAgQGlmICRib3R0b20gPT0gYXV0byB7XG4gICAgYm90dG9tOiAkYm90dG9tO1xuICB9IEBlbHNlIGlmIG5vdCh1bml0bGVzcygkYm90dG9tKSkge1xuICAgIGJvdHRvbTogJGJvdHRvbTtcbiAgfVxuXG4gIC8vIExlZnRcbiAgQGlmICRsZWZ0ID09IGF1dG8ge1xuICAgIGxlZnQ6ICRsZWZ0O1xuICB9IEBlbHNlIGlmIG5vdCh1bml0bGVzcygkbGVmdCkpIHtcbiAgICBsZWZ0OiAkbGVmdDtcbiAgfVxufVxuXG5AbWl4aW4geHhsLXNpemUoJHdpZHRoLCAkaGVpZ2h0OiAkd2lkdGgpIHtcbiAgaGVpZ2h0OiAkaGVpZ2h0O1xuICB3aWR0aDogJHdpZHRoO1xufVxuIl19 */\"","import {\n  AfterViewInit,\n  ChangeDetectionStrategy, ChangeDetectorRef,\n  Component,\n  ElementRef, EventEmitter,\n  forwardRef, HostBinding, HostListener,\n  Input, OnChanges, OnDestroy, OnInit, Optional, Output, QueryList, SimpleChanges, ViewChild, ViewChildren,\n} from '@angular/core';\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR } from '@angular/forms';\nimport {\n  XxlFlow,\n  XxlFlowUnitState, XxlConnection, XxlSocketEvent, FbNodeState\n} from './flow-based';\nimport { FlowBasedService } from './flow-based.service';\nimport { SocketService } from './socket.service';\nimport { filter } from 'rxjs/operators';\nimport { NodeService } from './node/node-service';\nimport { Subscription } from 'rxjs';\n\n@Component({\n  selector: 'xxl-flow-based',\n  templateUrl: './flow-based.component.html',\n  styleUrls: ['./flow-based.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  providers: [{provide: NG_VALUE_ACCESSOR, useExisting: forwardRef(() => FlowBasedComponent), multi: true}]\n})\nexport class FlowBasedComponent implements OnInit, OnChanges, OnDestroy, AfterViewInit, ControlValueAccessor {\n  @Input() @HostBinding('class.is-active') active = true;\n  @Input() @HostBinding('class.is-root') root = true;\n  @Input() @HostBinding('class.type') type: string;\n  @Input() state: FbNodeState;\n\n  @Output() activeChanged = new EventEmitter<boolean>();\n  @Output() stateChanged = new EventEmitter<boolean>();\n  @Output() clicked = new EventEmitter<PointerEvent>();\n  @ViewChild('dragArea') area: ElementRef;\n\n  private subscription: Subscription;\n\n  onChange: (state: any) => void;\n  pointerMove: PointerEvent;\n  activeSocketFrom: number | null;\n  activeSocketTo: number | null;\n  lastSocketEvent: XxlSocketEvent;\n  movingNode: number;\n\n  constructor(\n    private element: ElementRef,\n    private cdr: ChangeDetectorRef,\n    public flowService: FlowBasedService,\n    public socketService: SocketService,\n    @Optional() private nodeService: NodeService) {\n  }\n\n  @HostListener('pointermove', ['$event'])\n  updatePointer(event): void {\n    if (this.activeSocketFrom || this.activeSocketTo) {\n      this.pointerMove = event;\n    }\n  }\n\n  @HostListener('pointerdown', ['$event'])\n  onClick(event): void {\n    event.stopPropagation();\n\n    const shouldPropagate = !this.activeSocketFrom && !this.activeSocketTo;\n    this.socketService.outsideClick();\n\n    if (shouldPropagate) {\n      this.clicked.next(event);\n    }\n  }\n\n  repaintConnections(): void {\n    this.state.connections = [...this.state.connections!];\n\n    this.cdr.detectChanges();\n  }\n\n  ngOnInit() {\n    if (!this.state) {\n      this.state = {} as FbNodeState;\n    }\n\n    this.flowService.activateFlow(this);\n\n    this.subscription = this.socketService.socketClicked$.pipe(\n      filter(e => !e || e.scope === this.id)\n    ).subscribe((event: XxlSocketEvent) => {\n      if (event) {\n        if (event.socket.type === 'out') {\n          this.activeSocketFrom = event.socket.id!;\n        } else {\n          this.activeSocketTo = event.socket.id!;\n        }\n\n        if (this.activeSocketTo && this.activeSocketFrom) {\n          this.flowService.addConnection(this.buildConnection(this.lastSocketEvent, event));\n          setTimeout(() => {\n            this.socketService.onSocketClick(null);\n          });\n\n        }\n\n        this.lastSocketEvent = event;\n      } else {\n        this.activeSocketTo = null;\n        this.activeSocketFrom = null;\n      }\n    });\n  }\n\n  ngOnChanges(obj: SimpleChanges): void {\n    if (this.root) {\n      this.flowService.initialize(this.state);\n    }\n  }\n\n  ngOnDestroy(): void {\n    this.flowService.deactivateFlow();\n    this.subscription.unsubscribe();\n  }\n\n  reset(): void {\n  }\n\n  get id(): number {\n    return this.state.id!;\n  }\n\n  repaint(): void {\n    setTimeout(() => {\n      this.socketService.clearPosition();\n      this.state.connections = [...this.state.connections!];\n      this.cdr.detectChanges();\n    });\n  }\n\n  updateChildren(): void {\n    this.state.children = [...this.state.children!];\n    this.state.connections = [...this.state.connections!];\n    this.cdr.detectChanges();\n  }\n\n  deactivate(): void {\n    // this.cdr.detectChanges();\n  }\n\n  onDragStart(event: PointerEvent, state: XxlFlowUnitState): void {\n    // const index = this.state.children.indexOf(state);\n  }\n\n  onDragEnd(event: PointerEvent, state: XxlFlowUnitState): void {\n    this.state.children = [...this.state.children!.filter(child => child !== state), state];\n  }\n\n  nodeAdded(nodeState: XxlFlowUnitState): void {\n    this.cdr.detectChanges();\n  }\n\n  entryClicked(index: number): void {\n  }\n\n  removeConnection(connection: XxlConnection): void {\n    this.flowService.flow.removeConnection(connection, this.state);\n    // this.cdr.detectChanges();\n  }\n\n  // repaintConnections(): void {\n  //   setTimeout(() => { // TODO: Fix timeout-ception\n  //     this.state.connections = [...this.state.connections!];\n  //     // this.cdr.detectChanges();\n  //   });\n  // }\n\n  registerOnChange(onChange: (state: any) => void): void {\n    this.onChange = onChange;\n  }\n\n  registerOnTouched(): void {\n  }\n\n  writeValue(state: XxlFlow): void {\n    // this.state = state;\n    // this.createInjector();\n  }\n\n  @HostListener('window:resize')\n  onResize(): void {\n    this.repaint();\n  }\n\n  setDisabledState(isDisabled: boolean): void {\n  }\n\n  ngAfterViewInit(): void {\n    this.repaint();\n  }\n\n  private buildConnection(a: XxlSocketEvent, b: XxlSocketEvent): XxlConnection {\n    const conn = {} as XxlConnection;\n\n    if (a.socket.type === 'out') {\n      conn.from = a.parentId;\n      conn.out = a.socket.id;\n      conn.to = b.parentId;\n      conn.in = b.socket.id;\n    } else {\n      conn.to = a.parentId;\n      conn.in = a.socket.id;\n      conn.from = b.parentId;\n      conn.out = b.socket.id;\n    }\n\n    return conn;\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { CommonModule } from '@angular/common';\n\nimport { XXL_FLOW_TYPES } from './flow-based';\nimport { FlowBasedComponent } from './flow-based.component';\nimport { FlowBasedManagerService } from './services/flow-based-manager.service';\nimport { DraggableDirective } from './drag-drop/draggable/draggable.directive';\nimport { MovableDirective } from './drag-drop/movable/movable.directive';\nimport { MovableAreaDirective } from './drag-drop/movable-area/movable-area.directive';\nimport { NodeComponent } from './node/node.component';\nimport { DynamicComponentDirective } from './dynamic-component.directive';\nimport { ConnectionLinesComponent } from './connection-lines/connection-lines.component';\nimport { SocketInPipe } from './pipes/socket-in.pipe';\nimport { SocketOutPipe } from './pipes/socket-out.pipe';\nimport { SocketComponent } from './socket/socket.component';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    ReactiveFormsModule\n  ],\n  declarations: [\n    DynamicComponentDirective,\n    FlowBasedComponent,\n    NodeComponent,\n    DraggableDirective,\n    MovableDirective,\n    MovableAreaDirective,\n    ConnectionLinesComponent,\n    SocketInPipe,\n    SocketOutPipe,\n    SocketComponent],\n  exports: [FlowBasedComponent, SocketInPipe, SocketOutPipe],\n  providers: [\n    FlowBasedManagerService,\n    {\n      provide: XXL_FLOW_TYPES,\n      useValue: {}\n    },\n    FlowBasedManagerService]\n})\nexport class FlowBasedModule {\n}\n","import { Inject, Injectable, Optional } from '@angular/core';\nimport {\n  XXL_FLOW_TYPES,\n  XxlConnection,\n  FbNodeType,\n  XxlFlowUnitState,\n  FbNodeWorker, FB_NODE_HELPERS, FbNodeHelpers, FbKeyValues, FbNodeState, XxlSocket, ConnectionDetails, XxlSocketEvent\n} from './flow-based';\nimport { FlowBasedComponent } from './flow-based.component';\nimport { Flow } from './utils/flow';\nimport { SocketService } from './socket.service';\nimport { deepClone } from './utils/deep-clone';\n\nlet uniqueId = Date.now();\n\nexport interface ExternalEvent {\n  type: string;\n  payload: any;\n  nodeId: number;\n}\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class FlowBasedService {\n  public flow: Flow;\n  private flowStack: FlowBasedComponent[] = [];\n  private nodeListeners: Record<string, { id: number, callback: (any) => boolean | void }[]> = {};\n\n  constructor(private socketService: SocketService,\n              @Inject(XXL_FLOW_TYPES) private flowTypes: FbNodeType,\n              @Optional() @Inject(FB_NODE_HELPERS) private helpers: FbNodeHelpers) {\n  }\n\n  nodeMoved(id: number): void {\n    this.socketService.clearPosition(id);\n    this.currentFlow.repaintConnections();\n  }\n\n  nodeClicked(nodeState): void {\n    this.socketService.outsideClick();\n    const state = this.currentFlow.state;\n\n    if (nodeState === state) {\n      return;\n    }\n\n    state.children = [...state.children!.filter(node => node.id !== nodeState.id), nodeState];\n  }\n\n  addConnection(connection: XxlConnection): void {\n    if (!connection.id) {\n      connection.id = this.getUniqueId();\n    }\n\n    this.flow.addConnection(this.currentFlow.state, connection);\n  }\n\n  get currentFlow(): FlowBasedComponent {\n    return this.flowStack[0];\n  }\n\n  get parentFlow(): FlowBasedComponent {\n    return this.flowStack[1];\n  }\n\n  getUniqueId(): number {\n    return ++uniqueId;\n  }\n\n  initialize(state: FbNodeState): void {\n    if (!state.children) {\n      state.id = this.getUniqueId();\n      state.children = [];\n      state.connections = [];\n    }\n\n    this.socketService.reset();\n    this.flow = new Flow(this.flowTypes, this.helpers).initialize(state);\n  }\n\n  getWorker(id: number): FbNodeWorker {\n    return this.flow.getWorker(id);\n  }\n\n  add(flowType: string): XxlFlowUnitState {\n    const {settings} = this.flowTypes[flowType];\n\n    const state = {\n      type: flowType,\n      title: settings.title,\n      id: this.getUniqueId(),\n      config: deepClone(settings.config),\n      sockets: this.prepareSockets(settings.sockets),\n      ...(settings.isFlow ? {children: [], connections: []} : {})\n    };\n\n    this.flow.addNode(state, this.currentFlow.state);\n    this.currentFlow.nodeAdded(state);\n\n    return state;\n  }\n\n  prepareSockets(sockets: XxlSocket[] = []): XxlSocket[] {\n    return sockets.map(s => {\n      return Object.assign({id: this.getUniqueId()}, s);\n    });\n  }\n\n  // Flow stuff\n  activateFlow(flow: FlowBasedComponent): void {\n    this.flowStack.unshift(flow);\n    if (this.parentFlow) {\n      this.parentFlow.repaint();\n    }\n  }\n\n  deactivateFlow(): void {\n    this.currentFlow.deactivate();\n    this.flowStack.shift();\n  }\n\n  triggerEvent(type, payload?: any): void {\n    const listeners = this.nodeListeners[type];\n\n    if (listeners && listeners.length > 0) {\n      if (!listeners[0].callback(payload)) {\n        listeners.shift();\n      }\n    }\n  }\n\n  register(id: number, callback: (any) => boolean | void, type: string = '__default__'): void {\n    this.nodeListeners[type] = this.nodeListeners[type] || [];\n    this.nodeListeners[type].unshift({id, callback});\n  }\n\n  unregister(id, type: string = '__default__'): void {\n    if (this.nodeListeners[type]) {\n      this.nodeListeners[type] = this.nodeListeners[type].filter(listener => listener.id !== id);\n    }\n  }\n\n  unregisterAll(id: number): void {\n    Object.keys(this.nodeListeners).forEach(key =>  this.unregister(id, key));\n  }\n\n  delete(state: FbNodeState): void {\n    this.flow.removeNode(state.id!);\n    this.currentFlow.updateChildren();\n\n    this.unregisterAll(state.id!);\n  }\n\n  destroy(): void {\n    this.flow.destroy();\n  }\n\n  removeSocket(socket: XxlSocket): void {\n    this.flow.removeSocket(socket);\n\n    this.flowStack.forEach(flow => {\n      flow.repaintConnections();\n    });\n  }\n}\n","import { InjectionToken, Type } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { SocketComponent } from './socket/socket.component';\n\nexport const XXL_FLOW_TYPES = new InjectionToken<FbNodeTypes>('xxl-flow-types');\nexport const XXL_FLOW_UNIT_STATE = new InjectionToken<FbNodeTypes>('xxl-flow-unit-state');\nexport const FB_NODE_HELPERS = new InjectionToken<FbNodeTypes>('fb-node-helpers');\nexport const FB_SOCKET_COLORS = new InjectionToken<FbNodeTypes>('fb-socket-colors');\n\n// export const XXL_WORKERS = new InjectionToken<FbNodeTypes>('xxl-worker-service');\n\n\nexport interface FbKeyValues<T> {\n  [key: number]: T;\n}\n\nexport interface FbNodeType {\n  component: Type<any>;\n  settings?: { config: any, title: string, sockets: XxlSocket[], isFlow: boolean };\n  type: string;\n  worker: FbNodeWorker;\n}\n\nexport type FbNodeTypes = FbKeyValues<FbNodeType>;\n\nexport interface FbNodeHelpers {\n  resetSockets(node: FbNodeState): void;\n  connect(outSocket: XxlSocket, inSocket: XxlSocket, fromNode: XxlFlowUnitState, toNode: XxlFlowUnitState): boolean;\n}\n\n// Describes the class doing the actual work\nexport interface FbNodeWorker {\n  getStream(socket?: XxlSocket): Observable<any>;\n\n  setStream(stream: Observable<any>, socket: XxlSocket, connection?: XxlConnection): void;\n\n  removeStream(connection?: XxlConnection): void;\n\n  destroy(): void;\n}\n\n\nexport interface XxlPosition {\n  x: number;\n  y: number;\n}\n\nexport interface XxlFlowUnitState {\n  type: string;\n  id?: number;\n  config?: any;\n  title?: string;\n  position?: XxlPosition;\n  sockets?: XxlSocket[];\n}\n\nexport interface XxlFlow extends Partial<XxlFlowUnitState> {\n  connections: XxlConnection[];\n  children: FbNodeState[];\n}\n\nexport interface FbNodeState {\n  type: string;\n  id?: number;\n  config?: any;\n  title?: string;\n  position?: XxlPosition;\n  sockets?: XxlSocket[];\n  connections?: XxlConnection[];\n  children?: FbNodeState[];\n}\n\nexport interface XxlConnection {\n  from: number | HTMLElement;\n  to: number | HTMLElement;\n  in?: number;\n  out?: number;\n  id: number;\n}\n\nexport type XxlSocketType = 'in' | 'out';\n\nexport interface XxlSocket {\n  type: XxlSocketType;\n  id?: number;\n  color?: string;\n  name?: string;\n  format?: string;\n  position?: number;\n  description?: string;\n  aux?: 'string';\n}\n\nexport interface XxlSocketEvent {\n  socket: XxlSocket;\n  parentId: number;\n  scope: number;\n  event: PointerEvent;\n}\n\nexport interface SocketDetails {\n  state: XxlSocket;\n  element: HTMLElement,\n  comp: SocketComponent;\n  parentId: number;\n  scope: number;\n}\n\nexport interface ConnectionDetails {\n  connection: XxlConnection;\n  sockets: { [key: number]: XxlSocket};\n}\n\nexport interface XxlWorkerService {\n  create(id: number, type: string): FbNodeWorker;\n}\n\nexport type FbSocketColors = Record<string, string>;\n\nexport class XxlDriver {\n  private flow: XxlFlow[];\n  private workers: FbNodeWorker[];\n  private connections = [] as XxlConnection[];\n  private running = false;\n\n  delete(index: number): void {\n\n  }\n\n  add(unit: XxlFlow): void {\n\n  }\n\n  connectSockets(connection: XxlConnection): void {\n    this.connections.push(connection);\n\n    if (this.running) {\n      // build connection\n    }\n  }\n\n  start(): void {\n    // this.blocks = [];\n    this.running = true;\n\n    // this.flowEntries.forEach((entry: FbNode) => {\n    // this.workers.push(entry.factory.create(entry.config).start());\n    // });\n\n    // Loop through connections\n  }\n\n  stop(): void {\n    this.running = false;\n\n    // this.workers.forEach((block: FbNodeWorker) => block.stop());\n  }\n}\n\nexport abstract class FlowBasedServiceHelper {\n  private flowHandlers;\n\n  abstract createWorker(type: string): FbNodeWorker;\n\n  addFlowHandler(callback: (type: string, worker: FbNodeWorker) => void): void {\n    this.flowHandlers.unshift(callback);\n  }\n\n  removeFlowHandler(): void {\n    this.flowHandlers.shift();\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { FlowBasedService } from '../flow-based.service';\nimport { SocketDetails, XxlConnection, XxlFlowUnitState, XxlSocket, FbNodeWorker } from '../flow-based';\nimport { SocketService } from '../socket.service';\nimport { Subject } from 'rxjs';\nimport { NodeComponent } from './node.component';\n\n/*\nPrimary service for custom nodes to communicate with the framework\n */\n\n@Injectable()\nexport class NodeService {\n  public connections: XxlConnection[];\n  public state: XxlFlowUnitState;\n\n  private nodeClicked = new Subject<PointerEvent>();\n  public nodeClicked$ = this.nodeClicked.asObservable();\n\n  private nodeComponent: NodeComponent;\n  private doubleClick: () => void;\n  private thresholdClicks = 300;\n  private lastClicked = 0;\n\n  constructor(public flowService: FlowBasedService,\n              private socketService: SocketService) {\n  }\n\n  register(callback: (ExternalEvent) => boolean | void, type?: string): void {\n    this.flowService.register(this.id, callback, type);\n  }\n\n  unregisterAll(): void {\n    this.flowService.unregisterAll(this.id);\n  }\n\n  unregister(type?: string): void {\n    this.flowService.unregister(this.id, type);\n  }\n\n  connectNode(node: NodeComponent, state: XxlFlowUnitState): void {\n    this.state = state;\n    this.nodeComponent = node;\n  }\n\n  setMaxSize(isMax: boolean): void {\n    this.nodeComponent.setMaxSize(isMax);\n    this.calibrate();\n  }\n\n  nodeIsClicked(e: PointerEvent): void {\n    this.nodeClicked.next(e);\n    this.flowService.nodeClicked(this.state);\n    console.log('clicked');\n\n    if (Date.now() - this.lastClicked < this.thresholdClicks) {\n      if (this.doubleClick) {\n        this.doubleClick();\n        this.nodeComponent.setMaxSize(false);\n      }\n    } else {\n      this.lastClicked = Date.now();\n    }\n  }\n\n  closeOnDoubleClick(callback: () => void, threshold = 300): void {\n    this.thresholdClicks = threshold;\n    this.doubleClick = callback;\n  }\n\n  closeOnBlur(cb: () => void): void {\n    this.flowService.register(this.id, () => {\n      cb();\n    }, 'blur');\n  }\n\n  get id(): number {\n    return this.state.id!;\n  }\n\n  calibrate(): void {\n    setTimeout(() => {\n      this.flowService.nodeMoved(this.id);\n    });\n  }\n\n  addSocket(socket: XxlSocket): void {\n    this.flowService.flow.addSocket(socket, this.id);\n\n    setTimeout(() => {\n      this.flowService.nodeMoved(this.id);\n      this.nodeComponent.socketAdded();\n    });\n  }\n\n  getSocket(id: number): SocketDetails {\n    return this.socketService.getSocket(id);\n  }\n\n  getSockets(): SocketDetails[] {\n    return (this.state.sockets || []).reduce((sockets, socket: XxlSocket) => {\n      sockets.push(this.getSocket(socket.id!));\n\n      return sockets;\n    }, [] as SocketDetails[]);\n  }\n\n  get worker(): FbNodeWorker {\n    return this.flowService.getWorker(this.id);\n  }\n\n  socketRemoved(socket: XxlSocket): void {\n    this.flowService.removeSocket(socket);\n  }\n\n  refresh(): void {\n    this.updateConnections();\n  }\n\n  deleteSelf(): void {\n    this.flowService.delete(this.state);\n  }\n\n  addConnection(from: HTMLElement, to: HTMLElement): number {\n    const id = this.flowService.getUniqueId();\n\n    const conn = {\n      id,\n      from: from,\n      to: to\n    };\n\n    this.connections = [...(this.connections || []), conn];\n    this.updateConnections();\n\n    return id;\n  }\n\n  updateConnections(): void {\n    if (this.connections) {\n      this.connections = [...this.connections];\n      this.nodeComponent.connectionsUpdated();\n    }\n  }\n\n  removeConnection(id: number): void {\n    this.connections = this.connections!.filter(conn => conn.id !== id);\n\n    setTimeout(() => {\n      this.nodeComponent.repaintConnections();\n    });\n  }\n\n  removeConnections(): void {\n    delete this.connections;\n    this.nodeComponent.repaintConnections();\n  }\n\n  hideLabel(): void {\n    this.nodeComponent.hideLabel();\n  }\n\n  showLabel(): void {\n    this.nodeComponent.showLabel();\n  }\n}\n","module.exports = \"<section class=\\\"component\\\">\\n  <ng-container *ngIf=\\\"isFlow() && isFullSize\\\">\\n    <xxl-flow-based #flow [state]=\\\"state\\\" [active]=\\\"true\\\" [root]=\\\"false\\\" (clicked)=\\\"onClick($event)\\\"></xxl-flow-based>\\n  </ng-container>\\n\\n  <xxl-connection-lines *ngIf=\\\"!!service.connections\\\"\\n                        [connections]=\\\"service.connections\\\"\\n                        [class.is-dark]=\\\"isFlow()\\\" class=\\\"tmp-lines\\\"></xxl-connection-lines>\\n\\n  <ng-container *xxlDynamicComponent=\\\"state\\\"></ng-container>\\n\\n  <section class=\\\"sockets sockets-in\\\" [class.is-disabled]=\\\"isFullSize && !isFlow()\\\">\\n    <xxl-socket *ngFor=\\\"let socket of sockets | socketIn\\\"\\n                [state]=\\\"socket\\\"\\n                [scope]=\\\"getScope()\\\"\\n                [invert]=\\\"isInverted()\\\"\\n                [parent]=\\\"id\\\"\\n                [attr.data-socket-id]=\\\"socket.id\\\"\\n                class=\\\"socket\\\"></xxl-socket>\\n  </section>\\n\\n  <section class=\\\"sockets sockets-out\\\" [class.is-disabled]=\\\"isFullSize && !isFlow()\\\">\\n    <xxl-socket *ngFor=\\\"let socket of sockets | socketOut\\\"\\n                [state]=\\\"socket\\\"\\n                [scope]=\\\"getScope()\\\"\\n                [invert]=\\\"isInverted()\\\"\\n                [parent]=\\\"id\\\"\\n                class=\\\"socket\\\"></xxl-socket>\\n  </section>\\n\\n  <ng-container *ngIf=\\\"isLabel\\\">\\n    <span class=\\\"title\\\" *ngIf=\\\"!isFullSize\\\">{{state.title}}</span>\\n  </ng-container>\\n</section>\\n\"","module.exports = \":host {\\n  --inner-border-color: var(--block-border-color, #868686);\\n  --socket-size: 14px;\\n  align-items: center;\\n  background-color: rgba(0, 0, 0, 0.8);\\n  border-color: var(--inner-border-color);\\n  border-radius: 12px;\\n  border-style: solid;\\n  border-width: 3px;\\n  box-sizing: border-box;\\n  display: flex;\\n  justify-content: center;\\n  min-height: 50px;\\n  min-width: 72px;\\n  padding: 4px;\\n  position: relative;\\n  -webkit-user-select: none;\\n     -moz-user-select: none;\\n      -ms-user-select: none;\\n          user-select: none;\\n  z-index: 10; }\\n  :host .sockets-in .socket {\\n    background-color: var(--socket-in-disabled, #fff);\\n    border-color: var(--inner-border-color) var(--inner-border-color) transparent transparent; }\\n  :host .sockets-out .socket {\\n    background-color: var(--socket-out-disabled, #fff);\\n    border-color: transparent transparent var(--inner-border-color) var(--inner-border-color); }\\n  :host:not(.is-fullsize) {\\n    cursor: move;\\n    position: absolute; }\\n  :host:not(.is-fullsize) .add-socket {\\n      display: none; }\\n  :host:not(.is-fullsize) .title {\\n      background-color: rgba(0, 0, 0, 0.2);\\n      color: #fff;\\n      font-size: 14px;\\n      height: 20px;\\n      line-height: 19px;\\n      padding: 0 8px;\\n      pointer-events: none;\\n      text-align: center;\\n      top: calc(100% + 4px);\\n      -webkit-transform: translateX(-50%);\\n              transform: translateX(-50%);\\n      position: absolute;\\n      left: 50%; }\\n  :host:not(.is-fullsize) .title::-webkit-input-placeholder {\\n        color: transparent; }\\n  :host:not(.is-fullsize) .title::-ms-input-placeholder {\\n        color: transparent; }\\n  :host:not(.is-fullsize) .title::placeholder {\\n        color: transparent; }\\n  :host.is-fullsize {\\n    --socket-size: 42px;\\n    height: 100%;\\n    left: 0 !important;\\n    position: relative;\\n    top: 0 !important;\\n    -webkit-transform: translate(0, 0);\\n            transform: translate(0, 0);\\n    z-index: 20; }\\n  .title {\\n  align-self: center;\\n  background-color: rgba(153, 153, 255, 0.4);\\n  border: none;\\n  border-radius: 8px;\\n  caret-color: #fff;\\n  color: #fff;\\n  outline: none;\\n  text-align: center;\\n  -webkit-transform: translateX(-50%);\\n          transform: translateX(-50%);\\n  white-space: nowrap;\\n  position: absolute;\\n  top: 16px;\\n  left: 50%; }\\n  .title::-webkit-input-placeholder {\\n    color: #fff; }\\n  .title::-ms-input-placeholder {\\n    color: #fff; }\\n  .title::placeholder {\\n    color: #fff; }\\n  .title:focus {\\n    background-color: #9999ff; }\\n  input.title {\\n  padding: 8px;\\n  width: 400px;\\n  z-index: 3; }\\n  xxl-flow-based {\\n  position: absolute;\\n  top: 0px;\\n  right: 0px;\\n  bottom: 0px;\\n  left: 0px; }\\n  xxl-connection-lines {\\n  background-color: transparent;\\n  pointer-events: none;\\n  z-index: 2;\\n  position: absolute;\\n  top: 0px;\\n  right: 0px;\\n  bottom: 0px;\\n  left: 0px; }\\n  xxl-connection-lines.tmp-lines {\\n    z-index: 10; }\\n  xxl-connection-lines.is-dark {\\n    background-color: rgba(0, 0, 0, 0.8); }\\n  .component {\\n  border-radius: 8px;\\n  display: inline-flex;\\n  justify-content: center;\\n  overflow: hidden;\\n  padding: 1px;\\n  height: 100%;\\n  width: 100%; }\\n  .add-socket {\\n  background-color: transparent;\\n  border: 2px solid #9999ff;\\n  border-radius: 100%;\\n  color: #fff;\\n  cursor: pointer;\\n  font-size: 20px;\\n  outline: none;\\n  position: absolute;\\n  position: absolute;\\n  top: 10px;\\n  left: 30px;\\n  height: 40px;\\n  width: 40px; }\\n  .add-socket:active {\\n    top: 11px; }\\n  .sockets {\\n  display: flex;\\n  flex-direction: column;\\n  height: calc(100% - 12px);\\n  justify-content: space-around;\\n  position: absolute;\\n  top: 6px;\\n  width: var(--socket-size);\\n  z-index: 30; }\\n  .sockets.is-disabled {\\n    pointer-events: none; }\\n  .sockets-in {\\n  left: calc(-4px - var(--socket-size) / 2); }\\n  .sockets-out {\\n  right: calc(2px - var(--socket-size) / 2); }\\n  .socket {\\n  background-clip: content-box;\\n  border: 3px solid;\\n  border-radius: 50%;\\n  cursor: pointer;\\n  display: block;\\n  flex: 0 0 var(--socket-size);\\n  -webkit-transform: rotate(45deg);\\n          transform: rotate(45deg);\\n  width: var(--socket-size); }\\n  /*\\n:host-context(.is-max) {\\n  background-color: blue;\\n}\\n*/\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9sdWNhc2NhbGplL1dlYnN0b3JtUHJvamVjdHMvZmxvdy1iYXNlZC9wcm9qZWN0cy9mbG93LWJhc2VkL3NyYy9saWIvbm9kZS9ub2RlLmNvbXBvbmVudC5zY3NzIiwiL1VzZXJzL2x1Y2FzY2FsamUvV2Vic3Rvcm1Qcm9qZWN0cy9mbG93LWJhc2VkL3Byb2plY3RzL2Zsb3ctYmFzZWQvc3JjL2xpYi91dGlscy9fdmFyaWFibGVzLnNjc3MiLCIvVXNlcnMvbHVjYXNjYWxqZS9XZWJzdG9ybVByb2plY3RzL2Zsb3ctYmFzZWQvcHJvamVjdHMvZmxvdy1iYXNlZC9zcmMvbGliL3V0aWxzL191dGlscy5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQVFBO0VBQ0UseURBQXFCO0VBQ3JCLG9CQUFjO0VBRWQsb0JBQW1CO0VBQ25CLHFDQUFvQztFQUNwQyx3Q0FBdUM7RUFDdkMsb0JBQW1CO0VBQ25CLG9CQUFtQjtFQUNuQixrQkFaZ0I7RUFhaEIsdUJBQXNCO0VBRXRCLGNBQWE7RUFDYix3QkFBdUI7RUFDdkIsaUJBQWdCO0VBQ2hCLGdCQUFlO0VBQ2YsYUFBWTtFQUNaLG1CQUFrQjtFQUNsQiwwQkFBaUI7S0FBakIsdUJBQWlCO01BQWpCLHNCQUFpQjtVQUFqQixrQkFBaUI7RUFDakIsWUN6QmMsRUQrRWY7RUF6RUQ7SUF1Qk0sa0RBQWlEO0lBQ2pELDBGQUF5RixFQUUxRjtFQTFCTDtJQStCTSxtREFBa0Q7SUFDbEQsMEZBQXlGLEVBRTFGO0VBbENMO0lBc0NJLGFBQVk7SUFDWixtQkFBa0IsRUF1Qm5CO0VBOURIO01BMENNLGNBQWEsRUFDZDtFQTNDTDtNQThDTSxxQ0FBb0M7TUFDcEMsWUFBVztNQUNYLGdCQUFlO01BQ2YsYUFBWTtNQUNaLGtCQUFpQjtNQUNqQixlQUFjO01BQ2QscUJBQW9CO01BQ3BCLG1CQUFrQjtNQUNsQixzQkFBcUI7TUFDckIsb0NBQTJCO2NBQTNCLDRCQUEyQjtNRXBEL0IsbUJGcURpQztNRTFCL0IsVUYwQjBDLEVBS3pDO0VBN0RMO1FBMkRRLG1CQUFrQixFQUNuQjtFQTVEUDtRQTJEUSxtQkFBa0IsRUFDbkI7RUE1RFA7UUEyRFEsbUJBQWtCLEVBQ25CO0VBNURQO0lBaUVJLG9CQUFjO0lBQ2QsYUFBWTtJQUNaLG1CQUFrQjtJQUNsQixtQkFBa0I7SUFDbEIsa0JBQWlCO0lBQ2pCLG1DQUEwQjtZQUExQiwyQkFBMEI7SUFDMUIsWUM1RW1CLEVENkVwQjtFQUdIO0VBQ0UsbUJBQWtCO0VBQ2xCLDJDQUEwQztFQUMxQyxhQUFZO0VBQ1osbUJBQWtCO0VBQ2xCLGtCQUFpQjtFQUNqQixZQUFXO0VBQ1gsY0FBYTtFQUNiLG1CQUFrQjtFQUNsQixvQ0FBMkI7VUFBM0IsNEJBQTJCO0VBQzNCLG9CQUFtQjtFRWxGbkIsbUJGbUY2QjtFRTdFM0IsVURqQmtCO0VDc0NsQixVRndEcUQsRUFTeEQ7RUFwQkQ7SUFjSSxZQUFXLEVBQ1o7RUFmSDtJQWNJLFlBQVcsRUFDWjtFQWZIO0lBY0ksWUFBVyxFQUNaO0VBZkg7SUFrQkksMEJBQW9DLEVBQ3JDO0VBR0g7RUFDRSxhQUFZO0VBQ1osYUFBWTtFQUNaLFdBQVUsRUFDWDtFQUVEO0VFcEdFLG1CRnFHNkI7RUUvRjNCLFNGK0ZnQztFRXhGaEMsV0Z3Rm9DO0VFakZwQyxZRmlGd0M7RUUxRXhDLFVGMEU0QyxFQUMvQztFQUVEO0VBQ0UsOEJBQTZCO0VBQzdCLHFCQUFvQjtFQUNwQixXQUFVO0VFM0dWLG1CRjRHNkI7RUV0RzNCLFNGc0dnQztFRS9GaEMsV0YrRm9DO0VFeEZwQyxZRndGd0M7RUVqRnhDLFVGaUY0QyxFQVMvQztFQWJEO0lBT0ksWUFBVyxFQUNaO0VBUkg7SUFXSSxxQ0FBb0MsRUFDckM7RUFHSDtFQUNFLG1CQUFrQjtFQUNsQixxQkFBb0I7RUFDcEIsd0JBQXVCO0VBQ3ZCLGlCQUFnQjtFQUNoQixhQUFZO0VFNUZaLGFGNkZzQjtFRTVGdEIsWUY0RnNCLEVBQ3ZCO0VBRUQ7RUFDRSw4QkFBNkI7RUFDN0IsMEJBQW9DO0VBQ3BDLG9CQUFtQjtFQUNuQixZQUFXO0VBQ1gsZ0JBQWU7RUFDZixnQkFBZTtFQUNmLGNBQWE7RUFDYixtQkFBa0I7RUV4SWxCLG1CRnlJNkI7RUVuSTNCLFVGbUlpQztFRTlHakMsV0Y4RzBDO0VFekc1QyxhRjBHc0I7RUV6R3RCLFlGeUdzQixFQUt2QjtFQWZEO0lBYUksVUFBUyxFQUNWO0VBR0g7RUFDRSxjQUFhO0VBQ2IsdUJBQXNCO0VBQ3RCLDBCQUF5QjtFQUN6Qiw4QkFBNkI7RUFDN0IsbUJBQWtCO0VBQ2xCLFNBQVE7RUFDUiwwQkFBeUI7RUFDekIsWUFBVyxFQUtaO0VBYkQ7SUFXSSxxQkFBb0IsRUFDckI7RUFHSDtFQUNFLDBDQUF5QyxFQUMxQztFQUVEO0VBQ0UsMENBQXlDLEVBQzFDO0VBRUQ7RUFDRSw2QkFBNEI7RUFDNUIsa0JBQTJCO0VBQzNCLG1CQUFrQjtFQUNsQixnQkFBZTtFQUNmLGVBQWM7RUFDZCw2QkFBNEI7RUFDNUIsaUNBQXdCO1VBQXhCLHlCQUF3QjtFQUN4QiwwQkFBeUIsRUFDMUI7RUFFRDs7OztFQUlFIiwiZmlsZSI6InByb2plY3RzL2Zsb3ctYmFzZWQvc3JjL2xpYi9ub2RlL25vZGUuY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyJAaW1wb3J0ICcuLi91dGlscy91dGlscyc7XG5AaW1wb3J0ICcuLi91dGlscy92YXJpYWJsZXMnO1xuXG4kYm9yZGVyLXdpZHRoOiAzcHg7XG4kYm9yZGVyLWNvbG9yOiBkYXJrcmF5O1xuJGJvcmRlci13aWR0aDogM3B4O1xuJHNvY2tldC1zaXplOiAxNHB4O1xuXG46aG9zdCB7XG4gIC0taW5uZXItYm9yZGVyLWNvbG9yOiB2YXIoLS1ibG9jay1ib3JkZXItY29sb3IsICM4Njg2ODYpO1xuICAtLXNvY2tldC1zaXplOiAjeyRzb2NrZXQtc2l6ZX07XG5cbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgwLCAwLCAwLCAwLjgpO1xuICBib3JkZXItY29sb3I6IHZhcigtLWlubmVyLWJvcmRlci1jb2xvcik7XG4gIGJvcmRlci1yYWRpdXM6IDEycHg7XG4gIGJvcmRlci1zdHlsZTogc29saWQ7XG4gIGJvcmRlci13aWR0aDogJGJvcmRlci13aWR0aDtcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcblxuICBkaXNwbGF5OiBmbGV4O1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgbWluLWhlaWdodDogNTBweDtcbiAgbWluLXdpZHRoOiA3MnB4O1xuICBwYWRkaW5nOiA0cHg7XG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgdXNlci1zZWxlY3Q6IG5vbmU7XG4gIHotaW5kZXg6ICR6aW5kZXgtbm9kZTtcblxuICAuc29ja2V0cy1pbiB7XG4gICAgLnNvY2tldCB7XG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1zb2NrZXQtaW4tZGlzYWJsZWQsICNmZmYpO1xuICAgICAgYm9yZGVyLWNvbG9yOiB2YXIoLS1pbm5lci1ib3JkZXItY29sb3IpIHZhcigtLWlubmVyLWJvcmRlci1jb2xvcikgdHJhbnNwYXJlbnQgdHJhbnNwYXJlbnQ7XG4gICAgICAvLyBib3JkZXItY29sb3I6IHRyYW5zcGFyZW50IHRyYW5zcGFyZW50IHZhcigtLWlubmVyLWJvcmRlci1jb2xvcikgdmFyKC0taW5uZXItYm9yZGVyLWNvbG9yKTtcbiAgICB9XG4gIH1cblxuICAuc29ja2V0cy1vdXQge1xuICAgIC5zb2NrZXQge1xuICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tc29ja2V0LW91dC1kaXNhYmxlZCwgI2ZmZik7XG4gICAgICBib3JkZXItY29sb3I6IHRyYW5zcGFyZW50IHRyYW5zcGFyZW50IHZhcigtLWlubmVyLWJvcmRlci1jb2xvcikgdmFyKC0taW5uZXItYm9yZGVyLWNvbG9yKTtcbiAgICAgIC8vIGJvcmRlci1jb2xvcjogdmFyKC0taW5uZXItYm9yZGVyLWNvbG9yKSB2YXIoLS1pbm5lci1ib3JkZXItY29sb3IpIHRyYW5zcGFyZW50IHRyYW5zcGFyZW50O1xuICAgIH1cbiAgfVxuXG4gICY6bm90KC5pcy1mdWxsc2l6ZSkge1xuICAgIGN1cnNvcjogbW92ZTtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG5cbiAgICAuYWRkLXNvY2tldCB7XG4gICAgICBkaXNwbGF5OiBub25lO1xuICAgIH1cblxuICAgIC50aXRsZSB7XG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuMik7XG4gICAgICBjb2xvcjogI2ZmZjtcbiAgICAgIGZvbnQtc2l6ZTogMTRweDtcbiAgICAgIGhlaWdodDogMjBweDtcbiAgICAgIGxpbmUtaGVpZ2h0OiAxOXB4O1xuICAgICAgcGFkZGluZzogMCA4cHg7XG4gICAgICBwb2ludGVyLWV2ZW50czogbm9uZTtcbiAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgIHRvcDogY2FsYygxMDAlICsgNHB4KTtcbiAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWCgtNTAlKTtcbiAgICAgIEBpbmNsdWRlIGZiLXBvc2l0aW9uKGFic29sdXRlLCAwIDAgMCA1MCUpO1xuXG4gICAgICAmOjpwbGFjZWhvbGRlciB7XG4gICAgICAgIGNvbG9yOiB0cmFuc3BhcmVudDtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAmLmlzLWZ1bGxzaXplIHtcbiAgICAtLXNvY2tldC1zaXplOiAjeyRzb2NrZXQtc2l6ZSAqIDN9O1xuICAgIGhlaWdodDogMTAwJTtcbiAgICBsZWZ0OiAwICFpbXBvcnRhbnQ7XG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgIHRvcDogMCAhaW1wb3J0YW50O1xuICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlKDAsIDApO1xuICAgIHotaW5kZXg6ICR6aW5kZXgtbm9kZS1hY3RpdmU7XG4gIH1cbn1cblxuLnRpdGxlIHtcbiAgYWxpZ24tc2VsZjogY2VudGVyO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDE1MywgMTUzLCAyNTUsIDAuNCk7XG4gIGJvcmRlcjogbm9uZTtcbiAgYm9yZGVyLXJhZGl1czogOHB4O1xuICBjYXJldC1jb2xvcjogI2ZmZjtcbiAgY29sb3I6ICNmZmY7XG4gIG91dGxpbmU6IG5vbmU7XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgdHJhbnNmb3JtOiB0cmFuc2xhdGVYKC01MCUpO1xuICB3aGl0ZS1zcGFjZTogbm93cmFwO1xuICBAaW5jbHVkZSBmYi1wb3NpdGlvbihhYnNvbHV0ZSwgJHh4bC1ndXR0ZXItc2l6ZSAwIDAgNTAlKTtcblxuICAmOjpwbGFjZWhvbGRlciB7XG4gICAgY29sb3I6ICNmZmY7XG4gIH1cblxuICAmOmZvY3VzIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2IoMTUzLCAxNTMsIDI1NSk7XG4gIH1cbn1cblxuaW5wdXQudGl0bGUge1xuICBwYWRkaW5nOiA4cHg7XG4gIHdpZHRoOiA0MDBweDtcbiAgei1pbmRleDogMztcbn1cblxueHhsLWZsb3ctYmFzZWQge1xuICBAaW5jbHVkZSBmYi1wb3NpdGlvbihhYnNvbHV0ZSwgMHB4IDBweCAwcHggMHB4KTtcbn1cblxueHhsLWNvbm5lY3Rpb24tbGluZXMge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDtcbiAgcG9pbnRlci1ldmVudHM6IG5vbmU7XG4gIHotaW5kZXg6IDI7XG4gIEBpbmNsdWRlIGZiLXBvc2l0aW9uKGFic29sdXRlLCAwcHggMHB4IDBweCAwcHgpO1xuXG4gICYudG1wLWxpbmVzIHtcbiAgICB6LWluZGV4OiAxMDtcbiAgfVxuXG4gICYuaXMtZGFyayB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgwLCAwLCAwLCAwLjgpO1xuICB9XG59XG5cbi5jb21wb25lbnQge1xuICBib3JkZXItcmFkaXVzOiA4cHg7XG4gIGRpc3BsYXk6IGlubGluZS1mbGV4O1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgcGFkZGluZzogMXB4O1xuICBAaW5jbHVkZSB4eGwtc2l6ZSgxMDAlKTtcbn1cblxuLmFkZC1zb2NrZXQge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDtcbiAgYm9yZGVyOiAycHggc29saWQgcmdiKDE1MywgMTUzLCAyNTUpO1xuICBib3JkZXItcmFkaXVzOiAxMDAlO1xuICBjb2xvcjogI2ZmZjtcbiAgY3Vyc29yOiBwb2ludGVyO1xuICBmb250LXNpemU6IDIwcHg7XG4gIG91dGxpbmU6IG5vbmU7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgQGluY2x1ZGUgZmItcG9zaXRpb24oYWJzb2x1dGUsIDEwcHggMCAwIDMwcHgpO1xuICBAaW5jbHVkZSB4eGwtc2l6ZSg0MHB4KTtcblxuICAmOmFjdGl2ZSB7XG4gICAgdG9wOiAxMXB4O1xuICB9XG59XG5cbi5zb2NrZXRzIHtcbiAgZGlzcGxheTogZmxleDtcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgaGVpZ2h0OiBjYWxjKDEwMCUgLSAxMnB4KTtcbiAganVzdGlmeS1jb250ZW50OiBzcGFjZS1hcm91bmQ7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgdG9wOiA2cHg7XG4gIHdpZHRoOiB2YXIoLS1zb2NrZXQtc2l6ZSk7XG4gIHotaW5kZXg6IDMwO1xuXG4gICYuaXMtZGlzYWJsZWQge1xuICAgIHBvaW50ZXItZXZlbnRzOiBub25lO1xuICB9XG59XG5cbi5zb2NrZXRzLWluIHtcbiAgbGVmdDogY2FsYygtNHB4IC0gdmFyKC0tc29ja2V0LXNpemUpIC8gMik7XG59XG5cbi5zb2NrZXRzLW91dCB7XG4gIHJpZ2h0OiBjYWxjKDJweCAtIHZhcigtLXNvY2tldC1zaXplKSAvIDIpO1xufVxuXG4uc29ja2V0IHtcbiAgYmFja2dyb3VuZC1jbGlwOiBjb250ZW50LWJveDtcbiAgYm9yZGVyOiAkYm9yZGVyLXdpZHRoIHNvbGlkO1xuICBib3JkZXItcmFkaXVzOiA1MCU7XG4gIGN1cnNvcjogcG9pbnRlcjtcbiAgZGlzcGxheTogYmxvY2s7XG4gIGZsZXg6IDAgMCB2YXIoLS1zb2NrZXQtc2l6ZSk7XG4gIHRyYW5zZm9ybTogcm90YXRlKDQ1ZGVnKTtcbiAgd2lkdGg6IHZhcigtLXNvY2tldC1zaXplKTtcbn1cblxuLypcbjpob3N0LWNvbnRleHQoLmlzLW1heCkge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiBibHVlO1xufVxuKi9cbiIsIiR4eGwtZ3V0dGVyLXNpemU6IDE2cHg7XG4vLyB6LWluZGljZXNcbiR6aW5kZXgtbm9kZTogMTA7XG4kemluZGV4LW5vZGUtYWN0aXZlOiAyMDtcblxuJHh4bC1hZGQtc29ja2V0LWZvcm06IDEwO1xuJGFjdGl2ZS1jb2xvcjogI2ZhMDtcbiRhY2NlcHQtY29sb3I6ICNiYWRhNTU7XG4kcmVqZWN0LWNvbG9yOiAjZjA2O1xuIiwiQG1peGluIGZiLXBvc2l0aW9uKCRwb3NpdGlvbjogcmVsYXRpdmUsICRjb29yZGluYXRlczogMCAwIDAgMCkge1xuICBAaWYgdHlwZS1vZigkcG9zaXRpb24pID09IGxpc3Qge1xuICAgICRjb29yZGluYXRlczogJHBvc2l0aW9uO1xuICAgICRwb3NpdGlvbjogcmVsYXRpdmU7XG4gIH1cblxuICAkdG9wOiBudGgoJGNvb3JkaW5hdGVzLCAxKTtcbiAgJHJpZ2h0OiBudGgoJGNvb3JkaW5hdGVzLCAyKTtcbiAgJGJvdHRvbTogbnRoKCRjb29yZGluYXRlcywgMyk7XG4gICRsZWZ0OiBudGgoJGNvb3JkaW5hdGVzLCA0KTtcblxuICBwb3NpdGlvbjogJHBvc2l0aW9uO1xuXG4gIC8vIFRvcFxuICBAaWYgJHRvcCA9PSBhdXRvIHtcbiAgICB0b3A6ICR0b3A7XG4gIH0gQGVsc2UgaWYgbm90KHVuaXRsZXNzKCR0b3ApKSB7XG4gICAgdG9wOiAkdG9wO1xuICB9XG5cbiAgLy8gUmlnaHRcbiAgQGlmICRyaWdodCA9PSBhdXRvIHtcbiAgICByaWdodDogJHJpZ2h0O1xuICB9IEBlbHNlIGlmIG5vdCh1bml0bGVzcygkcmlnaHQpKSB7XG4gICAgcmlnaHQ6ICRyaWdodDtcbiAgfVxuXG4gIC8vIEJvdHRvbVxuICBAaWYgJGJvdHRvbSA9PSBhdXRvIHtcbiAgICBib3R0b206ICRib3R0b207XG4gIH0gQGVsc2UgaWYgbm90KHVuaXRsZXNzKCRib3R0b20pKSB7XG4gICAgYm90dG9tOiAkYm90dG9tO1xuICB9XG5cbiAgLy8gTGVmdFxuICBAaWYgJGxlZnQgPT0gYXV0byB7XG4gICAgbGVmdDogJGxlZnQ7XG4gIH0gQGVsc2UgaWYgbm90KHVuaXRsZXNzKCRsZWZ0KSkge1xuICAgIGxlZnQ6ICRsZWZ0O1xuICB9XG59XG5cbkBtaXhpbiB4eGwtc2l6ZSgkd2lkdGgsICRoZWlnaHQ6ICR3aWR0aCkge1xuICBoZWlnaHQ6ICRoZWlnaHQ7XG4gIHdpZHRoOiAkd2lkdGg7XG59XG4iXX0= */\"","import {\n  AfterViewInit,\n  ChangeDetectorRef,\n  Component, ElementRef,\n  EventEmitter,\n  HostBinding, HostListener,\n  Input,\n  OnChanges, OnDestroy,\n  OnInit, Output, QueryList,\n  ViewChild, ViewChildren,\n} from '@angular/core';\nimport { DynamicComponentDirective } from '../dynamic-component.directive';\nimport { FlowBasedService } from '../flow-based.service';\nimport { XxlSocket, FbNodeState } from '../flow-based';\nimport { MovableDirective } from '../drag-drop/movable/movable.directive';\nimport { NodeService } from './node-service';\nimport { SocketService } from '../socket.service';\nimport { SocketComponent } from '../socket/socket.component';\nimport { Subscription } from 'rxjs';\n\ndeclare global {\n  interface Window {\n    ResizeObserver: any;\n  }\n}\n\n@Component({\n  selector: 'fb-node',\n  templateUrl: './node.component.html',\n  styleUrls: ['./node.component.scss'],\n  // changeDetection: ChangeDetectionStrategy.OnPush,\n  // viewProviders: [Flowservice]\n  providers: [NodeService]\n  // viewProviders: [{\n  //   provide: XXL_FLOW_UNIT_SERVICE, useClass: XxlFlowservice\n  // }]\n})\nexport class NodeComponent implements OnInit, OnInit, AfterViewInit, OnDestroy {\n  @Input() state: FbNodeState;\n  @Input() scope: number;\n  @HostBinding('class.is-fullsize') isFullSize = false;\n\n  @Output() socketClick = new EventEmitter<XxlSocket>();\n  @Output() updated = new EventEmitter<void>();\n  @ViewChild(DynamicComponentDirective) ref: DynamicComponentDirective<any>;\n  @ViewChildren(SocketComponent) sockRefs: QueryList<SocketComponent>;\n\n  private observer;\n  private posChangedSub: Subscription;\n  public isLabel = true;\n\n  constructor(private viewRef: ChangeDetectorRef,\n              private element: ElementRef,\n              private cdr: ChangeDetectorRef,\n              private flowService: FlowBasedService,\n              public service: NodeService,\n              public socketService: SocketService,\n              private movable: MovableDirective) {\n  }\n\n  ngOnInit(): void {\n    this.service.connectNode(this, this.state);\n\n    this.posChangedSub = this.movable.positionChange.subscribe(() => {\n      this.socketService.clearPosition(this.id);\n      this.flowService.nodeMoved(this.id);\n    });\n\n    this.observer = new window.ResizeObserver(() => {\n      // TODO\n      // this.wrapper.update();\n      // this.flowService.updateConnection();\n    });\n    this.observer.observe(this.element.nativeElement);\n  }\n\n  @HostListener('noDrag', ['$event'])\n  onClick(e: PointerEvent): void {\n    this.service.nodeIsClicked(e);\n  }\n\n  getScope(): number {\n    return this.isFullSize ? this.id : this.scope;\n  }\n\n  isInverted(): boolean {\n    return this.isFullSize && this.isFlow();\n  }\n\n  ngAfterViewInit(): void {\n    this.sockRefs.changes.subscribe(() => {\n      this.service.calibrate();\n    });\n  }\n\n  ngOnDestroy(): void {\n    this.posChangedSub.unsubscribe();\n    this.service.unregisterAll();\n  }\n\n  setMaxSize(isMax): void {\n    this.isFullSize = isMax;\n    this.cdr.markForCheck();\n  }\n\n  connectionsUpdated(): void {\n    this.cdr.detectChanges();\n  }\n\n  get sockets(): XxlSocket[] {\n    return this.state.sockets || [];\n  }\n\n  set sockets(sockets: XxlSocket[]) {\n    this.state.sockets = sockets;\n  }\n\n  isFlow(): boolean {\n    return !!this.state.children;\n  }\n\n  get id(): number {\n    return this.state.id!;\n  }\n\n  socketAdded(): void {\n    this.cdr.detectChanges();\n  }\n\n  repaintConnections(): void {\n    this.cdr.detectChanges();\n  }\n\n  hideLabel(): void {\n    this.isLabel = false;\n  }\n\n  showLabel(): void {\n    this.isLabel = true;\n  }\n}\n","import { Pipe, PipeTransform } from '@angular/core';\nimport { XxlSocketBuilderService } from '../socket-builder.service';\nimport { XxlSocket } from '../flow-based';\n\n@Pipe({\n  name: 'socketIn'\n})\nexport class SocketInPipe implements PipeTransform {\n\n  transform(sockets: XxlSocket[]): XxlSocket[] {\n    const result = sockets.filter(socket => socket.type === XxlSocketBuilderService.SOCKET_IN);\n\n    return result;\n  }\n\n}\n","import { Pipe, PipeTransform } from '@angular/core';\nimport { XxlSocketBuilderService } from '../socket-builder.service';\nimport { XxlSocket } from '../flow-based';\n\n@Pipe({\n  name: 'socketOut'\n})\nexport class SocketOutPipe implements PipeTransform {\n  transform(sockets: XxlSocket[]): XxlSocket[] {\n    return sockets.filter(socket => socket.type === XxlSocketBuilderService.SOCKET_OUT);\n  }\n}\n","import { Injectable } from '@angular/core';\n\n@Injectable()\nexport class FlowBasedManagerService {\n\n  constructor() { }\n\n}\n","import { Injectable } from '@angular/core';\nimport { XxlSocket, XxlSocketType } from './flow-based';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class XxlSocketBuilderService {\n  static SOCKET_IN = 'in' as XxlSocketType;\n  static SOCKET_OUT = 'out' as XxlSocketType;\n\n  constructor() { }\n\n  static create(type: XxlSocketType): XxlSocket {\n    return {\n      type,\n      id: Date.now()\n    } as XxlSocket;\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { FbKeyValues, SocketDetails, XxlSocketEvent } from './flow-based';\nimport { Subject } from 'rxjs';\n\n@Injectable({providedIn: 'root'})\nexport class SocketService {\n  private socketClicked = new Subject<XxlSocketEvent | null>();\n  public socketClicked$ = this.socketClicked.asObservable();\n\n  public sockets: FbKeyValues<SocketDetails> = {};\n  private lastEvent: XxlSocketEvent | null;\n\n  constructor() {\n  }\n\n  onSocketClick(event: XxlSocketEvent | null): void {\n    this.lastEvent = event;\n    this.socketClicked.next(event);\n  }\n\n  outsideClick(): void {\n    if (!!this.lastEvent) {\n      this.socketClicked.next(null);\n    }\n\n    this.lastEvent = null;\n  }\n\n  addSocket(id: number, sd: SocketDetails): void {\n    this.sockets[id] = sd;\n  }\n\n  getSocket(id: number): SocketDetails {\n    return this.sockets[id];\n  }\n\n  clearPosition(id?: number): void {\n    Object.keys(this.sockets).map(k => this.sockets[k])\n      .filter((s: SocketDetails) => !id || s.parentId === id)\n      .forEach(s => {\n        s.comp.resetPosition();\n      });\n  }\n\n  reset(): void {\n    this.sockets = {};\n  }\n}\n\n\n","module.exports = \"\"","module.exports = \":host {\\n  background-clip: content-box;\\n  background-color: var(--socket-in-disabled, #fff);\\n  border: 3px solid;\\n  border-radius: 50%;\\n  cursor: pointer;\\n  display: block;\\n  flex: 0 0 var(--socket-size);\\n  -webkit-transform: rotate(45deg);\\n          transform: rotate(45deg);\\n  width: var(--socket-size); }\\n  :host.socket-in {\\n    border-color: var(--inner-border-color) var(--inner-border-color) transparent transparent;\\n    left: calc(-4px - var(--socket-size) / 2); }\\n  :host.socket-out {\\n    border-color: transparent transparent var(--inner-border-color) var(--inner-border-color);\\n    right: calc(2px - var(--socket-size) / 2); }\\n  :host.is-accepting {\\n    background-color: #bada55; }\\n  :host.is-accepting:hover {\\n      background-color: #fa0; }\\n  :host.is-disabled {\\n    background-color: #f06;\\n    pointer-events: none; }\\n  :host.is-active {\\n    background-color: #fa0; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9sdWNhc2NhbGplL1dlYnN0b3JtUHJvamVjdHMvZmxvdy1iYXNlZC9wcm9qZWN0cy9mbG93LWJhc2VkL3NyYy9saWIvc29ja2V0L3NvY2tldC5jb21wb25lbnQuc2NzcyIsIi9Vc2Vycy9sdWNhc2NhbGplL1dlYnN0b3JtUHJvamVjdHMvZmxvdy1iYXNlZC9wcm9qZWN0cy9mbG93LWJhc2VkL3NyYy9saWIvdXRpbHMvX3ZhcmlhYmxlcy5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQVFBO0VBQ0UsNkJBQTRCO0VBQzVCLGtEQUFpRDtFQUNqRCxrQkFBMkI7RUFDM0IsbUJBQWtCO0VBQ2xCLGdCQUFlO0VBQ2YsZUFBYztFQUNkLDZCQUE0QjtFQUM1QixpQ0FBd0I7VUFBeEIseUJBQXdCO0VBQ3hCLDBCQUF5QixFQTRCMUI7RUFyQ0Q7SUFZSSwwRkFBeUY7SUFDekYsMENBQXlDLEVBQzFDO0VBZEg7SUFpQkksMEZBQXlGO0lBQ3pGLDBDQUF5QyxFQUMxQztFQW5CSDtJQXNCSSwwQkN2QmtCLEVENEJuQjtFQTNCSDtNQXlCTSx1QkMzQmEsRUQ0QmQ7RUExQkw7SUE4QkksdUJDOUJlO0lEK0JmLHFCQUFvQixFQUNyQjtFQWhDSDtJQW1DSSx1QkNyQ2UsRURzQ2hCIiwiZmlsZSI6InByb2plY3RzL2Zsb3ctYmFzZWQvc3JjL2xpYi9zb2NrZXQvc29ja2V0LmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiQGltcG9ydCAnLi4vdXRpbHMvdXRpbHMnO1xuQGltcG9ydCAnLi4vdXRpbHMvdmFyaWFibGVzJztcblxuJGJvcmRlci13aWR0aDogM3B4O1xuJGJvcmRlci1jb2xvcjogZGFya3JheTtcbiRib3JkZXItd2lkdGg6IDNweDtcbiRzb2NrZXQtc2l6ZTogMTRweDtcblxuOmhvc3Qge1xuICBiYWNrZ3JvdW5kLWNsaXA6IGNvbnRlbnQtYm94O1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1zb2NrZXQtaW4tZGlzYWJsZWQsICNmZmYpO1xuICBib3JkZXI6ICRib3JkZXItd2lkdGggc29saWQ7XG4gIGJvcmRlci1yYWRpdXM6IDUwJTtcbiAgY3Vyc29yOiBwb2ludGVyO1xuICBkaXNwbGF5OiBibG9jaztcbiAgZmxleDogMCAwIHZhcigtLXNvY2tldC1zaXplKTtcbiAgdHJhbnNmb3JtOiByb3RhdGUoNDVkZWcpO1xuICB3aWR0aDogdmFyKC0tc29ja2V0LXNpemUpO1xuXG4gICYuc29ja2V0LWluIHtcbiAgICBib3JkZXItY29sb3I6IHZhcigtLWlubmVyLWJvcmRlci1jb2xvcikgdmFyKC0taW5uZXItYm9yZGVyLWNvbG9yKSB0cmFuc3BhcmVudCB0cmFuc3BhcmVudDtcbiAgICBsZWZ0OiBjYWxjKC00cHggLSB2YXIoLS1zb2NrZXQtc2l6ZSkgLyAyKTtcbiAgfVxuXG4gICYuc29ja2V0LW91dCB7XG4gICAgYm9yZGVyLWNvbG9yOiB0cmFuc3BhcmVudCB0cmFuc3BhcmVudCB2YXIoLS1pbm5lci1ib3JkZXItY29sb3IpIHZhcigtLWlubmVyLWJvcmRlci1jb2xvcik7XG4gICAgcmlnaHQ6IGNhbGMoMnB4IC0gdmFyKC0tc29ja2V0LXNpemUpIC8gMik7XG4gIH1cblxuICAmLmlzLWFjY2VwdGluZyB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogJGFjY2VwdC1jb2xvcjtcblxuICAgICY6aG92ZXIge1xuICAgICAgYmFja2dyb3VuZC1jb2xvcjogJGFjdGl2ZS1jb2xvcjtcbiAgICB9XG4gIH1cblxuICAmLmlzLWRpc2FibGVkIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAkcmVqZWN0LWNvbG9yO1xuICAgIHBvaW50ZXItZXZlbnRzOiBub25lO1xuICB9XG5cbiAgJi5pcy1hY3RpdmUge1xuICAgIGJhY2tncm91bmQtY29sb3I6ICRhY3RpdmUtY29sb3I7XG4gIH1cbn1cbiIsIiR4eGwtZ3V0dGVyLXNpemU6IDE2cHg7XG4vLyB6LWluZGljZXNcbiR6aW5kZXgtbm9kZTogMTA7XG4kemluZGV4LW5vZGUtYWN0aXZlOiAyMDtcblxuJHh4bC1hZGQtc29ja2V0LWZvcm06IDEwO1xuJGFjdGl2ZS1jb2xvcjogI2ZhMDtcbiRhY2NlcHQtY29sb3I6ICNiYWRhNTU7XG4kcmVqZWN0LWNvbG9yOiAjZjA2O1xuIl19 */\"","import {\n  AfterViewInit,\n  ChangeDetectionStrategy,\n  Component,\n  ElementRef,\n  EventEmitter,\n  HostBinding,\n  HostListener,\n  Input, OnDestroy, Output\n} from '@angular/core';\nimport { XxlPosition, XxlSocket, XxlSocketEvent } from '../flow-based';\nimport { Subscription } from 'rxjs';\nimport { NodeService } from '../node/node-service';\nimport { SocketService } from '../socket.service';\n\n@Component({\n  selector: 'xxl-socket',\n  templateUrl: './socket.component.html',\n  styleUrls: ['./socket.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class SocketComponent implements OnDestroy, AfterViewInit {\n  @Input() state: XxlSocket;\n  @Input() scope: number;\n  @Input() invert: boolean;\n  @Input() parent: number;\n  @Output() clicked = new EventEmitter<XxlSocketEvent>();\n  private subscription: Subscription;\n  private _position: XxlPosition | null;\n  private hover = false;\n  private hoverTimeoutId: number;\n\n  @HostBinding('class.is-active') active = false;\n  @HostBinding('class.is-accepting') isAccepting: boolean | null;\n\n  @HostBinding('class.is-disabled')\n  get isDisabled(): boolean {\n    return this.isAccepting === false;\n  }\n\n  @HostBinding('class')\n  get socketClass(): string {\n    return 'socket-' + (this.state ? this.getType() : '');\n  }\n\n  get position(): XxlPosition {\n    if (!this._position) {\n      const rect = this.element.nativeElement.getBoundingClientRect();\n\n      this._position = {x: rect.left + rect.width / 2, y: rect.top + rect.height / 2};\n    }\n\n    return this._position;\n  }\n\n  constructor(public element: ElementRef,\n              private nodeService: NodeService,\n              private service: SocketService) {\n  }\n\n  resetPosition(): void {\n    this._position = null;\n  }\n\n  ngAfterViewInit(): void {\n    this.service.addSocket(this.id, {\n      state: this.state,\n      element: this.element.nativeElement,\n      comp: this,\n      parentId: this.parent,\n      scope: this.scope\n    });\n\n    this.subscription = this.service.socketClicked$.subscribe((event: XxlSocketEvent) => {\n      this.active = false;\n      this.isAccepting = null;\n\n      if (event && this.scope === event.scope) {\n        if (event.socket.id === this.state.id) {\n          this.active = true;\n        } else if (event.socket.type === this.getType() || event.parentId === this.nodeService.id) {\n          this.isAccepting = false;\n        } else {\n          this.isAccepting = !this.state.format || !event.socket.format || this.state.format === event.socket.format;\n        }\n      }\n    });\n  }\n\n  getType(): string {\n    return this.invert ? (this.state.type === 'in' ? 'out' : 'in') : this.state.type;\n  }\n\n  ngOnDestroy(): void {\n    this.subscription.unsubscribe();\n  }\n\n  @HostListener('pointerdown', ['$event'])\n  onPointerDown(event: PointerEvent): void {\n    event.stopPropagation();\n    clearTimeout(this.hoverTimeoutId);\n\n    this.service.onSocketClick({\n      event,\n      socket: Object.assign({}, this.state, {type: this.getType()}),\n      scope: this.scope,\n      parentId: this.nodeService.id});\n\n  }\n\n  @HostListener('mouseenter', ['$event'])\n  @HostListener('mouseleave', ['$event'])\n  onMouseEnter(event): void {\n    this.hover = event.type === 'mouseenter';\n  }\n\n  @HostListener('mousemove', ['$event'])\n  onMouseMove(event): void {\n    clearTimeout(this.hoverTimeoutId);\n    //\n    // this.hoverTimeoutId = setTimeout(() => {\n    //   alert('x');\n    // }, 1000);\n  }\n\n  get id(): number {\n    return this.state.id!;\n  }\n}\n","export function deepClone(obj = {}) {\n  const newObj = {};\n\n  if (typeof obj === 'object') {\n    for (const key of Object.keys(obj)) {\n      const property = obj[key],\n        type = typeof property;\n      switch (type) {\n        case 'object':\n          if (Object.prototype.toString.call(property) === '[object Array]') {\n            newObj[key] = [];\n            for (const item of property) {\n              newObj[key].push(this.deepclone(item));\n            }\n          } else {\n            newObj[key] = deepClone(property);\n          }\n          break;\n        default:\n          newObj[key] = property;\n          break;\n\n      }\n    }\n    return newObj;\n  } else {\n    return obj;\n  }\n}\n","import { Observable, Subject, Subscription } from 'rxjs';\nimport { FbKeyValues, XxlConnection, XxlSocket, FbNodeWorker, FbNodeState } from '../flow-based';\n\nexport class FlowWorker implements FbNodeWorker {\n  private subjects: { [key: number]: Subject<any> } = {};\n  private subscriptions: { [key: number]: Subscription } = {};\n\n  constructor(private state: FbNodeState) {\n  }\n\n  setStream(stream: Observable<any>, socket: XxlSocket, connection: XxlConnection): void {\n    const id = connection.to === this.state.id ? connection.in : connection.out;\n\n    this.subscriptions[id!] = stream.subscribe(val => {\n      this.getSubject(id!).next(val);\n    });\n  }\n\n  destroy(): void {\n    // TODO\n    console.log('FlowWorker: destroy');\n  }\n\n  getStream(socket: XxlSocket): Observable<any> {\n    return this.getSubject(socket.id!).asObservable();\n  }\n\n  getSubject(socketId: number): Subject<any> {\n    if (!this.subjects[socketId]) {\n      this.subjects[socketId] = new Subject<any>();\n    }\n\n    return this.subjects[socketId];\n  }\n\n  removeStream(connection: XxlConnection): void {\n    const id = connection.to === this.state.id ? connection.in : connection.out;\n\n    if (this.subscriptions[id!]) { // TODO: Is if needed\n      this.subscriptions[id!].unsubscribe();\n    }\n  }\n\n  /*\n  A Socket always has one format\n  Update socket type based on remote socket.\n   */\n  // connected(conn: XxlConnection, localSocket: XxlSocket, remoteSocket: XxlSocket, sockets: FbKeyValues<XxlSocket>): boolean {\n  //   if (remoteSocket.format && remoteSocket.format !== localSocket.format) {\n  //     localSocket.format = remoteSocket.format;\n  //     return true;\n  //   }\n  //\n  //   return false;\n  // }\n}\n","import {\n  FbKeyValues,\n  XxlConnection,\n  FbNodeType,\n  FbNodeWorker,\n  FbNodeHelpers,\n  FbNodeState, XxlSocket\n} from '../flow-based';\nimport { FlowWorker } from './flow-worker';\n\ninterface Node {\n  state: FbNodeState;\n  parentId: number | null;\n}\n\ninterface NodeConnection {\n  connection: XxlConnection;\n  state: FbNodeState;\n}\n\nexport class Flow {\n  private workers: FbKeyValues<FbNodeWorker> = {};\n  private state: FbNodeState;\n  private nodes: FbKeyValues<Node> = {};\n  private connections: FbKeyValues<NodeConnection> = {};\n  private sockets: FbKeyValues<number> = {};\n  private uniqueIdCount = 0;\n\n  constructor(private flowTypes: FbNodeType,\n              private helpers?: FbNodeHelpers) {\n  }\n\n  initialize(flow: FbNodeState): Flow {\n    this.state = flow;\n    this.nodes[flow.id!] = {state: flow, parentId: null};\n\n    const connections = flow.connections!,\n      children = flow.children!;\n\n    connections.forEach(c => this.connections[c.id] = {state: flow, connection: c});\n    this.createVirtualFlow(children, flow.id!);\n\n    let count = 0;\n    while (this.connectNodes() && ++count < 100) {\n    }\n    if (count === 100) {\n      console.warn('Connecting all nodes failed');\n    }\n\n    Object.keys(this.connections).forEach(key => {\n      this.connectWorkers(this.connections[key].connection);\n    });\n\n    return this;\n  }\n\n  getWorker(id: number): FbNodeWorker {\n    return this.workers[id];\n  }\n\n  addConnection(state: FbNodeState, connection: XxlConnection): void {\n    state.connections = [connection, ...state.connections!];\n    this.connections[connection.id] = {connection, state};\n    this.connectWorkers(connection);\n\n    if (this.connect(connection)) {\n      this.rebuildNodeConnections();\n    }\n  }\n\n  private rebuildNodeConnections(): void {\n    Object.keys(this.nodes).forEach(key => {\n      const node = this.nodes[key].state;\n\n      if (node.sockets) {\n        if (node.children) {\n          node.sockets.forEach(s => s.format = null);\n        } else if (this.helpers) {\n          this.helpers.resetSockets(node);\n        }\n      }\n    });\n\n    let count = 0;\n    while (this.connectNodes() && ++count < 100) {\n    }\n\n    if (count === 100) {\n      console.warn('Connecting all nodes failed');\n    }\n  }\n\n  removeConnection(connection: XxlConnection, state: FbNodeState, doRebuild = true): void {\n    const worker = this.workers[connection.to as number];\n    if (worker && worker.removeStream) {\n      worker.removeStream(connection);\n    }\n\n    delete this.connections[connection.id];\n    state.connections = state.connections!.filter(c => c.id !== connection.id);\n    if (doRebuild) {\n      this.rebuildNodeConnections();\n    }\n  }\n\n  removeSocket(socket: XxlSocket, doRebuild = true): void {\n    const nodeId = this.sockets[socket.id!],\n      node = this.getNode(nodeId);\n\n    node.state.sockets = node.state.sockets!.filter(s => s.id !== socket.id);\n\n    const keys = Object.keys(this.connections);\n    for (let i = keys.length - 1; i >= 0; i--) {\n      const key = keys[i],\n            connection = this.connections[key].connection;\n\n      if (connection.in === socket.id || connection.out === socket.id) {\n        this.connections[key].state.connections =\n          this.connections[key].state.connections.filter(item => item.id !== connection.id);\n        delete this.connections[key];\n        this.workers[connection.to as number].removeStream(connection);\n      }\n    }\n\n    if (doRebuild) {\n      this.rebuildNodeConnections();\n    }\n  }\n\n  addNode(nodeState: FbNodeState, flowState: FbNodeState): void {\n    this.createWorker(nodeState);\n    flowState.children = [...flowState.children!, nodeState];\n    this.nodes[nodeState.id!] = {state: nodeState, parentId: flowState.id!};\n    (nodeState.sockets || []).forEach(s => this.addSocket(s, nodeState.id!));\n  }\n\n  removeNode(id: number, doRebuild = true): void {\n    const node = this.getNode(id);\n    const parentNode = this.getNode(node.parentId!);\n\n    if (node.state.children) {\n      for (let i = node.state.children.length - 1; i >= 0; i--) {\n        this.removeNode(node.state.children[i].id!, false);\n      }\n    }\n\n    parentNode.state.children = parentNode.state.children!.filter(child => child.id !== id);\n    delete this.nodes[id];\n\n    parentNode.state.connections!.forEach((c: XxlConnection) => {\n      if (c.from === id || c.to === id) {\n        this.removeConnection(c, parentNode.state, false);\n      }\n    });\n\n    if (doRebuild) {\n      this.rebuildNodeConnections();\n    }\n  }\n\n  destroy(): void {\n    Object.keys(this.workers).forEach(k => this.workers[k].destroy());\n  }\n\n  getNode(id: number): Node {\n    return this.nodes[id];\n  }\n\n  getSocket(id: number): XxlSocket {\n    const node = this.getNode(this.sockets[id]);\n\n    return node!.state.sockets!.filter(s => s.id === id)[0];\n  }\n\n  addSocket(socket: XxlSocket, nodeId: number): void {\n    const state = this.getNode(nodeId).state;\n\n    if (!socket.id) {\n      socket.id = this.uniqueId;\n      state.sockets = [socket, ...state.sockets!];\n    }\n\n    this.sockets[socket.id!] = nodeId;\n  }\n\n  private createVirtualFlow(nodes: FbNodeState[], parentId: number) {\n    nodes.forEach(node => {\n      this.nodes[node.id!] = {state: node, parentId};\n      if (node.sockets) {\n        node.sockets.forEach(s => this.sockets[s.id!] = node.id!);\n      }\n\n      this.createWorker(node);\n      if (node.connections) {\n        node.connections.forEach(c => this.connections[c.id] = {connection: c, state: node});\n\n        this.createVirtualFlow(node.children!, node.id!);\n      }\n    });\n  }\n\n  private connectNodes(): boolean {\n    const keys = Object.keys(this.connections);\n\n    for (let i = 0; i < keys.length; i++) {\n      const c = this.connections[keys[i]].connection;\n\n      if (this.connect(c)) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  private connect(connection: XxlConnection): boolean {\n    const from = this.getNode(connection.from as number),\n      to = this.getNode(connection.to as number),\n      outSocket = this.getSocket(connection.out as number),\n      inSocket = this.getSocket(connection.in as number);\n\n    if (from.state.children && !outSocket.format) {\n      outSocket.format = inSocket.format;\n      return !!outSocket.format;\n\n    } else if (to.state.children && !inSocket.format) {\n      inSocket.format = outSocket.format;\n      return !!outSocket.format;\n    }\n\n    let isChanged = false; // TODO: Is default false?\n    if (this.helpers) {\n      isChanged = this.helpers.connect(outSocket, inSocket, from.state, to.state);\n    }\n\n    return isChanged;\n  }\n\n  get uniqueId(): number {\n    return Date.now() + ++this.uniqueIdCount;\n  }\n\n  private createWorker(state: FbNodeState): void {\n    const {worker} = this.flowTypes[state.type],\n      id = state.id!;\n\n    if (worker) {\n      this.workers[id] = new worker(state.config, state.sockets);\n    } else if (this.flowTypes[state.type].settings.isFlow) {\n      this.workers[id] = new FlowWorker(state);\n    }\n  }\n\n  private connectWorkers(connection: XxlConnection): void {\n    const fromWorker = this.getWorker(connection.from as number);\n    const toWorker = this.getWorker(connection.to as number);\n\n    if (toWorker && fromWorker) {\n      const stream = fromWorker.getStream(this.getSocket(connection!.out!))!;\n\n      toWorker.setStream(stream, this.getSocket(connection.in!), connection);\n    }\n  }\n}\n","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./src/$$_lazy_route_resource lazy recursive\";","module.exports = \"<mat-toolbar [color]=\\\"'primary'\\\">\\n  <span>Flow based programming</span>\\n  <div class=\\\"button-wrapper\\\">\\n    <button mat-button (click)=\\\"openModal()\\\" class=\\\"add\\\">Add</button>\\n    <button mat-button (click)=\\\"showJSON()\\\" class=\\\"btn btn-primary json\\\" class=\\\"json\\\">{{showJson ? 'Flow' :\\n      'JSON'}}\\n    </button>\\n  </div>\\n</mat-toolbar>\\n\\n<main>\\n  <fb-flow *ngIf=\\\"!showJson\\\" [flow]=\\\"flow\\\"></fb-flow>\\n\\n  <article *ngIf=\\\"showJson\\\" class=\\\"flow-as-json\\\">\\n    <pre>{{flow | json}}</pre>\\n  </article>\\n</main>\\n\\n\"","module.exports = \":host {\\n  display: flex;\\n  flex-direction: column;\\n  height: 100%;\\n  overflow: hidden;\\n  position: relative;\\n  z-index: 100; }\\n\\nmat-toolbar {\\n  display: flex;\\n  height: 64px;\\n  justify-content: center;\\n  -webkit-user-select: none;\\n     -moz-user-select: none;\\n      -ms-user-select: none;\\n          user-select: none; }\\n\\nmat-toolbar .button-wrapper {\\n    left: var(--fb-gutter-size);\\n    position: absolute; }\\n\\nmat-toolbar .button-wrapper button + button {\\n      margin-left: var(--fb-gutter-size); }\\n\\n.bg {\\n  display: block;\\n  -webkit-filter: brightness(20%);\\n          filter: brightness(20%);\\n  z-index: -2;\\n  position: absolute;\\n  top: 0px;\\n  right: 0px;\\n  bottom: 0px;\\n  left: 0px;\\n  height: 100%;\\n  width: 100%; }\\n\\nfb-thunder {\\n  -webkit-filter: blur(2px);\\n          filter: blur(2px);\\n  z-index: -1;\\n  position: absolute;\\n  top: 0px;\\n  right: 0px;\\n  bottom: 0px;\\n  left: 0px; }\\n\\nmain {\\n  display: flex;\\n  flex: 1; }\\n\\nmain xxl-flow-based {\\n    border-radius: 3px; }\\n\\nmain .flow-as-json {\\n    background-color: #fff;\\n    display: block;\\n    flex: 1;\\n    overflow: auto; }\\n\\nmain .flow-as-json pre {\\n      background-color: #fff;\\n      border: 1px solid #898989;\\n      padding: 20px; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9sdWNhc2NhbGplL1dlYnN0b3JtUHJvamVjdHMvZmxvdy1iYXNlZC9zcmMvYXBwL2FwcC5jb21wb25lbnQuc2NzcyIsIi9Vc2Vycy9sdWNhc2NhbGplL1dlYnN0b3JtUHJvamVjdHMvZmxvdy1iYXNlZC9wcm9qZWN0cy9mbG93LWJhc2VkL3NyYy9saWIvdXRpbHMvX3V0aWxzLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBRUE7RUFDRSxjQUFhO0VBQ2IsdUJBQXNCO0VBQ3RCLGFBQVk7RUFDWixpQkFBZ0I7RUFDaEIsbUJBQWtCO0VBQ2xCLGFBQVksRUFDYjs7QUFFRDtFQUNFLGNBQWE7RUFDYixhQUFZO0VBQ1osd0JBQXVCO0VBQ3ZCLDBCQUFpQjtLQUFqQix1QkFBaUI7TUFBakIsc0JBQWlCO1VBQWpCLGtCQUFpQixFQVVsQjs7QUFkRDtJQU9JLDRCQUEyQjtJQUMzQixtQkFBa0IsRUFLbkI7O0FBYkg7TUFXTSxtQ0FBa0MsRUFDbkM7O0FBSUw7RUFDRSxlQUFjO0VBRWQsZ0NBQXVCO1VBQXZCLHdCQUF1QjtFQUN2QixZQUFXO0VDcEJYLG1CRHFCNkI7RUNmM0IsU0RlZ0M7RUNSaEMsV0RRb0M7RUNEcEMsWURDd0M7RUNNeEMsVURONEM7RUNXOUMsYURWc0I7RUNXdEIsWURYc0IsRUFDdkI7O0FBRUQ7RUFDRSwwQkFBaUI7VUFBakIsa0JBQWlCO0VBQ2pCLFlBQVc7RUMzQlgsbUJENEI2QjtFQ3RCM0IsU0RzQmdDO0VDZmhDLFdEZW9DO0VDUnBDLFlEUXdDO0VDRHhDLFVEQzRDLEVBQy9DOztBQXdCRDtFQUNFLGNBQWE7RUFDYixRQUFPLEVBbUJSOztBQXJCRDtJQU1JLG1CQUFrQixFQUNuQjs7QUFQSDtJQVVJLHVCQUFzQjtJQUN0QixlQUFjO0lBQ2QsUUFBTztJQUNQLGVBQWMsRUFPZjs7QUFwQkg7TUFnQk0sdUJBQXNCO01BQ3RCLDBCQUF5QjtNQUN6QixjQUFhLEVBQ2QiLCJmaWxlIjoic3JjL2FwcC9hcHAuY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyJAaW1wb3J0ICd1dGlscy91dGlscyc7XG5cbjpob3N0IHtcbiAgZGlzcGxheTogZmxleDtcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgaGVpZ2h0OiAxMDAlO1xuICBvdmVyZmxvdzogaGlkZGVuO1xuICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gIHotaW5kZXg6IDEwMDtcbn1cblxubWF0LXRvb2xiYXIge1xuICBkaXNwbGF5OiBmbGV4O1xuICBoZWlnaHQ6IDY0cHg7XG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICB1c2VyLXNlbGVjdDogbm9uZTtcblxuICAuYnV0dG9uLXdyYXBwZXIge1xuICAgIGxlZnQ6IHZhcigtLWZiLWd1dHRlci1zaXplKTtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG5cbiAgICBidXR0b24gKyBidXR0b24ge1xuICAgICAgbWFyZ2luLWxlZnQ6IHZhcigtLWZiLWd1dHRlci1zaXplKTtcbiAgICB9XG4gIH1cbn1cblxuLmJnIHtcbiAgZGlzcGxheTogYmxvY2s7XG4gIC8vZmlsdGVyOiBibHVyKDVweCk7XG4gIGZpbHRlcjogYnJpZ2h0bmVzcygyMCUpO1xuICB6LWluZGV4OiAtMjtcbiAgQGluY2x1ZGUgZmItcG9zaXRpb24oYWJzb2x1dGUsIDBweCAwcHggMHB4IDBweCk7XG4gIEBpbmNsdWRlIHh4bC1zaXplKDEwMCUpO1xufVxuXG5mYi10aHVuZGVyIHtcbiAgZmlsdGVyOiBibHVyKDJweCk7XG4gIHotaW5kZXg6IC0xO1xuICBAaW5jbHVkZSBmYi1wb3NpdGlvbihhYnNvbHV0ZSwgMHB4IDBweCAwcHggMHB4KTtcbn1cblxuLy9oZWFkZXIge1xuLy8gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4vLyAgYmFja2dyb3VuZC1jb2xvcjogIzBkMDI1ZDtcbi8vICBkaXNwbGF5OiBmbGV4O1xuLy8gIGZsZXg6IDAgMCA1MHB4O1xuLy8gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuLy8gIHBhZGRpbmc6IDAgMTZweDtcbi8vICBwb3NpdGlvbjogcmVsYXRpdmU7XG4vL1xuLy8gIC5idXR0b25zIHtcbi8vICAgIEBpbmNsdWRlIHh4bC1wb3NpdGlvbihhYnNvbHV0ZSwgMCAwIDAgMTZweCk7XG4vL1xuLy8gICAgYnV0dG9uICsgYnV0dG9uIHtcbi8vICAgICAgbWFyZ2luLWxlZnQ6IDEwcHg7XG4vLyAgICB9XG4vLyAgfVxuLy9cbi8vICBoMSB7XG4vLyAgICBjb2xvcjogI2ZmZjtcbi8vICB9XG4vL31cblxubWFpbiB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXg6IDE7XG5cbiAgeHhsLWZsb3ctYmFzZWQge1xuICAgIC8vIGJvcmRlcjogM3B4IHNvbGlkIGxpZ2h0Z3JheTtcbiAgICBib3JkZXItcmFkaXVzOiAzcHg7XG4gIH1cblxuICAuZmxvdy1hcy1qc29uIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmO1xuICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgIGZsZXg6IDE7XG4gICAgb3ZlcmZsb3c6IGF1dG87XG5cbiAgICBwcmUge1xuICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjtcbiAgICAgIGJvcmRlcjogMXB4IHNvbGlkICM4OTg5ODk7XG4gICAgICBwYWRkaW5nOiAyMHB4O1xuICAgIH1cbiAgfVxufVxuXG4vL2ZiLWNvbnRleHQtbWVudSB7XG4vLyAgcG9zaXRpb246IGFic29sdXRlO1xuLy99XG4vL1xuLy8vLyBkaWFsb2dcbi8vLmJsb2NrLWxpc3Qge1xuLy8gIHBhZGRpbmc6IDIwcHg7XG4vL1xuLy8gIC5saXN0LWl0ZW0gKyAubGlzdC1pdGVtIHtcbi8vICAgIG1hcmdpbi10b3A6IDVweDtcbi8vICB9XG4vL31cbiIsIkBtaXhpbiBmYi1wb3NpdGlvbigkcG9zaXRpb246IHJlbGF0aXZlLCAkY29vcmRpbmF0ZXM6IDAgMCAwIDApIHtcbiAgQGlmIHR5cGUtb2YoJHBvc2l0aW9uKSA9PSBsaXN0IHtcbiAgICAkY29vcmRpbmF0ZXM6ICRwb3NpdGlvbjtcbiAgICAkcG9zaXRpb246IHJlbGF0aXZlO1xuICB9XG5cbiAgJHRvcDogbnRoKCRjb29yZGluYXRlcywgMSk7XG4gICRyaWdodDogbnRoKCRjb29yZGluYXRlcywgMik7XG4gICRib3R0b206IG50aCgkY29vcmRpbmF0ZXMsIDMpO1xuICAkbGVmdDogbnRoKCRjb29yZGluYXRlcywgNCk7XG5cbiAgcG9zaXRpb246ICRwb3NpdGlvbjtcblxuICAvLyBUb3BcbiAgQGlmICR0b3AgPT0gYXV0byB7XG4gICAgdG9wOiAkdG9wO1xuICB9IEBlbHNlIGlmIG5vdCh1bml0bGVzcygkdG9wKSkge1xuICAgIHRvcDogJHRvcDtcbiAgfVxuXG4gIC8vIFJpZ2h0XG4gIEBpZiAkcmlnaHQgPT0gYXV0byB7XG4gICAgcmlnaHQ6ICRyaWdodDtcbiAgfSBAZWxzZSBpZiBub3QodW5pdGxlc3MoJHJpZ2h0KSkge1xuICAgIHJpZ2h0OiAkcmlnaHQ7XG4gIH1cblxuICAvLyBCb3R0b21cbiAgQGlmICRib3R0b20gPT0gYXV0byB7XG4gICAgYm90dG9tOiAkYm90dG9tO1xuICB9IEBlbHNlIGlmIG5vdCh1bml0bGVzcygkYm90dG9tKSkge1xuICAgIGJvdHRvbTogJGJvdHRvbTtcbiAgfVxuXG4gIC8vIExlZnRcbiAgQGlmICRsZWZ0ID09IGF1dG8ge1xuICAgIGxlZnQ6ICRsZWZ0O1xuICB9IEBlbHNlIGlmIG5vdCh1bml0bGVzcygkbGVmdCkpIHtcbiAgICBsZWZ0OiAkbGVmdDtcbiAgfVxufVxuXG5AbWl4aW4geHhsLXNpemUoJHdpZHRoLCAkaGVpZ2h0OiAkd2lkdGgpIHtcbiAgaGVpZ2h0OiAkaGVpZ2h0O1xuICB3aWR0aDogJHdpZHRoO1xufVxuIl19 */\"","import { Component, ElementRef, HostListener, OnInit, ViewChild } from '@angular/core';\nimport { XxlFlow } from '../../projects/flow-based/src/lib/flow-based';\nimport { FlowBasedService } from '../../projects/flow-based/src/lib/flow-based.service';\nimport * as data from './fixtures';\nimport { Overlay, OverlayRef } from '@angular/cdk/overlay';\nimport { ComponentSelectionComponent } from './components/component-selection/component-selection.component';\nimport { ComponentPortal } from '@angular/cdk/portal';\nimport { ComponentSelectionService } from './component-selection.service';\n\nconst KEY_PRESS = {\n  ESC: 27\n};\n\n@Component({\n  selector: 'fb-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.scss']\n})\nexport class AppComponent implements OnInit {\n  // isContextMenu = false;\n  // contextMenuState = false;\n\n  // menuX: number;\n  // menuY: number;\n\n  activeOverlay: OverlayRef | null;\n  showJson = false;\n  flow: XxlFlow = data.basic as XxlFlow;\n\n  @ViewChild('bg') bgImage: ElementRef;\n\n  constructor(private selectionService: ComponentSelectionService,\n              private flowService: FlowBasedService,\n              private overlay: Overlay) {\n  }\n\n  ngOnInit(): void {\n    this.selectionService.selection$.subscribe(type => {\n      this.activeOverlay!.dispose();\n      this.flowService.add(type);\n    });\n\n    // const worker = new Worker('fractals-worker.js');\n    // worker.onmessage = (event) => {\n    //   const { output } = event.data;\n    //   console.log('output=' + output);\n    // };\n    //\n    // worker.postMessage(9);\n  }\n\n  openModal(): void {\n    const portal = new ComponentPortal(ComponentSelectionComponent);\n    const positionStrategy = this.overlay.position()\n      .global()\n      .centerHorizontally()\n      .centerVertically();\n\n    this.activeOverlay = this.overlay.create({\n      hasBackdrop: true,\n      backdropClass: 'dark-backdrop',\n      panelClass: 'comp-selection',\n      height: '600px',\n      width: '400px',\n      positionStrategy\n    });\n\n    this.activeOverlay.attach(portal);\n\n    this.activeOverlay.backdropClick().subscribe((e: PointerEvent) => {\n      this.activeOverlay!.dispose();\n      this.activeOverlay = null;\n    });\n  }\n\n  showJSON(): void {\n    this.showJson = !this.showJson;\n  }\n\n  onUpdate(): void {\n    console.log('updated');\n  }\n\n  @HostListener('document:keydown.escape', ['$event'])\n  escape(event): void {\n    if (this.showJson) {\n      this.showJson = false;\n    } else if (this.activeOverlay) {\n      this.activeOverlay.dispose();\n\n      this.activeOverlay = null;\n    } else {\n      this.flowService.triggerEvent('blur');\n    }\n  }\n}\n","import { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { BrowserModule } from '@angular/platform-browser';\nimport { NgModule } from '@angular/core';\nimport { WebWorkerService } from 'ngx-web-worker';\n\n\nimport { AppComponent } from './app.component';\nimport { ContextMenuComponent } from './context-menu/context-menu.component';\nimport { TapComponent } from './nodes/tap/tap.component';\nimport { DefaultFlowComponent } from './nodes/default-flow/default-flow.component';\nimport { FlowComponent } from './flow/flow.component';\nimport { FB_NODE_HELPERS, FB_SOCKET_COLORS, FbSocketColors, XXL_FLOW_TYPES } from '../../projects/flow-based/src/lib/flow-based';\nimport { DefaultFrontComponent } from './components/default-front/default-front.component';\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\nimport { CodemirrorModule } from '@ctrl/ngx-codemirror';\nimport {\n  MAT_DIALOG_DEFAULT_OPTIONS, MatAutocompleteModule,\n  MatButtonModule, MatCardModule, MatCheckboxModule, MatDialogModule,\n  MatInputModule, MatListModule, MatSelectModule, MatSliderModule, MatToolbarModule\n} from '@angular/material';\nimport { MatIconModule } from '@angular/material/icon';\nimport {MatTooltipModule} from '@angular/material/tooltip';\nimport { ComponentSelectionComponent } from './components/component-selection/component-selection.component';\nimport { FullscreenOverlayContainer, OverlayContainer, OverlayModule } from '@angular/cdk/overlay';\nimport { ComponentSelectionService } from './component-selection.service';\nimport { RandomNumbersComponent } from './nodes/random-numbers/random-numbers.component';\nimport { BasicGraphComponent } from './nodes/basic-graph/basic-graph.component';\nimport { AddSocketComponent } from './nodes/default-flow/add-socket/add-socket.component';\nimport { MergeStreamsComponent } from './nodes/merge-streams/merge-streams.component';\nimport { FB_CONFIG, XXL_SOCKET_COLORS } from './fb-config';\nimport { NODE_HELPERS } from './node-helpers';\nimport { FlowBasedModule } from '../../projects/flow-based/src/lib/flow-based.module';\nimport { StatsComponent } from './nodes/stats/stats.component';\nimport { NormalNodeComponent } from './components/normal-node/normal-node.component';\nimport { EditNodeComponent } from './components/edit-node/edit-node.component';\nimport { NodeHeaderComponent } from './components/node-header/node-header.component';\nimport { CustomCodeComponent } from './nodes/custom-code/custom-code.component';\nimport { FractalComponent } from './nodes/fractal/fractal.component';\nimport { ZoomCanvasComponent } from './nodes/zoom-canvas/zoom-canvas.component';\nimport { CanvasComponent } from './nodes/canvas/canvas.component';\n\n@NgModule({\n  declarations: [\n    AppComponent,\n    AddSocketComponent,\n    ContextMenuComponent,\n    RandomNumbersComponent,\n    TapComponent,\n    DefaultFlowComponent,\n    FlowComponent,\n    DefaultFrontComponent,\n    ComponentSelectionComponent,\n    BasicGraphComponent,\n    MergeStreamsComponent,\n    EditNodeComponent,\n    NodeHeaderComponent,\n    StatsComponent,\n    NormalNodeComponent,\n    CustomCodeComponent,\n    FractalComponent,\n    ZoomCanvasComponent,\n    CanvasComponent,\n  ],\n  imports: [\n    BrowserModule,\n    BrowserAnimationsModule,\n    ReactiveFormsModule,\n    FormsModule,\n    MatDialogModule,\n    MatToolbarModule,\n    MatInputModule,\n    MatSliderModule,\n    FlowBasedModule,\n    MatButtonModule,\n    MatCardModule,\n    MatCheckboxModule,\n    MatIconModule,\n    MatListModule,\n    MatTooltipModule,\n    OverlayModule,\n    CodemirrorModule,\n    MatAutocompleteModule,\n    MatSelectModule\n  ],\n  providers: [\n    ComponentSelectionService,\n    {provide: MAT_DIALOG_DEFAULT_OPTIONS, useValue: {hasBackdrop: true}},\n    {provide: OverlayContainer, useClass: FullscreenOverlayContainer},\n    {\n      provide: XXL_FLOW_TYPES,\n      useValue: FB_CONFIG\n    }, {\n      provide: FB_NODE_HELPERS,\n      useValue: NODE_HELPERS\n    }, {\n      provide: FB_SOCKET_COLORS,\n      useValue: XXL_SOCKET_COLORS as FbSocketColors\n    },\n    WebWorkerService\n  ],\n  entryComponents: [\n    AddSocketComponent,\n    ComponentSelectionComponent,\n    BasicGraphComponent,\n    RandomNumbersComponent,\n    TapComponent,\n    DefaultFlowComponent,\n    MergeStreamsComponent,\n    StatsComponent,\n    CustomCodeComponent,\n    FractalComponent,\n    CanvasComponent,\n    ZoomCanvasComponent\n  ],\n  bootstrap: [AppComponent]\n})\nexport class AppModule {\n}\n","import { Injectable } from '@angular/core';\nimport { Observable, Subject } from 'rxjs';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ComponentSelectionService {\n  private selection: Subject<string>;\n  public selection$: Observable<string>;\n\n  constructor() {\n    this.selection = new Subject();\n    this.selection$ = this.selection.asObservable();\n  }\n\n  select(type: string): void {\n    this.selection.next(type);\n  }\n}\n\n","module.exports = \"<mat-toolbar color=\\\"secondary\\\">\\n  <span>Component selection</span>\\n</mat-toolbar>\\n\\n<section class=\\\"type-selection\\\">\\n  <h2>Flow units</h2>\\n  <mat-list>\\n    <mat-list-item *ngFor=\\\"let key of flowKeys \\\">\\n      <button mat-button (click)=\\\"onSelection(key)\\\">{{flowTypes[key].settings.title}}</button>\\n    </mat-list-item>\\n  </mat-list>\\n</section>\\n\"","module.exports = \":host {\\n  background-color: #fff;\\n  display: flex;\\n  flex-direction: column;\\n  width: 100%; }\\n\\nmat-toolbar {\\n  display: flex;\\n  justify-content: center; }\\n\\n.type-selection {\\n  margin: var(--fb-gutter-size); }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9sdWNhc2NhbGplL1dlYnN0b3JtUHJvamVjdHMvZmxvdy1iYXNlZC9zcmMvYXBwL2NvbXBvbmVudHMvY29tcG9uZW50LXNlbGVjdGlvbi9jb21wb25lbnQtc2VsZWN0aW9uLmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsdUJBQXNCO0VBQ3RCLGNBQWE7RUFDYix1QkFBc0I7RUFDdEIsWUFBVyxFQUNaOztBQUVEO0VBQ0UsY0FBYTtFQUNiLHdCQUF1QixFQUN4Qjs7QUFFRDtFQUNFLDhCQUE2QixFQUM5QiIsImZpbGUiOiJzcmMvYXBwL2NvbXBvbmVudHMvY29tcG9uZW50LXNlbGVjdGlvbi9jb21wb25lbnQtc2VsZWN0aW9uLmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiOmhvc3Qge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmO1xuICBkaXNwbGF5OiBmbGV4O1xuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICB3aWR0aDogMTAwJTtcbn1cblxubWF0LXRvb2xiYXIge1xuICBkaXNwbGF5OiBmbGV4O1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbn1cblxuLnR5cGUtc2VsZWN0aW9uIHtcbiAgbWFyZ2luOiB2YXIoLS1mYi1ndXR0ZXItc2l6ZSk7XG59XG4iXX0= */\"","import { Component, Inject, OnInit } from '@angular/core';\nimport { XXL_FLOW_TYPES, FbNodeTypes } from '../../../../projects/flow-based/src/lib/flow-based';\nimport { ComponentSelectionService } from '../../component-selection.service';\n\n@Component({\n  selector: 'fb-component-selection',\n  templateUrl: './component-selection.component.html',\n  styleUrls: ['./component-selection.component.scss']\n})\nexport class ComponentSelectionComponent implements OnInit {\n  flowKeys: string[];\n\n  constructor(private selectionService: ComponentSelectionService,\n              @Inject(XXL_FLOW_TYPES) public flowTypes: FbNodeTypes) {\n  }\n\n  ngOnInit() {\n    this.flowKeys = Object.keys(this.flowTypes);\n  }\n\n  onSelection(type: string): void {\n    this.selectionService.select(type);\n  }\n\n}\n","module.exports = \"<img #img src=\\\"./assets/config.svg\\\">\\n\\n<!--<h1 *ngIf=\\\"title\\\" class=\\\"title\\\">{{title}}</h1>-->\\n\"","module.exports = \":host {\\n  background-color: lightgray;\\n  border-radius: 8px;\\n  display: flex;\\n  flex-direction: column;\\n  padding: 4px;\\n  pointer-events: none;\\n  width: 72px; }\\n\\nimg {\\n  width: 100%; }\\n\\n.title {\\n  background-color: rgba(0, 0, 0, 0.2);\\n  color: #fff;\\n  font-size: 14px;\\n  text-align: center;\\n  -webkit-transform: translateX(-50%);\\n          transform: translateX(-50%);\\n  width: 300px;\\n  position: absolute;\\n  bottom: -34px;\\n  left: 50%; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9sdWNhc2NhbGplL1dlYnN0b3JtUHJvamVjdHMvZmxvdy1iYXNlZC9zcmMvYXBwL2NvbXBvbmVudHMvZGVmYXVsdC1mcm9udC9kZWZhdWx0LWZyb250LmNvbXBvbmVudC5zY3NzIiwiL1VzZXJzL2x1Y2FzY2FsamUvV2Vic3Rvcm1Qcm9qZWN0cy9mbG93LWJhc2VkL3Byb2plY3RzL2Zsb3ctYmFzZWQvc3JjL2xpYi91dGlscy9fdXRpbHMuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFFQTtFQUNFLDRCQUEyQjtFQUMzQixtQkFBa0I7RUFDbEIsY0FBYTtFQUNiLHVCQUFzQjtFQUN0QixhQUFZO0VBQ1oscUJBQW9CO0VBQ3BCLFlBQVcsRUFDWjs7QUFFRDtFQUNFLFlBQVcsRUFDWjs7QUFFRDtFQUNFLHFDQUFvQztFQUNwQyxZQUFXO0VBQ1gsZ0JBQWU7RUFDZixtQkFBa0I7RUFDbEIsb0NBQTJCO1VBQTNCLDRCQUEyQjtFQUMzQixhQUFZO0VDWFosbUJEWTZCO0VDUTNCLGNEUnNDO0VDZXRDLFVEZjBDLEVBQzdDIiwiZmlsZSI6InNyYy9hcHAvY29tcG9uZW50cy9kZWZhdWx0LWZyb250L2RlZmF1bHQtZnJvbnQuY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyJAaW1wb3J0ICd1dGlscy91dGlscyc7XG5cbjpob3N0IHtcbiAgYmFja2dyb3VuZC1jb2xvcjogbGlnaHRncmF5O1xuICBib3JkZXItcmFkaXVzOiA4cHg7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gIHBhZGRpbmc6IDRweDtcbiAgcG9pbnRlci1ldmVudHM6IG5vbmU7XG4gIHdpZHRoOiA3MnB4O1xufVxuXG5pbWcge1xuICB3aWR0aDogMTAwJTtcbn1cblxuLnRpdGxlIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgwLCAwLCAwLCAwLjIpO1xuICBjb2xvcjogI2ZmZjtcbiAgZm9udC1zaXplOiAxNHB4O1xuICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gIHRyYW5zZm9ybTogdHJhbnNsYXRlWCgtNTAlKTtcbiAgd2lkdGg6IDMwMHB4O1xuICBAaW5jbHVkZSBmYi1wb3NpdGlvbihhYnNvbHV0ZSwgMCAwIC0zNHB4IDUwJSk7XG59XG4iLCJAbWl4aW4gZmItcG9zaXRpb24oJHBvc2l0aW9uOiByZWxhdGl2ZSwgJGNvb3JkaW5hdGVzOiAwIDAgMCAwKSB7XG4gIEBpZiB0eXBlLW9mKCRwb3NpdGlvbikgPT0gbGlzdCB7XG4gICAgJGNvb3JkaW5hdGVzOiAkcG9zaXRpb247XG4gICAgJHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgfVxuXG4gICR0b3A6IG50aCgkY29vcmRpbmF0ZXMsIDEpO1xuICAkcmlnaHQ6IG50aCgkY29vcmRpbmF0ZXMsIDIpO1xuICAkYm90dG9tOiBudGgoJGNvb3JkaW5hdGVzLCAzKTtcbiAgJGxlZnQ6IG50aCgkY29vcmRpbmF0ZXMsIDQpO1xuXG4gIHBvc2l0aW9uOiAkcG9zaXRpb247XG5cbiAgLy8gVG9wXG4gIEBpZiAkdG9wID09IGF1dG8ge1xuICAgIHRvcDogJHRvcDtcbiAgfSBAZWxzZSBpZiBub3QodW5pdGxlc3MoJHRvcCkpIHtcbiAgICB0b3A6ICR0b3A7XG4gIH1cblxuICAvLyBSaWdodFxuICBAaWYgJHJpZ2h0ID09IGF1dG8ge1xuICAgIHJpZ2h0OiAkcmlnaHQ7XG4gIH0gQGVsc2UgaWYgbm90KHVuaXRsZXNzKCRyaWdodCkpIHtcbiAgICByaWdodDogJHJpZ2h0O1xuICB9XG5cbiAgLy8gQm90dG9tXG4gIEBpZiAkYm90dG9tID09IGF1dG8ge1xuICAgIGJvdHRvbTogJGJvdHRvbTtcbiAgfSBAZWxzZSBpZiBub3QodW5pdGxlc3MoJGJvdHRvbSkpIHtcbiAgICBib3R0b206ICRib3R0b207XG4gIH1cblxuICAvLyBMZWZ0XG4gIEBpZiAkbGVmdCA9PSBhdXRvIHtcbiAgICBsZWZ0OiAkbGVmdDtcbiAgfSBAZWxzZSBpZiBub3QodW5pdGxlc3MoJGxlZnQpKSB7XG4gICAgbGVmdDogJGxlZnQ7XG4gIH1cbn1cblxuQG1peGluIHh4bC1zaXplKCR3aWR0aCwgJGhlaWdodDogJHdpZHRoKSB7XG4gIGhlaWdodDogJGhlaWdodDtcbiAgd2lkdGg6ICR3aWR0aDtcbn1cbiJdfQ== */\"","import { Component, ElementRef, Input, OnInit, ViewChild } from '@angular/core';\nimport { NodeService } from '../../../../projects/flow-based/src/lib/node/node-service';\n\n@Component({\n  selector: 'fb-default-front',\n  templateUrl: './default-front.component.html',\n  styleUrls: ['./default-front.component.scss']\n})\nexport class DefaultFrontComponent implements OnInit {\n  @Input() title: string;\n  @ViewChild('img') ref: ElementRef;\n\n  constructor(private fbService: NodeService) {}\n\n  ngOnInit(): void {\n    this.ref.nativeElement.addEventListener('load', () => {\n      this.fbService.calibrate();\n    });\n  }\n}\n","module.exports = \"<mat-card class=\\\"title\\\">\\n  <mat-card-content>\\n    <mat-form-field matLine>\\n      <input matInput placeholder=\\\"Title\\\" [(ngModel)]=\\\"state.title\\\">\\n    </mat-form-field>\\n  </mat-card-content>\\n</mat-card>\\n\\n<div class=\\\"socket-wrapper\\\" *ngIf=\\\"hasSockets()\\\">\\n  <mat-list class=\\\"socket-in\\\">\\n    <mat-list-item *ngFor=\\\"let socket of sockets | socketIn;let i = index\\\">\\n      <button *ngIf=\\\"deleteSocket\\\" #action mat-mini-fab color=\\\"warn\\\" (click)=\\\"onDelete(socket, i)\\\" [attr.data-socket-id]=\\\"socket.id\\\"\\n              class=\\\"action\\\">\\n        <mat-icon>delete_forever</mat-icon>\\n      </button>\\n\\n      <button *ngIf=\\\"!deleteSocket\\\" #action mat-mini-fab color=\\\"primary\\\" [attr.data-socket-id]=\\\"socket.id\\\"\\n              class=\\\"action socket-direction\\\">\\n        <mat-icon>arrow_right_alt</mat-icon>\\n      </button>\\n\\n      <mat-form-field matLine>\\n        <input matInput placeholder=\\\"Socket name\\\" [(ngModel)]=\\\"socket.name\\\">\\n      </mat-form-field>\\n      <mat-form-field matLine>\\n        <mat-label>Colors</mat-label>\\n        <input matInput type=\\\"color\\\" (ngModelChange)=\\\"setSocketColor($event, socket)\\\"\\n               [ngModel]=\\\"getSocketColor(socket)\\\">\\n      </mat-form-field>\\n    </mat-list-item>\\n  </mat-list>\\n\\n  <mat-list class=\\\"socket-out\\\">\\n    <mat-list-item *ngFor=\\\"let socket of sockets | socketOut;let i = index\\\">\\n      <button *ngIf=\\\"deleteSocket\\\" #action mat-mini-fab color=\\\"warn\\\" (click)=\\\"onDelete(socket, i)\\\" [attr.data-socket-id]=\\\"socket.id\\\"\\n              class=\\\"action\\\">\\n        <mat-icon>delete_forever</mat-icon>\\n      </button>\\n\\n      <button *ngIf=\\\"!deleteSocket\\\" #action mat-mini-fab color=\\\"primary\\\" [attr.data-socket-id]=\\\"socket.id\\\"\\n              class=\\\"action socket-direction\\\">\\n        <mat-icon>arrow_right_alt</mat-icon>\\n      </button>\\n\\n      <mat-form-field matLine>\\n        <input matInput placeholder=\\\"Socket name\\\" [(ngModel)]=\\\"socket.name\\\">\\n      </mat-form-field>\\n      <mat-form-field matLine>\\n        <mat-label>Colors</mat-label>\\n        <input matInput type=\\\"color\\\" (ngModelChange)=\\\"setSocketColor($event, socket)\\\"\\n               [ngModel]=\\\"getSocketColor(socket)\\\">\\n      </mat-form-field>\\n      <mat-divider></mat-divider>\\n    </mat-list-item>\\n  </mat-list>\\n</div>\\n\"","module.exports = \":host {\\n  align-self: center;\\n  background-color: #fff;\\n  display: flex;\\n  flex-direction: column;\\n  justify-content: center;\\n  position: relative; }\\n  :host .title {\\n    padding-bottom: 0;\\n    position: absolute;\\n    top: -80px;\\n    right: 0px;\\n    left: 0px; }\\n  :host .socket-wrapper {\\n    display: flex;\\n    flex-direction: row; }\\n  :host mat-list {\\n    display: flex;\\n    flex-direction: column;\\n    justify-content: center;\\n    padding: 20px;\\n    width: 50%; }\\n  :host mat-list-item {\\n    margin: 32px 0;\\n    position: relative; }\\n  :host mat-list-item mat-label {\\n      color: #0009;\\n      font-size: 16px;\\n      -webkit-transform: scale(0.75);\\n              transform: scale(0.75); }\\n  :host .socket-in .action {\\n    left: 0;\\n    -webkit-transform: translate(-100%, 0);\\n            transform: translate(-100%, 0); }\\n  :host .socket-in .socket-direction {\\n    pointer-events: none;\\n    -webkit-transform: translate(-100%, 0) rotate(180deg);\\n            transform: translate(-100%, 0) rotate(180deg); }\\n  :host .socket-out .action {\\n    right: 0;\\n    -webkit-transform: translate(100%, 0);\\n            transform: translate(100%, 0); }\\n  :host .socket-out .socket-direction {\\n    pointer-events: none; }\\n  :host .action {\\n    position: absolute; }\\n  :host footer {\\n    display: flex;\\n    justify-content: space-between; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9sdWNhc2NhbGplL1dlYnN0b3JtUHJvamVjdHMvZmxvdy1iYXNlZC9zcmMvYXBwL2NvbXBvbmVudHMvZWRpdC1ub2RlL2VkaXQtbm9kZS5jb21wb25lbnQuc2NzcyIsIi9Vc2Vycy9sdWNhc2NhbGplL1dlYnN0b3JtUHJvamVjdHMvZmxvdy1iYXNlZC9wcm9qZWN0cy9mbG93LWJhc2VkL3NyYy9saWIvdXRpbHMvX3V0aWxzLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBR0E7RUFDRSxtQkFBa0I7RUFDbEIsdUJBQXNCO0VBQ3RCLGNBQWE7RUFDYix1QkFBc0I7RUFDdEIsd0JBQXVCO0VBQ3ZCLG1CQUFrQixFQThEbkI7RUFwRUQ7SUFTSSxrQkFBaUI7SUNEbkIsbUJERStCO0lDSTdCLFdESm9DO0lDV3BDLFdEWHdDO0lDeUJ4QyxVRHpCOEMsRUFDL0M7RUFYSDtJQWNJLGNBQWE7SUFDYixvQkFBbUIsRUFDcEI7RUFoQkg7SUFtQkksY0FBYTtJQUNiLHVCQUFzQjtJQUN0Qix3QkFBdUI7SUFDdkIsY0FBYTtJQUNiLFdBQVUsRUFDWDtFQXhCSDtJQTJCSSxlQUFjO0lBQ2QsbUJBQWtCLEVBT25CO0VBbkNIO01BK0JNLGFBQVk7TUFDWixnQkFBZTtNQUNmLCtCQUFzQjtjQUF0Qix1QkFBc0IsRUFDdkI7RUFsQ0w7SUF1Q00sUUFBTztJQUNQLHVDQUE4QjtZQUE5QiwrQkFBOEIsRUFDL0I7RUF6Q0w7SUE0Q00scUJBQW9CO0lBQ3BCLHNEQUE2QztZQUE3Qyw4Q0FBNkMsRUFDOUM7RUE5Q0w7SUFtRE0sU0FBUTtJQUNSLHNDQUE2QjtZQUE3Qiw4QkFBNkIsRUFDOUI7RUFyREw7SUF3RE0scUJBQW9CLEVBQ3JCO0VBekRMO0lBNkRJLG1CQUFrQixFQUNuQjtFQTlESDtJQWlFSSxjQUFhO0lBQ2IsK0JBQThCLEVBQy9CIiwiZmlsZSI6InNyYy9hcHAvY29tcG9uZW50cy9lZGl0LW5vZGUvZWRpdC1ub2RlLmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiQGltcG9ydCAnLi4vLi4vLi4vLi4vcHJvamVjdHMvZmxvdy1iYXNlZC9zcmMvbGliL3V0aWxzL3V0aWxzJztcbkBpbXBvcnQgJy4uLy4uLy4uLy4uL3Byb2plY3RzL2Zsb3ctYmFzZWQvc3JjL2xpYi91dGlscy92YXJpYWJsZXMnO1xuXG46aG9zdCB7XG4gIGFsaWduLXNlbGY6IGNlbnRlcjtcbiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjtcbiAgZGlzcGxheTogZmxleDtcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcblxuICAudGl0bGUge1xuICAgIHBhZGRpbmctYm90dG9tOiAwO1xuICAgIEBpbmNsdWRlIGZiLXBvc2l0aW9uKGFic29sdXRlLCAtODBweCAwcHggMCAwcHgpO1xuICB9XG5cbiAgLnNvY2tldC13cmFwcGVyIHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGZsZXgtZGlyZWN0aW9uOiByb3c7XG4gIH1cblxuICBtYXQtbGlzdCB7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgIHBhZGRpbmc6IDIwcHg7XG4gICAgd2lkdGg6IDUwJTtcbiAgfVxuXG4gIG1hdC1saXN0LWl0ZW0ge1xuICAgIG1hcmdpbjogMzJweCAwO1xuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcblxuICAgIG1hdC1sYWJlbCB7XG4gICAgICBjb2xvcjogIzAwMDk7XG4gICAgICBmb250LXNpemU6IDE2cHg7XG4gICAgICB0cmFuc2Zvcm06IHNjYWxlKDAuNzUpO1xuICAgIH1cbiAgfVxuXG4gIC5zb2NrZXQtaW4ge1xuICAgIC5hY3Rpb24ge1xuICAgICAgbGVmdDogMDtcbiAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlKC0xMDAlLCAwKTtcbiAgICB9XG5cbiAgICAuc29ja2V0LWRpcmVjdGlvbiB7XG4gICAgICBwb2ludGVyLWV2ZW50czogbm9uZTtcbiAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlKC0xMDAlLCAwKSByb3RhdGUoMTgwZGVnKTtcbiAgICB9XG4gIH1cblxuICAuc29ja2V0LW91dCB7XG4gICAgLmFjdGlvbiB7XG4gICAgICByaWdodDogMDtcbiAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlKDEwMCUsIDApO1xuICAgIH1cblxuICAgIC5zb2NrZXQtZGlyZWN0aW9uIHtcbiAgICAgIHBvaW50ZXItZXZlbnRzOiBub25lO1xuICAgIH1cbiAgfVxuXG4gIC5hY3Rpb24ge1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgfVxuXG4gIGZvb3RlciB7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gIH1cbn1cbiIsIkBtaXhpbiBmYi1wb3NpdGlvbigkcG9zaXRpb246IHJlbGF0aXZlLCAkY29vcmRpbmF0ZXM6IDAgMCAwIDApIHtcbiAgQGlmIHR5cGUtb2YoJHBvc2l0aW9uKSA9PSBsaXN0IHtcbiAgICAkY29vcmRpbmF0ZXM6ICRwb3NpdGlvbjtcbiAgICAkcG9zaXRpb246IHJlbGF0aXZlO1xuICB9XG5cbiAgJHRvcDogbnRoKCRjb29yZGluYXRlcywgMSk7XG4gICRyaWdodDogbnRoKCRjb29yZGluYXRlcywgMik7XG4gICRib3R0b206IG50aCgkY29vcmRpbmF0ZXMsIDMpO1xuICAkbGVmdDogbnRoKCRjb29yZGluYXRlcywgNCk7XG5cbiAgcG9zaXRpb246ICRwb3NpdGlvbjtcblxuICAvLyBUb3BcbiAgQGlmICR0b3AgPT0gYXV0byB7XG4gICAgdG9wOiAkdG9wO1xuICB9IEBlbHNlIGlmIG5vdCh1bml0bGVzcygkdG9wKSkge1xuICAgIHRvcDogJHRvcDtcbiAgfVxuXG4gIC8vIFJpZ2h0XG4gIEBpZiAkcmlnaHQgPT0gYXV0byB7XG4gICAgcmlnaHQ6ICRyaWdodDtcbiAgfSBAZWxzZSBpZiBub3QodW5pdGxlc3MoJHJpZ2h0KSkge1xuICAgIHJpZ2h0OiAkcmlnaHQ7XG4gIH1cblxuICAvLyBCb3R0b21cbiAgQGlmICRib3R0b20gPT0gYXV0byB7XG4gICAgYm90dG9tOiAkYm90dG9tO1xuICB9IEBlbHNlIGlmIG5vdCh1bml0bGVzcygkYm90dG9tKSkge1xuICAgIGJvdHRvbTogJGJvdHRvbTtcbiAgfVxuXG4gIC8vIExlZnRcbiAgQGlmICRsZWZ0ID09IGF1dG8ge1xuICAgIGxlZnQ6ICRsZWZ0O1xuICB9IEBlbHNlIGlmIG5vdCh1bml0bGVzcygkbGVmdCkpIHtcbiAgICBsZWZ0OiAkbGVmdDtcbiAgfVxufVxuXG5AbWl4aW4geHhsLXNpemUoJHdpZHRoLCAkaGVpZ2h0OiAkd2lkdGgpIHtcbiAgaGVpZ2h0OiAkaGVpZ2h0O1xuICB3aWR0aDogJHdpZHRoO1xufVxuIl19 */\"","import {\n  AfterViewInit,\n  Component,\n  ElementRef,\n  HostBinding,\n  Inject,\n  Input,\n  OnDestroy,\n  OnInit,\n  QueryList,\n  ViewChildren\n} from '@angular/core';\nimport { FormBuilder } from '@angular/forms';\nimport { FB_SOCKET_COLORS, FbNodeState, SocketDetails, XxlSocket, XxlSocketType } from '../../../../projects/flow-based/src/lib/flow-based';\nimport { NodeService } from '../../../../projects/flow-based/src/lib/node/node-service';\n\n@Component({\n  selector: 'fb-edit-node',\n  templateUrl: './edit-node.component.html',\n  styleUrls: ['./edit-node.component.scss']\n})\nexport class EditNodeComponent implements OnInit, AfterViewInit, OnDestroy {\n  sockets: XxlSocket[];\n  state: FbNodeState;\n\n  @Input() deleteSocket = true;\n\n  @ViewChildren('action', {read: ElementRef}) refs: QueryList<ElementRef>;\n  private connections: { [key: number]: number } = {};\n  public socketDetails: SocketDetails[];\n\n  constructor(private element: ElementRef,\n              private fb: FormBuilder,\n              private service: NodeService,\n              @Inject(FB_SOCKET_COLORS) private socketColors: Record<string, string>) {\n  }\n\n  ngOnInit(): void {\n    this.state = this.service.state;\n    this.socketDetails = this.service.getSockets();\n    this.sockets = this.socketDetails.reduce((output: XxlSocket[], sd: SocketDetails) => {\n      output.push(sd.state);\n\n      return output;\n    }, []);\n  }\n\n  ngAfterViewInit(): void {\n    this.service.removeConnections();\n    console.log('delete is ' + this.deleteSocket);\n\n    setTimeout(() => {\n      this.refs.forEach((ref, i) => {\n        const el = ref.nativeElement;\n        const id = parseInt(el.dataset.socketId, 10); // `edit-${i}`;\n\n        const socketDetails = this.socketDetails.find(sd => sd.state.id === id)!;\n\n        if (socketDetails.state.type === 'in') {\n          this.connections[id] = this.service.addConnection(socketDetails.element, el);\n        } else {\n           this.connections[id] = this.service.addConnection(el, socketDetails.element);\n        }\n      });\n    });\n  }\n\n  getSocketColor(socket: XxlSocket): string {\n    return socket.color || this.socketColors[socket.format!] || '#ffffff';\n  }\n\n  setSocketColor(color, socket: XxlSocket): void {\n    socket.color = color;\n  }\n\n  ngOnDestroy(): void {\n    this.service.removeConnections();\n  }\n\n  onDelete(socket: XxlSocket, index: number): void {\n    // this.data.sockets = this.data.sockets.filter(s => s.id !== socket.id);\n    // this.data.service.removeConnection(this.connections[`edit-${index}`]);\n  }\n\n  onCancel(): void {\n    // this.dialogRef.close();\n  }\n\n  onApply(): void {\n    // this.dialogRef.close(this.data.sockets);\n  }\n\n  hasSockets(): boolean {\n    return !!this.sockets.length;\n  }\n\n  private closing(): void {\n    // this.data.service.removeConnections();\n  }\n}\n","module.exports = \"<mat-toolbar color=\\\"primary\\\">\\n  <h1>{{title}}</h1>\\n\\n  <button mat-mini-fab color=\\\"primary\\\" (click)=\\\"onEdit()\\\">\\n    <mat-icon>edit</mat-icon>\\n  </button>\\n</mat-toolbar>\\n\"","module.exports = \":host {\\n  display: flex;\\n  justify-content: space-between;\\n  width: 100%; }\\n\\n.label-title {\\n  cursor: pointer;\\n  flex: 1;\\n  flex-direction: column;\\n  line-height: 40px;\\n  margin: 0 16px 0 -10px;\\n  padding: 0 8px; }\\n\\n.label-title:focus {\\n    background-color: rgba(255, 255, 255, 0.1); }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9sdWNhc2NhbGplL1dlYnN0b3JtUHJvamVjdHMvZmxvdy1iYXNlZC9zcmMvYXBwL2NvbXBvbmVudHMvbm9kZS1oZWFkZXIvbm9kZS1oZWFkZXIuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxjQUFhO0VBQ2IsK0JBQThCO0VBQzlCLFlBQVcsRUFDWjs7QUFFRDtFQUNFLGdCQUFlO0VBQ2YsUUFBTztFQUNQLHVCQUFzQjtFQUN0QixrQkFBaUI7RUFDakIsdUJBQXNCO0VBQ3RCLGVBQWMsRUFLZjs7QUFYRDtJQVNJLDJDQUEwQyxFQUMzQyIsImZpbGUiOiJzcmMvYXBwL2NvbXBvbmVudHMvbm9kZS1oZWFkZXIvbm9kZS1oZWFkZXIuY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyI6aG9zdCB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcbiAgd2lkdGg6IDEwMCU7XG59XG5cbi5sYWJlbC10aXRsZSB7XG4gIGN1cnNvcjogcG9pbnRlcjtcbiAgZmxleDogMTtcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgbGluZS1oZWlnaHQ6IDQwcHg7XG4gIG1hcmdpbjogMCAxNnB4IDAgLTEwcHg7XG4gIHBhZGRpbmc6IDAgOHB4O1xuXG4gICY6Zm9jdXMge1xuICAgIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4xKTtcbiAgfVxufVxuIl19 */\"","import { Component, EventEmitter, Input, Output } from '@angular/core';\n\n@Component({\n  selector: 'fb-node-header',\n  templateUrl: './node-header.component.html',\n  styleUrls: ['./node-header.component.scss']\n})\nexport class NodeHeaderComponent {\n  @Input() title: string;\n  @Output() edit = new EventEmitter();\n\n  onEdit(): void {\n    this.edit.emit();\n  }\n}\n","module.exports = \"<ng-container *ngIf=\\\"!isEditing\\\">\\n  <header *ngIf=\\\"isActive\\\">\\n    <mat-toolbar color=\\\"primary\\\">\\n      <h1>{{title}}</h1>\\n\\n      <button mat-mini-fab color=\\\"primary\\\" (click)=\\\"onEdit()\\\">\\n        <mat-icon>edit</mat-icon>\\n      </button>\\n    </mat-toolbar>\\n  </header>\\n\\n  <ng-content></ng-content>\\n</ng-container>\\n\\n<ng-container *ngIf=\\\"isEditing\\\">\\n  <fb-edit-node [deleteSocket]=\\\"deleteSocket\\\"></fb-edit-node>\\n</ng-container>\\n\\n<footer *ngIf=\\\"isActive\\\">\\n  <button mat-button color=\\\"warn\\\" (click)=\\\"onDelete()\\\">\\n    <mat-icon>delete_forever</mat-icon>\\n  </button>\\n\\n  <button mat-button (click)=\\\"onClose()\\\" class=\\\"close\\\">Close</button>\\n</footer>\\n\"","module.exports = \":host {\\n  display: flex;\\n  flex-direction: column;\\n  height: 100%;\\n  justify-content: center; }\\n  :host header button,\\n  :host footer {\\n    pointer-events: auto; }\\n  :host.is-fullscreen {\\n    height: 100%; }\\n  :host.is-fullscreen header {\\n      -webkit-transform: translateX(-50%);\\n              transform: translateX(-50%);\\n      position: absolute;\\n      top: 20px;\\n      left: 50%; }\\n  :host.is-fullscreen header,\\n    :host.is-fullscreen footer {\\n      max-width: 500px; }\\n  :host.is-fullscreen footer {\\n      background-color: rgba(255, 255, 255, 0.8);\\n      display: flex;\\n      justify-content: space-between;\\n      -webkit-transform: translateX(-50%);\\n              transform: translateX(-50%);\\n      width: 300px;\\n      position: absolute;\\n      bottom: 8px;\\n      left: 50%; }\\n  fb-edit-node {\\n  min-width: 200px;\\n  z-index: 11; }\\n  header mat-toolbar {\\n  display: flex;\\n  justify-content: space-between;\\n  width: 100%; }\\n  header {\\n  align-self: center;\\n  width: 100%; }\\n  footer {\\n  background-color: #fff;\\n  display: flex;\\n  justify-content: space-between; }\\n  footer .close {\\n    color: #000; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9sdWNhc2NhbGplL1dlYnN0b3JtUHJvamVjdHMvZmxvdy1iYXNlZC9zcmMvYXBwL2NvbXBvbmVudHMvbm9ybWFsLW5vZGUvbm9ybWFsLW5vZGUuY29tcG9uZW50LnNjc3MiLCIvVXNlcnMvbHVjYXNjYWxqZS9XZWJzdG9ybVByb2plY3RzL2Zsb3ctYmFzZWQvcHJvamVjdHMvZmxvdy1iYXNlZC9zcmMvbGliL3V0aWxzL191dGlscy5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUVBO0VBQ0UsY0FBYTtFQUNiLHVCQUFzQjtFQUN0QixhQUFZO0VBQ1osd0JBQXVCLEVBNkJ4QjtFQWpDRDs7SUFRSSxxQkFBb0IsRUFDckI7RUFUSDtJQVlJLGFBQVksRUFvQmI7RUFoQ0g7TUFlTSxvQ0FBMkI7Y0FBM0IsNEJBQTJCO01DTi9CLG1CRE9pQztNQ0QvQixVRENxQztNQ29CckMsVURwQjZDLEVBQzVDO0VBakJMOztNQXFCTSxpQkFBZ0IsRUFDakI7RUF0Qkw7TUF5Qk0sMkNBQTBDO01BQzFDLGNBQWE7TUFDYiwrQkFBOEI7TUFDOUIsb0NBQTJCO2NBQTNCLDRCQUEyQjtNQUMzQixhQUFZO01DcEJoQixtQkRxQmlDO01DRC9CLFlEQ3dDO01DTXhDLFVETjRDLEVBQzNDO0VBSUw7RUFDRSxpQkFBZ0I7RUFDaEIsWUFBVyxFQUNaO0VBRUQ7RUFDRSxjQUFhO0VBQ2IsK0JBQThCO0VBQzlCLFlBQVcsRUFDWjtFQUVEO0VBQ0UsbUJBQWtCO0VBRWxCLFlBQVcsRUFDWjtFQUVEO0VBQ0UsdUJBQXNCO0VBQ3RCLGNBQWE7RUFDYiwrQkFBOEIsRUFNL0I7RUFURDtJQU9JLFlBQVcsRUFDWiIsImZpbGUiOiJzcmMvYXBwL2NvbXBvbmVudHMvbm9ybWFsLW5vZGUvbm9ybWFsLW5vZGUuY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyJAaW1wb3J0ICcuLi8uLi8uLi8uLi9wcm9qZWN0cy9mbG93LWJhc2VkL3NyYy9saWIvdXRpbHMvdXRpbHMnO1xuXG46aG9zdCB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gIGhlaWdodDogMTAwJTtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG5cbiAgaGVhZGVyIGJ1dHRvbixcbiAgZm9vdGVyIHtcbiAgICBwb2ludGVyLWV2ZW50czogYXV0bztcbiAgfVxuXG4gICYuaXMtZnVsbHNjcmVlbiB7XG4gICAgaGVpZ2h0OiAxMDAlO1xuXG4gICAgaGVhZGVyIHtcbiAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWCgtNTAlKTtcbiAgICAgIEBpbmNsdWRlIGZiLXBvc2l0aW9uKGFic29sdXRlLCAyMHB4IDAgMCA1MCUpO1xuICAgIH1cblxuICAgIGhlYWRlcixcbiAgICBmb290ZXIge1xuICAgICAgbWF4LXdpZHRoOiA1MDBweDtcbiAgICB9XG5cbiAgICBmb290ZXIge1xuICAgICAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjgpO1xuICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcbiAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWCgtNTAlKTtcbiAgICAgIHdpZHRoOiAzMDBweDtcbiAgICAgIEBpbmNsdWRlIGZiLXBvc2l0aW9uKGFic29sdXRlLCAwIDAgOHB4IDUwJSk7XG4gICAgfVxuICB9XG59XG5cbmZiLWVkaXQtbm9kZSB7XG4gIG1pbi13aWR0aDogMjAwcHg7XG4gIHotaW5kZXg6IDExO1xufVxuXG5oZWFkZXIgbWF0LXRvb2xiYXIge1xuICBkaXNwbGF5OiBmbGV4O1xuICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gIHdpZHRoOiAxMDAlO1xufVxuXG5oZWFkZXIge1xuICBhbGlnbi1zZWxmOiBjZW50ZXI7XG4gIC8vIG1heC13aWR0aDogNTAwcHg7XG4gIHdpZHRoOiAxMDAlO1xufVxuXG5mb290ZXIge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmO1xuICBkaXNwbGF5OiBmbGV4O1xuICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gIC8vIG1heC13aWR0aDogNTAwcHg7XG5cbiAgLmNsb3NlIHtcbiAgICBjb2xvcjogIzAwMDtcbiAgfVxufVxuXG4iLCJAbWl4aW4gZmItcG9zaXRpb24oJHBvc2l0aW9uOiByZWxhdGl2ZSwgJGNvb3JkaW5hdGVzOiAwIDAgMCAwKSB7XG4gIEBpZiB0eXBlLW9mKCRwb3NpdGlvbikgPT0gbGlzdCB7XG4gICAgJGNvb3JkaW5hdGVzOiAkcG9zaXRpb247XG4gICAgJHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgfVxuXG4gICR0b3A6IG50aCgkY29vcmRpbmF0ZXMsIDEpO1xuICAkcmlnaHQ6IG50aCgkY29vcmRpbmF0ZXMsIDIpO1xuICAkYm90dG9tOiBudGgoJGNvb3JkaW5hdGVzLCAzKTtcbiAgJGxlZnQ6IG50aCgkY29vcmRpbmF0ZXMsIDQpO1xuXG4gIHBvc2l0aW9uOiAkcG9zaXRpb247XG5cbiAgLy8gVG9wXG4gIEBpZiAkdG9wID09IGF1dG8ge1xuICAgIHRvcDogJHRvcDtcbiAgfSBAZWxzZSBpZiBub3QodW5pdGxlc3MoJHRvcCkpIHtcbiAgICB0b3A6ICR0b3A7XG4gIH1cblxuICAvLyBSaWdodFxuICBAaWYgJHJpZ2h0ID09IGF1dG8ge1xuICAgIHJpZ2h0OiAkcmlnaHQ7XG4gIH0gQGVsc2UgaWYgbm90KHVuaXRsZXNzKCRyaWdodCkpIHtcbiAgICByaWdodDogJHJpZ2h0O1xuICB9XG5cbiAgLy8gQm90dG9tXG4gIEBpZiAkYm90dG9tID09IGF1dG8ge1xuICAgIGJvdHRvbTogJGJvdHRvbTtcbiAgfSBAZWxzZSBpZiBub3QodW5pdGxlc3MoJGJvdHRvbSkpIHtcbiAgICBib3R0b206ICRib3R0b207XG4gIH1cblxuICAvLyBMZWZ0XG4gIEBpZiAkbGVmdCA9PSBhdXRvIHtcbiAgICBsZWZ0OiAkbGVmdDtcbiAgfSBAZWxzZSBpZiBub3QodW5pdGxlc3MoJGxlZnQpKSB7XG4gICAgbGVmdDogJGxlZnQ7XG4gIH1cbn1cblxuQG1peGluIHh4bC1zaXplKCR3aWR0aCwgJGhlaWdodDogJHdpZHRoKSB7XG4gIGhlaWdodDogJGhlaWdodDtcbiAgd2lkdGg6ICR3aWR0aDtcbn1cbiJdfQ== */\"","import { ChangeDetectorRef, Component, EventEmitter, HostBinding, Input, OnInit, Output, SimpleChanges } from '@angular/core';\nimport { NodeService } from '../../../../projects/flow-based/src/lib/node/node-service';\nimport { XxlFlowUnitState } from '../../../../projects/flow-based/src/lib/flow-based';\nimport { filter } from 'rxjs/operators';\n\n@Component({\n  selector: 'fb-normal-node',\n  templateUrl: './normal-node.component.html',\n  styleUrls: ['./normal-node.component.scss']\n})\nexport class NormalNodeComponent implements OnInit {\n  private state: XxlFlowUnitState;\n  private lastClicked;\n\n  isEditing = false;\n\n  @Input() fullscreen = false;\n  @Input() deleteSocket = false;\n  @Input() label: string;\n  @Input() @HostBinding('class.is-active') isActive = false;\n\n  @Output() edit = new EventEmitter<boolean>();\n  @Output() maxSize = new EventEmitter<boolean>();\n  @Output() active = new EventEmitter<boolean>();\n\n  @HostBinding('class.is-fullscreen') isFullscreen = false;\n\n  constructor(private cdr: ChangeDetectorRef,\n              private service: NodeService) {\n    this.state = service.state;\n  }\n\n  ngOnInit() {\n    this.service.closeOnDoubleClick(() => this.onClose());\n\n    this.service.nodeClicked$.pipe(\n      filter(e => !(e.target as HTMLElement).closest('button'))\n    ).subscribe((e) => {\n      if (this.isActive) {\n        this.isActive = Date.now() - (this.lastClicked || 0) < 300 ? false : true;\n        this.lastClicked = Date.now();\n      } else {\n        this.isActive = true;\n        this.isFullscreen = this.fullscreen;\n\n        this.maxSize.emit(this.fullscreen);\n        this.service.hideLabel();\n\n        if (this.fullscreen) {\n          this.service.closeOnBlur(() => this.onClose());\n          this.service.setMaxSize(true);\n        }\n\n        setTimeout(() => {\n          this.active.emit(this.isActive);\n        });\n      }\n\n      this.service.state.config.expanded = this.isActive;\n      this.service.calibrate();\n\n    });\n\n    if (!this.isActive) {\n      this.isActive = this.service.state.config.expanded;\n    }\n\n    if (this.isActive) {\n      this.isFullscreen = this.fullscreen;\n\n      this.maxSize.emit(this.fullscreen);\n      this.service.hideLabel();\n\n      if (this.fullscreen) {\n        this.service.closeOnBlur(() => this.onClose());\n        this.service.setMaxSize(true);\n      }\n\n      setTimeout(() => {\n        this.active.emit(this.isActive);\n      });\n    }\n  }\n\n  onDelete(): void {\n    this.service.deleteSelf();\n  }\n\n  onEdit(): void {\n    this.isEditing = true;\n\n    this.isFullscreen = true;\n    if (!this.fullscreen) {\n      this.service.setMaxSize(true);\n    }\n\n    this.service.closeOnBlur(() => this.onClose());\n    this.edit.emit(true);\n  }\n\n  onClose(): void {\n    if (this.isEditing) {\n      this.isEditing = false;\n      this.edit.emit(false);\n\n      if (!this.fullscreen) {\n        this.isFullscreen = false;\n        this.service.setMaxSize(false);\n        this.maxSize.emit(false);\n      }\n    } else {\n      this.service.unregisterAll();\n      this.service.state.config.expanded = this.isActive = false;\n      this.service.showLabel();\n      this.service.setMaxSize(false);\n      this.maxSize.emit(false);\n    }\n\n    this.cdr.detectChanges();\n    this.service.calibrate();\n  }\n\n  get title(): string {\n    return this.label || this.state.title || '';\n  }\n}\n","module.exports = \"<nav class=\\\"menu\\\">\\n  <input [ngModel]=\\\"open\\\" (ngModelChange)=\\\"toggle($event)\\\" type=\\\"checkbox\\\" href=\\\"#\\\" class=\\\"menu-open\\\" name=\\\"menu-open\\\"\\n         id=\\\"menu-open\\\"/>\\n  <label class=\\\"menu-open-button\\\" for=\\\"menu-open\\\">\\n    <span class=\\\"hamburger hamburger-1\\\"></span>\\n    <span class=\\\"hamburger hamburger-2\\\"></span>\\n    <span class=\\\"hamburger hamburger-3\\\"></span>\\n  </label>\\n\\n  <a (click)=\\\"add('display')\\\" href=\\\"#\\\" class=\\\"menu-item\\\"> <i class=\\\"fas fa-chart-line\\\"></i> </a>\\n  <a (click)=\\\"add('filter')\\\" href=\\\"#\\\" class=\\\"menu-item\\\"> <i class=\\\"icon custom-filter\\\">\\n    <svg enable-background=\\\"new 0 0 128 128\\\" height=\\\"128px\\\" id=\\\"Layer_1\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 128 128\\\" width=\\\"128px\\\" xml:space=\\\"preserve\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\"><path d=\\\"M61.894,66.056H16.185c-1.104,0-2-0.896-2-2s0.896-2,2-2h45.709c1.104,0,2,0.896,2,2S62.998,66.056,61.894,66.056z\\\"/><path d=\\\"M111.907,66.056H87.655c-1.104,0-2-0.896-2-2s0.896-2,2-2h24.252c1.104,0,2,0.896,2,2S113.012,66.056,111.907,66.056z\\\"/><path d=\\\"M48.503,96.609H16.185c-1.104,0-2-0.896-2-2s0.896-2,2-2h32.318c1.104,0,2,0.896,2,2S49.607,96.609,48.503,96.609z\\\"/><path d=\\\"M111.907,96.609H74.774c-1.104,0-2-0.896-2-2s0.896-2,2-2h37.133c1.104,0,2,0.896,2,2S113.012,96.609,111.907,96.609z\\\"/><path d=\\\"M35.013,35.502H16.185c-1.104,0-2-0.896-2-2s0.896-2,2-2h18.828c1.104,0,2,0.896,2,2S36.117,35.502,35.013,35.502z\\\"/><path d=\\\"M111.907,35.502H60.776c-1.104,0-2-0.896-2-2s0.896-2,2-2h51.131c1.104,0,2,0.896,2,2S113.012,35.502,111.907,35.502z\\\"/><path d=\\\"M42.616,43.104c-5.295,0-9.604-4.309-9.604-9.604c0-5.295,4.309-9.603,9.604-9.603s9.604,4.308,9.604,9.603  C52.22,38.796,47.911,43.104,42.616,43.104z M42.616,27.897c-3.09,0-5.604,2.514-5.604,5.603c0,3.09,2.514,5.604,5.604,5.604  S48.22,36.59,48.22,33.5C48.22,30.411,45.706,27.897,42.616,27.897z\\\"/><path d=\\\"M56.106,104.215c-5.295,0-9.604-4.309-9.604-9.605c0-5.295,4.309-9.604,9.604-9.604c5.297,0,9.605,4.309,9.605,9.604  C65.712,99.906,61.403,104.215,56.106,104.215z M56.106,89.006c-3.09,0-5.604,2.514-5.604,5.604c0,3.092,2.514,5.605,5.604,5.605  c3.091,0,5.605-2.514,5.605-5.605C61.712,91.52,59.197,89.006,56.106,89.006z\\\"/><path d=\\\"M69.501,73.661c-5.298,0-9.607-4.31-9.607-9.605c0-5.295,4.31-9.604,9.607-9.604c5.294,0,9.602,4.308,9.602,9.604  C79.103,69.352,74.795,73.661,69.501,73.661z M69.501,58.452c-3.092,0-5.607,2.514-5.607,5.604c0,3.091,2.516,5.605,5.607,5.605  c3.089,0,5.602-2.515,5.602-5.605C75.103,60.966,72.59,58.452,69.501,58.452z\\\"/></svg>\\n  </i> </a>\\n  <a (click)=\\\"add('source')\\\" href=\\\"#\\\" class=\\\"menu-item\\\"> <i class=\\\"fas fa-database\\\"> </i> </a>\\n  <a href=\\\"#\\\" class=\\\"menu-item\\\"> <i class=\\\"far fa-envelope\\\"></i> </a>\\n  <a href=\\\"#\\\" class=\\\"menu-item\\\"> <i class=\\\"far fa-cog\\\"></i> </a>\\n</nav>\\n\\n\\n<!-- filters -->\\n<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" version=\\\"1.1\\\">\\n  <defs>\\n    <filter id=\\\"shadowed-goo\\\">\\n\\n      <feGaussianBlur in=\\\"SourceGraphic\\\" result=\\\"blur\\\" stdDeviation=\\\"10\\\"/>\\n      <feColorMatrix in=\\\"blur\\\" mode=\\\"matrix\\\" values=\\\"1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 18 -7\\\" result=\\\"goo\\\"/>\\n      <feGaussianBlur in=\\\"goo\\\" stdDeviation=\\\"3\\\" result=\\\"shadow\\\"/>\\n      <feColorMatrix in=\\\"shadow\\\" mode=\\\"matrix\\\" values=\\\"0 0 0 0 0  0 0 0 0 0  0 0 0 0 0  0 0 0 1 -0.2\\\" result=\\\"shadow\\\"/>\\n      <feOffset in=\\\"shadow\\\" dx=\\\"1\\\" dy=\\\"1\\\" result=\\\"shadow\\\"/>\\n      <feBlend in2=\\\"shadow\\\" in=\\\"goo\\\" result=\\\"goo\\\"/>\\n      <feBlend in2=\\\"goo\\\" in=\\\"SourceGraphic\\\" result=\\\"mix\\\"/>\\n    </filter>\\n    <filter id=\\\"goo\\\">\\n      <feGaussianBlur in=\\\"SourceGraphic\\\" result=\\\"blur\\\" stdDeviation=\\\"10\\\"/>\\n      <feColorMatrix in=\\\"blur\\\" mode=\\\"matrix\\\" values=\\\"1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 18 -7\\\" result=\\\"goo\\\"/>\\n      <feBlend in2=\\\"goo\\\" in=\\\"SourceGraphic\\\" result=\\\"mix\\\"/>\\n    </filter>\\n  </defs>\\n</svg>\\n\\n<div class=\\\"test\\\"></div>\\n\"","module.exports = \":host {\\n  -webkit-transform: translate(-150px, -55px);\\n          transform: translate(-150px, -55px); }\\n\\n.menu {\\n  -webkit-filter: url(\\\"#shadowed-goo\\\");\\n          filter: url(\\\"#shadowed-goo\\\"); }\\n\\n.menu-item, .menu-open-button {\\n  align-items: center;\\n  background: #ff4081;\\n  border-radius: 100%;\\n  color: #fff;\\n  display: flex;\\n  height: 80px;\\n  justify-content: center;\\n  line-height: 80px;\\n  margin-left: -40px;\\n  position: absolute;\\n  text-align: center;\\n  top: 20px;\\n  -webkit-transform: translate3d(0, 0, 0);\\n          transform: translate3d(0, 0, 0);\\n  transition: -webkit-transform ease-out 200ms;\\n  transition: transform ease-out 200ms;\\n  transition: transform ease-out 200ms, -webkit-transform ease-out 200ms;\\n  width: 80px; }\\n\\n.menu-open {\\n  display: none; }\\n\\n.hamburger {\\n  background: #fff;\\n  display: block;\\n  height: 3px;\\n  left: 50%;\\n  margin-left: -12.5px;\\n  margin-top: -1.5px;\\n  position: absolute;\\n  top: 50%;\\n  transition: -webkit-transform 200ms;\\n  transition: transform 200ms;\\n  transition: transform 200ms, -webkit-transform 200ms;\\n  width: 25px; }\\n\\n.hamburger-1 {\\n  -webkit-transform: translate3d(0, -8px, 0);\\n          transform: translate3d(0, -8px, 0); }\\n\\n.hamburger-2 {\\n  -webkit-transform: translate3d(0, 0, 0);\\n          transform: translate3d(0, 0, 0); }\\n\\n.hamburger-3 {\\n  -webkit-transform: translate3d(0, 8px, 0);\\n          transform: translate3d(0, 8px, 0); }\\n\\n.menu {\\n  box-sizing: border-box;\\n  font-size: 20px;\\n  height: 250px;\\n  left: 50%;\\n  margin-left: -190px;\\n  padding-left: 190px;\\n  padding-top: 20px;\\n  position: absolute;\\n  text-align: left;\\n  width: 380px; }\\n\\n.menu-item:hover {\\n  background: #fff;\\n  color: #ff4081; }\\n\\n.menu-item:nth-child(3) {\\n  transition-duration: 70ms; }\\n\\n.menu-item:nth-child(4) {\\n  transition-duration: 130ms; }\\n\\n.menu-item:nth-child(5) {\\n  transition-duration: 190ms; }\\n\\n.menu-item:nth-child(6) {\\n  transition-duration: 250ms; }\\n\\n.menu-item:nth-child(7) {\\n  transition-duration: 310ms; }\\n\\n.menu-open-button {\\n  cursor: pointer;\\n  -webkit-transform: scale(1.1, 1.1) translate3d(0, 0, 0);\\n          transform: scale(1.1, 1.1) translate3d(0, 0, 0);\\n  transition-duration: 400ms;\\n  transition-timing-function: cubic-bezier(0.175, 0.885, 0.32, 1.275);\\n  z-index: 2; }\\n\\n.menu-open-button:hover {\\n  -webkit-transform: scale(1.2, 1.2) translate3d(0, 0, 0);\\n          transform: scale(1.2, 1.2) translate3d(0, 0, 0); }\\n\\n.menu-open:checked + .menu-open-button {\\n  -webkit-transform: scale(0.8, 0.8) translate3d(0, 0, 0);\\n          transform: scale(0.8, 0.8) translate3d(0, 0, 0);\\n  transition-duration: 200ms;\\n  transition-timing-function: linear; }\\n\\n.menu-open:checked + .menu-open-button .hamburger-1 {\\n    -webkit-transform: translate3d(0, 0, 0) rotate(45deg);\\n            transform: translate3d(0, 0, 0) rotate(45deg); }\\n\\n.menu-open:checked + .menu-open-button .hamburger-2 {\\n    -webkit-transform: translate3d(0, 0, 0) scale(0.1, 1);\\n            transform: translate3d(0, 0, 0) scale(0.1, 1); }\\n\\n.menu-open:checked + .menu-open-button .hamburger-3 {\\n    -webkit-transform: translate3d(0, 0, 0) rotate(-45deg);\\n            transform: translate3d(0, 0, 0) rotate(-45deg); }\\n\\n.menu-open:checked ~ .menu-item {\\n  transition-timing-function: cubic-bezier(0.935, 0, 0.34, 1.33); }\\n\\n.menu-open:checked ~ .menu-item:nth-child(3) {\\n    -webkit-transform: translate3d(114.42547901px, 11.48084291px, 0);\\n            transform: translate3d(114.42547901px, 11.48084291px, 0);\\n    transition-duration: 160ms; }\\n\\n.menu-open:checked ~ .menu-item:nth-child(4) {\\n    -webkit-transform: translate3d(77.18543351px, 85.24909885px, 0);\\n            transform: translate3d(77.18543351px, 85.24909885px, 0);\\n    transition-duration: 240ms; }\\n\\n.menu-open:checked ~ .menu-item:nth-child(5) {\\n    -webkit-transform: translate3d(0.09157757px, 114.99996354px, 0);\\n            transform: translate3d(0.09157757px, 114.99996354px, 0);\\n    transition-duration: 320ms; }\\n\\n.menu-open:checked ~ .menu-item:nth-child(6) {\\n    -webkit-transform: translate3d(-77.04956339px, 85.37192034px, 0);\\n            transform: translate3d(-77.04956339px, 85.37192034px, 0);\\n    transition-duration: 400ms; }\\n\\n.menu-open:checked ~ .menu-item:nth-child(7) {\\n    -webkit-transform: translate3d(-114.40704888px, 11.66306843px, 0);\\n            transform: translate3d(-114.40704888px, 11.66306843px, 0);\\n    transition-duration: 480ms; }\\n\\n.custom-filter {\\n  align-items: center;\\n  display: flex;\\n  justify-content: center; }\\n\\n.custom-filter svg {\\n    fill: #fff;\\n    height: 40px;\\n    stroke: #fff;\\n    width: 40px; }\\n\\n.custom-filter svg:hover {\\n      fill: #ff4081;\\n      stroke: #ff4081; }\\n\\n.icon img {\\n  box-shadow: none;\\n  height: 40px;\\n  width: 40px; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9sdWNhc2NhbGplL1dlYnN0b3JtUHJvamVjdHMvZmxvdy1iYXNlZC9zcmMvYXBwL2NvbnRleHQtbWVudS9jb250ZXh0LW1lbnUuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBWUE7RUFDRSw0Q0FBbUM7VUFBbkMsb0NBQW1DLEVBQ3BDOztBQUVEO0VBQ0UscUNBQTRCO1VBQTVCLDZCQUE0QixFQUM3Qjs7QUFFRDtFQUNFLG9CQUFtQjtFQUNuQixvQkFuQlU7RUFvQlYsb0JBQW1CO0VBQ25CLFlBQVc7RUFDWCxjQUFhO0VBQ2IsYUFBWTtFQUNaLHdCQUF1QjtFQUV2QixrQkFBaUI7RUFDakIsbUJBQWtCO0VBQ2xCLG1CQUFrQjtFQUNsQixtQkFBa0I7RUFDbEIsVUFBUztFQUNULHdDQUErQjtVQUEvQixnQ0FBK0I7RUFDL0IsNkNBQW9DO0VBQXBDLHFDQUFvQztFQUFwQyx1RUFBb0M7RUFDcEMsWUFBVyxFQUNaOztBQUVEO0VBQ0UsY0FBYSxFQUNkOztBQUVEO0VBR0UsaUJBQWdCO0VBQ2hCLGVBQWM7RUFDZCxZQUhZO0VBSVosVUFBUztFQUNULHFCQUFzQjtFQUN0QixtQkFBc0I7RUFDdEIsbUJBQWtCO0VBQ2xCLFNBQVE7RUFDUixvQ0FBMkI7RUFBM0IsNEJBQTJCO0VBQTNCLHFEQUEyQjtFQUMzQixZQVhZLEVBWWI7O0FBSUQ7RUFDRSwyQ0FBaUQ7VUFBakQsbUNBQWlELEVBQ2xEOztBQUVEO0VBQ0Usd0NBQStCO1VBQS9CLGdDQUErQixFQUNoQzs7QUFFRDtFQUNFLDBDQUFnRDtVQUFoRCxrQ0FBZ0QsRUFDakQ7O0FBRUQ7RUFJRSx1QkFBc0I7RUFDdEIsZ0JBQWU7RUFDZixjQUhjO0VBSWQsVUFBUztFQUNULG9CQUFzQjtFQUN0QixvQkFBc0I7RUFDdEIsa0JBQWlCO0VBQ2pCLG1CQUFrQjtFQUNsQixpQkFBZ0I7RUFDaEIsYUFYYSxFQVlkOztBQUVEO0VBSUksaUJBQWdCO0VBQ2hCLGVBMUZRLEVBMkZUOztBQU5IO0VBU00sMEJBQXFDLEVBQ3RDOztBQVZMO0VBU00sMkJBQXFDLEVBQ3RDOztBQVZMO0VBU00sMkJBQXFDLEVBQ3RDOztBQVZMO0VBU00sMkJBQXFDLEVBQ3RDOztBQVZMO0VBU00sMkJBQXFDLEVBQ3RDOztBQUlMO0VBRUUsZ0JBQWU7RUFDZix3REFBK0M7VUFBL0MsZ0RBQStDO0VBQy9DLDJCQUEwQjtFQUMxQixvRUFBbUU7RUFDbkUsV0FBVSxFQUNYOztBQUVEO0VBQ0Usd0RBQStDO1VBQS9DLGdEQUErQyxFQUNoRDs7QUFFRDtFQWFFLHdEQUErQztVQUEvQyxnREFBK0M7RUFDL0MsMkJBQTBCO0VBQzFCLG1DQUFrQyxFQUNuQzs7QUFoQkQ7SUFFSSxzREFBNkM7WUFBN0MsOENBQTZDLEVBQzlDOztBQUhIO0lBTUksc0RBQTZDO1lBQTdDLDhDQUE2QyxFQUM5Qzs7QUFQSDtJQVVJLHVEQUE4QztZQUE5QywrQ0FBOEMsRUFDL0M7O0FBT0g7RUFDRSwrREFBOEQsRUFZL0Q7O0FBYkQ7SUFTTSxpRUFBdUU7WUFBdkUseURBQXVFO0lBQ3ZFLDJCQUFtQyxFQUNwQzs7QUFYTDtJQVNNLGdFQUF1RTtZQUF2RSx3REFBdUU7SUFDdkUsMkJBQW1DLEVBQ3BDOztBQVhMO0lBU00sZ0VBQXVFO1lBQXZFLHdEQUF1RTtJQUN2RSwyQkFBbUMsRUFDcEM7O0FBWEw7SUFTTSxpRUFBdUU7WUFBdkUseURBQXVFO0lBQ3ZFLDJCQUFtQyxFQUNwQzs7QUFYTDtJQVNNLGtFQUF1RTtZQUF2RSwwREFBdUU7SUFDdkUsMkJBQW1DLEVBQ3BDOztBQUtMO0VBQ0Usb0JBQW1CO0VBQ25CLGNBQWE7RUFDYix3QkFBdUIsRUFjeEI7O0FBakJEO0lBTUksV0FBVTtJQUNWLGFBQVk7SUFDWixhQUFZO0lBQ1osWUFBVyxFQU1aOztBQWZIO01BWU0sY0FBYTtNQUNiLGdCQUFlLEVBQ2hCOztBQUtMO0VBRUksaUJBQWdCO0VBQ2hCLGFBQVk7RUFDWixZQUFXLEVBQ1oiLCJmaWxlIjoic3JjL2FwcC9jb250ZXh0LW1lbnUvY29udGV4dC1tZW51LmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiQGltcG9ydCAndXRpbHMnO1xuXG4vL3ZhcnNcbiRmZzogI2ZmNDA4MTtcbiRiZzogIzNmNTFiNTtcbiRwaTogMy4xNDtcblxuLy9jb25maWdcbiRtZW51LWl0ZW1zOiA1O1xuJG9wZW4tZGlzdGFuY2U6IDExNXB4O1xuJG9wZW5pbmctYW5nbGU6ICRwaSAtIDAuMjtcblxuOmhvc3Qge1xuICB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgtMTUwcHgsIC01NXB4KTtcbn1cblxuJWdvbyB7XG4gIGZpbHRlcjogdXJsKCcjc2hhZG93ZWQtZ29vJyk7XG59XG5cbiViYWxsIHtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgYmFja2dyb3VuZDogJGZnO1xuICBib3JkZXItcmFkaXVzOiAxMDAlO1xuICBjb2xvcjogI2ZmZjtcbiAgZGlzcGxheTogZmxleDtcbiAgaGVpZ2h0OiA4MHB4O1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcblxuICBsaW5lLWhlaWdodDogODBweDtcbiAgbWFyZ2luLWxlZnQ6IC00MHB4O1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgdG9wOiAyMHB4O1xuICB0cmFuc2Zvcm06IHRyYW5zbGF0ZTNkKDAsIDAsIDApO1xuICB0cmFuc2l0aW9uOiB0cmFuc2Zvcm0gZWFzZS1vdXQgMjAwbXM7XG4gIHdpZHRoOiA4MHB4O1xufVxuXG4ubWVudS1vcGVuIHtcbiAgZGlzcGxheTogbm9uZTtcbn1cblxuLmhhbWJ1cmdlciB7XG4gICR3aWR0aDogMjVweDtcbiAgJGhlaWdodDogM3B4O1xuICBiYWNrZ3JvdW5kOiAjZmZmO1xuICBkaXNwbGF5OiBibG9jaztcbiAgaGVpZ2h0OiAkaGVpZ2h0O1xuICBsZWZ0OiA1MCU7XG4gIG1hcmdpbi1sZWZ0OiAtJHdpZHRoLzI7XG4gIG1hcmdpbi10b3A6IC0kaGVpZ2h0LzI7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgdG9wOiA1MCU7XG4gIHRyYW5zaXRpb246IHRyYW5zZm9ybSAyMDBtcztcbiAgd2lkdGg6ICR3aWR0aDtcbn1cblxuJGhhbWJ1cmdlci1zcGFjaW5nOiA4cHg7XG5cbi5oYW1idXJnZXItMSB7XG4gIHRyYW5zZm9ybTogdHJhbnNsYXRlM2QoMCwgLSRoYW1idXJnZXItc3BhY2luZywgMCk7XG59XG5cbi5oYW1idXJnZXItMiB7XG4gIHRyYW5zZm9ybTogdHJhbnNsYXRlM2QoMCwgMCwgMCk7XG59XG5cbi5oYW1idXJnZXItMyB7XG4gIHRyYW5zZm9ybTogdHJhbnNsYXRlM2QoMCwgJGhhbWJ1cmdlci1zcGFjaW5nLCAwKTtcbn1cblxuLm1lbnUge1xuICBAZXh0ZW5kICVnb287XG4gICR3aWR0aDogMzgwcHg7XG4gICRoZWlnaHQ6IDI1MHB4O1xuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICBmb250LXNpemU6IDIwcHg7XG4gIGhlaWdodDogJGhlaWdodDtcbiAgbGVmdDogNTAlO1xuICBtYXJnaW4tbGVmdDogLSR3aWR0aC8yO1xuICBwYWRkaW5nLWxlZnQ6ICR3aWR0aC8yO1xuICBwYWRkaW5nLXRvcDogMjBweDtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICB0ZXh0LWFsaWduOiBsZWZ0O1xuICB3aWR0aDogJHdpZHRoO1xufVxuXG4ubWVudS1pdGVtIHtcbiAgQGV4dGVuZCAlYmFsbDtcblxuICAmOmhvdmVyIHtcbiAgICBiYWNrZ3JvdW5kOiAjZmZmO1xuICAgIGNvbG9yOiAkZmc7XG4gIH1cbiAgQGZvciAkaSBmcm9tIDEgdGhyb3VnaCAkbWVudS1pdGVtcyB7XG4gICAgJjpudGgtY2hpbGQoI3skaSsyfSkge1xuICAgICAgdHJhbnNpdGlvbi1kdXJhdGlvbjogMTBtcysoNjBtcyooJGkpKTtcbiAgICB9XG4gIH1cbn1cblxuLm1lbnUtb3Blbi1idXR0b24ge1xuICBAZXh0ZW5kICViYWxsO1xuICBjdXJzb3I6IHBvaW50ZXI7XG4gIHRyYW5zZm9ybTogc2NhbGUoMS4xLCAxLjEpIHRyYW5zbGF0ZTNkKDAsIDAsIDApO1xuICB0cmFuc2l0aW9uLWR1cmF0aW9uOiA0MDBtcztcbiAgdHJhbnNpdGlvbi10aW1pbmctZnVuY3Rpb246IGN1YmljLWJlemllcigwLjE3NSwgMC44ODUsIDAuMzIsIDEuMjc1KTtcbiAgei1pbmRleDogMjtcbn1cblxuLm1lbnUtb3Blbi1idXR0b246aG92ZXIge1xuICB0cmFuc2Zvcm06IHNjYWxlKDEuMiwgMS4yKSB0cmFuc2xhdGUzZCgwLCAwLCAwKTtcbn1cblxuLm1lbnUtb3BlbjpjaGVja2VkICsgLm1lbnUtb3Blbi1idXR0b24ge1xuICAuaGFtYnVyZ2VyLTEge1xuICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlM2QoMCwgMCwgMCkgcm90YXRlKDQ1ZGVnKTtcbiAgfVxuXG4gIC5oYW1idXJnZXItMiB7XG4gICAgdHJhbnNmb3JtOiB0cmFuc2xhdGUzZCgwLCAwLCAwKSBzY2FsZSgwLjEsIDEpO1xuICB9XG5cbiAgLmhhbWJ1cmdlci0zIHtcbiAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZTNkKDAsIDAsIDApIHJvdGF0ZSgtNDVkZWcpO1xuICB9XG5cbiAgdHJhbnNmb3JtOiBzY2FsZSgwLjgsIDAuOCkgdHJhbnNsYXRlM2QoMCwgMCwgMCk7XG4gIHRyYW5zaXRpb24tZHVyYXRpb246IDIwMG1zO1xuICB0cmFuc2l0aW9uLXRpbWluZy1mdW5jdGlvbjogbGluZWFyO1xufVxuXG4ubWVudS1vcGVuOmNoZWNrZWQgfiAubWVudS1pdGVtIHtcbiAgdHJhbnNpdGlvbi10aW1pbmctZnVuY3Rpb246IGN1YmljLWJlemllcigwLjkzNSwgMCwgMC4zNCwgMS4zMyk7XG4gIEBmb3IgJGkgZnJvbSAxIHRocm91Z2ggJG1lbnUtaXRlbXMge1xuICAgICRhbmdsZTogKCgkcGkgLSAkb3BlbmluZy1hbmdsZSkvMikrKCgkb3BlbmluZy1hbmdsZS8oJG1lbnUtaXRlbXMgLSAxKSkqKCRpIC0gMSkpO1xuXG4gICAgJjpudGgtY2hpbGQoI3skaSsyfSkge1xuXG4gICAgICAkY29zOiBjb3MoJGFuZ2xlKTtcbiAgICAgICRzaW46IHNpbigkYW5nbGUpO1xuICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGUzZCgkY29zICogJG9wZW4tZGlzdGFuY2UsICRzaW4gKiAkb3Blbi1kaXN0YW5jZSwgMCk7XG4gICAgICB0cmFuc2l0aW9uLWR1cmF0aW9uOiA4MG1zKyg4MG1zKiRpKTtcbiAgICB9XG4gIH1cbn1cblxuLy8gY3VzdG9tXG4uY3VzdG9tLWZpbHRlciB7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuXG4gIHN2ZyB7XG4gICAgZmlsbDogI2ZmZjtcbiAgICBoZWlnaHQ6IDQwcHg7XG4gICAgc3Ryb2tlOiAjZmZmO1xuICAgIHdpZHRoOiA0MHB4O1xuXG4gICAgJjpob3ZlciB7XG4gICAgICBmaWxsOiAjZmY0MDgxO1xuICAgICAgc3Ryb2tlOiAjZmY0MDgxO1xuICAgIH1cbiAgfVxuXG59XG5cbi5pY29uIHtcbiAgaW1nIHtcbiAgICBib3gtc2hhZG93OiBub25lO1xuICAgIGhlaWdodDogNDBweDtcbiAgICB3aWR0aDogNDBweDtcbiAgfVxufVxuIl19 */\"","import {Component, ElementRef, EventEmitter, HostListener, Input, OnInit, Output, ViewChild} from '@angular/core';\n\n// https://codepen.io/lbebber/pen/LELBEo\n\n@Component({\n  selector: 'fb-context-menu',\n  templateUrl: './context-menu.component.html',\n  styleUrls: ['./context-menu.component.scss']\n})\nexport class ContextMenuComponent implements OnInit {\n  @Input() open = false;\n  @Output() close = new EventEmitter<string | void>();\n\n  constructor() { }\n\n  ngOnInit() {\n  }\n\n  @HostListener('click', ['$event']) onMouseDown(event): void {\n    event.stopPropagation();\n  }\n\n  toggle(checked): void {\n    setTimeout(() => {\n      this.close.emit();\n    }, 200);\n  }\n\n  add(type: string): void {\n    this.close.emit(type);\n  }\n}\n","import { RandomNumbersComponent } from './nodes/random-numbers/random-numbers.component';\nimport { RANDOM_NUMBER_SETTINGS, RandomNumbersWorker } from './workers/random-numbers';\nimport { StatsComponent } from './nodes/stats/stats.component';\nimport { STATS_SETTINGS, StatsWorker } from './workers/stats';\nimport { BasicGraphComponent } from './nodes/basic-graph/basic-graph.component';\nimport { BASIC_GRAPH_CONFIG, BasicGraphWorker } from './workers/basic-graph';\nimport { MergeStreamsComponent } from './nodes/merge-streams/merge-streams.component';\nimport { MERGE_STREAMS_SETTINGS, MergeStreamsWorker } from './workers/merge-streams';\nimport { TapComponent } from './nodes/tap/tap.component';\nimport { TAP_SETTINGS, TapWorker } from './workers/tap';\nimport { DefaultFlowComponent } from './nodes/default-flow/default-flow.component';\nimport { CustomCodeComponent } from './nodes/custom-code/custom-code.component';\nimport { CUSTOM_CODE_SETTINGS, CustomCodeWorker } from './workers/custom-code';\nimport { FractalComponent } from './nodes/fractal/fractal.component';\nimport { FRACTALS_SETTINGS, FractalsWorker } from './workers/fractals';\nimport { ZOOM_CANVAS_SETTINGS, ZoomCanvasWorker } from './workers/zoom-canvas';\nimport { ZoomCanvasComponent } from './nodes/zoom-canvas/zoom-canvas.component';\nimport { CanvasComponent } from './nodes/canvas/canvas.component';\nimport { CANVAS_SETTINGS, CanvasWorker } from './workers/canvas';\n\nexport const FB_CONFIG = {\n  'random-numbers': {component: RandomNumbersComponent, settings: RANDOM_NUMBER_SETTINGS, worker: RandomNumbersWorker},\n  'stats': {component: StatsComponent, settings: STATS_SETTINGS, worker: StatsWorker},\n  'basic-graph': {component: BasicGraphComponent, settings: BASIC_GRAPH_CONFIG, worker: BasicGraphWorker},\n  'merge-streams': {component: MergeStreamsComponent, settings: MERGE_STREAMS_SETTINGS, worker: MergeStreamsWorker},\n  'tap': {component: TapComponent, settings: TAP_SETTINGS, worker: TapWorker},\n  'custom': {component: CustomCodeComponent, settings: CUSTOM_CODE_SETTINGS, worker: CustomCodeWorker},\n  'fractals': {component: FractalComponent, settings: FRACTALS_SETTINGS, worker: FractalsWorker},\n  'zoomcanvas': {component: ZoomCanvasComponent, settings: ZOOM_CANVAS_SETTINGS, worker: ZoomCanvasWorker},\n  'canvas': {component: CanvasComponent, settings: CANVAS_SETTINGS, worker: CanvasWorker},\n  'flow': {component: DefaultFlowComponent, settings: {title: 'Composite Unit', isFlow: true}}\n};\n\nexport const PIXEL_RATIO_SCALE = window.devicePixelRatio > 1.5 ? 2 : 1;\n\nexport const XXL_SOCKET_COLORS = {\n  'number': '#025d04',\n  'worker': '#c1a',\n  'dimension': '#bebebe',\n  'point': '#9988cf'\n};\n\nexport interface IDimensions {\n  x?: number;\n  y?: number;\n  xMin: number;\n  yMin: number;\n  xMax: number;\n  yMax: number;\n  width?: number;\n  height?: number;\n}\n\nexport interface IZoomable {\n  metadata: {\n    label: string;\n    dimensions: IDimensions;\n  };\n  imageData: ImageData;\n}\n\nexport interface IWorker {\n  label: string;\n  defaults?: IDimensions;\n  worker: Worker;\n}\n","export const basic =\n  {\n    \"id\": 1546340247802,\n    \"children\": [\n      {\n        \"type\": \"fractals\",\n        \"title\": \"Fractals\",\n        \"id\": 1546340247803,\n        \"config\": {\n          \"selected\": \"mandelbrod\"\n        },\n        \"sockets\": [\n          {\n            \"id\": 1546340247804,\n            \"type\": \"in\",\n            \"format\": \"dimension\"\n          },\n          {\n            \"id\": 1546340247805,\n            \"type\": \"out\",\n            \"format\": \"imageData\"\n          }\n        ],\n        \"position\": {\n          \"x\": 6.938883463541668,\n          \"y\": 17.676657527417746\n        }\n      },\n      {\n        \"type\": \"zoomcanvas\",\n        \"title\": \"Zoomable canavs\",\n        \"id\": 1546340247806,\n        \"config\": {\n          \"expanded\": false\n        },\n        \"sockets\": [\n          {\n            \"id\": 1546340247807,\n            \"type\": \"in\",\n            \"format\": \"imageData\"\n          },\n          {\n            \"id\": 1546340247808,\n            \"type\": \"out\",\n            \"format\": \"dimension\"\n          }\n        ],\n        \"position\": {\n          \"x\": 36.52180989583334,\n          \"y\": 28.741509845463614\n        }\n      }\n    ],\n    \"connections\": [\n      {\n        \"from\": 1546340247806,\n        \"out\": 1546340247808,\n        \"to\": 1546340247803,\n        \"in\": 1546340247804,\n        \"id\": 1546374626401\n      },\n      {\n        \"from\": 1546340247803,\n        \"out\": 1546340247805,\n        \"to\": 1546340247806,\n        \"in\": 1546340247807,\n        \"id\": 1546340574657\n      }\n    ]\n  }\n","module.exports = \"<xxl-flow-based [state]=\\\"flow\\\"></xxl-flow-based>\\n\"","module.exports = \":host {\\n  flex: 1;\\n  position: relative; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9sdWNhc2NhbGplL1dlYnN0b3JtUHJvamVjdHMvZmxvdy1iYXNlZC9zcmMvYXBwL2Zsb3cvZmxvdy5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLFFBQU87RUFDUCxtQkFBa0IsRUFDbkIiLCJmaWxlIjoic3JjL2FwcC9mbG93L2Zsb3cuY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyI6aG9zdCB7XG4gIGZsZXg6IDE7XG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcbn1cbiJdfQ== */\"","import { Component, Input, OnInit } from '@angular/core';\nimport { XxlFlow } from '../../../projects/flow-based/src/lib/flow-based';\n\n@Component({\n  selector: 'fb-flow',\n  templateUrl: './flow.component.html',\n  styleUrls: ['./flow.component.scss'],\n  providers: []\n})\nexport class FlowComponent implements OnInit {\n  @Input() flow: XxlFlow;\n\n  constructor() { }\n\n  ngOnInit() {}\n}\n","import { FbNodeState, XxlSocket } from '../../projects/flow-based/src/lib/flow-based';\n\n// Only resetPosition socket which do not have initially a format\nexport const NODE_HELPERS = {\n  resetSockets(node: FbNodeState) {\n    if (node.type === 'tap') {\n      node.sockets!.forEach(s => delete s.format);\n    }\n  },\n\n  connect(outSocket: XxlSocket, inSocket: XxlSocket, fromNode: FbNodeState, toNode: FbNodeState): boolean {\n    let didChange = false;\n\n    // TODO: Get format from tab -> flow\n\n    if (fromNode.type === 'tap') {\n      if (!outSocket.format && inSocket.format) {\n        fromNode.sockets!.forEach(s => s.format = inSocket.format);\n        didChange = true;\n      } else if (!inSocket.format && outSocket.format) {\n        toNode.sockets!.forEach(s => s.format = outSocket.format);\n      }\n    } else if (toNode.type === 'tap') {\n      if (!inSocket.format && outSocket.format) {\n        toNode.sockets!.forEach(s => s.format = outSocket.format);\n        didChange = true;\n      } else {\n        if (!outSocket.format && inSocket.format) {\n          outSocket.format = inSocket.format;\n          didChange = true;\n        } else if (!inSocket.format && outSocket.format) {\n          inSocket.format = outSocket.format;\n          didChange = true;\n        }\n      }\n    }\n\n    return didChange;\n  }\n};\n","module.exports = \"<fb-normal-node [isActive]=\\\"true\\\">\\n  <div #graph class=\\\"chart\\\"></div>\\n</fb-normal-node>\\n\"","module.exports = \"fb-normal-node.is-active {\\n  min-height: 300px;\\n  min-width: 400px; }\\n\\nfb-normal-node.is-fullscreen .chart {\\n  height: 100%;\\n  width: 100%; }\\n\\n.chart {\\n  border-radius: 8px; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9sdWNhc2NhbGplL1dlYnN0b3JtUHJvamVjdHMvZmxvdy1iYXNlZC9zcmMvYXBwL25vZGVzL2Jhc2ljLWdyYXBoL2Jhc2ljLWdyYXBoLmNvbXBvbmVudC5zY3NzIiwiL1VzZXJzL2x1Y2FzY2FsamUvV2Vic3Rvcm1Qcm9qZWN0cy9mbG93LWJhc2VkL3Byb2plY3RzL2Zsb3ctYmFzZWQvc3JjL2xpYi91dGlscy9fdXRpbHMuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFLQTtFQUVJLGtCQUFpQjtFQUNqQixpQkFBZ0IsRUFDakI7O0FBSkg7RUNzQ0UsYUQ5QjBCO0VDK0IxQixZRC9CMEIsRUFDdkI7O0FBSUw7RUFDRSxtQkFBa0IsRUFDbkIiLCJmaWxlIjoic3JjL2FwcC9ub2Rlcy9iYXNpYy1ncmFwaC9iYXNpYy1ncmFwaC5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIkBpbXBvcnQgJy4vdXRpbHMvdXRpbHMnO1xuXG46aG9zdCB7XG59XG5cbmZiLW5vcm1hbC1ub2RlIHtcbiAgJi5pcy1hY3RpdmUge1xuICAgIG1pbi1oZWlnaHQ6IDMwMHB4O1xuICAgIG1pbi13aWR0aDogNDAwcHg7XG4gIH1cblxuICAmLmlzLWZ1bGxzY3JlZW4ge1xuICAgIC5jaGFydCB7XG4gICAgICBAaW5jbHVkZSB4eGwtc2l6ZSgxMDAlKTtcbiAgICB9XG4gIH1cbn1cblxuLmNoYXJ0IHtcbiAgYm9yZGVyLXJhZGl1czogOHB4O1xufVxuIiwiQG1peGluIGZiLXBvc2l0aW9uKCRwb3NpdGlvbjogcmVsYXRpdmUsICRjb29yZGluYXRlczogMCAwIDAgMCkge1xuICBAaWYgdHlwZS1vZigkcG9zaXRpb24pID09IGxpc3Qge1xuICAgICRjb29yZGluYXRlczogJHBvc2l0aW9uO1xuICAgICRwb3NpdGlvbjogcmVsYXRpdmU7XG4gIH1cblxuICAkdG9wOiBudGgoJGNvb3JkaW5hdGVzLCAxKTtcbiAgJHJpZ2h0OiBudGgoJGNvb3JkaW5hdGVzLCAyKTtcbiAgJGJvdHRvbTogbnRoKCRjb29yZGluYXRlcywgMyk7XG4gICRsZWZ0OiBudGgoJGNvb3JkaW5hdGVzLCA0KTtcblxuICBwb3NpdGlvbjogJHBvc2l0aW9uO1xuXG4gIC8vIFRvcFxuICBAaWYgJHRvcCA9PSBhdXRvIHtcbiAgICB0b3A6ICR0b3A7XG4gIH0gQGVsc2UgaWYgbm90KHVuaXRsZXNzKCR0b3ApKSB7XG4gICAgdG9wOiAkdG9wO1xuICB9XG5cbiAgLy8gUmlnaHRcbiAgQGlmICRyaWdodCA9PSBhdXRvIHtcbiAgICByaWdodDogJHJpZ2h0O1xuICB9IEBlbHNlIGlmIG5vdCh1bml0bGVzcygkcmlnaHQpKSB7XG4gICAgcmlnaHQ6ICRyaWdodDtcbiAgfVxuXG4gIC8vIEJvdHRvbVxuICBAaWYgJGJvdHRvbSA9PSBhdXRvIHtcbiAgICBib3R0b206ICRib3R0b207XG4gIH0gQGVsc2UgaWYgbm90KHVuaXRsZXNzKCRib3R0b20pKSB7XG4gICAgYm90dG9tOiAkYm90dG9tO1xuICB9XG5cbiAgLy8gTGVmdFxuICBAaWYgJGxlZnQgPT0gYXV0byB7XG4gICAgbGVmdDogJGxlZnQ7XG4gIH0gQGVsc2UgaWYgbm90KHVuaXRsZXNzKCRsZWZ0KSkge1xuICAgIGxlZnQ6ICRsZWZ0O1xuICB9XG59XG5cbkBtaXhpbiB4eGwtc2l6ZSgkd2lkdGgsICRoZWlnaHQ6ICR3aWR0aCkge1xuICBoZWlnaHQ6ICRoZWlnaHQ7XG4gIHdpZHRoOiAkd2lkdGg7XG59XG4iXX0= */\"","import { Component, ElementRef, Host, HostBinding, OnInit, ViewChild } from '@angular/core';\nimport { XxlSocket } from '../../../../projects/flow-based/src/lib/flow-based';\nimport { BasicGraphWorker } from '../../workers/basic-graph';\nimport { GoogleCharts } from 'google-charts';\nimport { NodeService } from '../../../../projects/flow-based/src/lib/node/node-service';\n\nconst GRAPH_OPTIONS = {\n  legend: 'bottom',\n  title: 'Data',\n  curveType: 'function',\n};\n\n@Component({\n  selector: 'fb-basic-graph',\n  templateUrl: './basic-graph.component.html',\n  styleUrls: ['./basic-graph.component.scss']\n})\nexport class BasicGraphComponent implements OnInit {\n  @HostBinding('class.is-active') isActive = false;\n  @ViewChild('graph') graph: ElementRef;\n  chart;\n  dataTable;\n  view;\n  worker: BasicGraphWorker;\n  startIndex = 0;\n\n\n  constructor(@Host() private service: NodeService) {\n  }\n\n  ngOnInit() {\n    GoogleCharts.load(() => {\n      this.chart = new GoogleCharts.api.visualization.LineChart(this.graph.nativeElement);\n    });\n\n    this.worker = this.service.worker as BasicGraphWorker;\n\n    this.worker.getStream().subscribe(val => this.update(this.worker.values));\n  }\n\n  update(values?: number[]): void {\n    if (values) {\n      if (this.dataTable && values.length === this.dataTable.getNumberOfRows()) {\n        this.startIndex++;\n      }\n      this.dataTable = new GoogleCharts.api.visualization.DataTable();\n      this.dataTable.addColumn('number', 'Count');\n      this.dataTable.addColumn('number', 'Values');\n      values.forEach((value, index) => {\n        this.dataTable.addRow([index + this.startIndex, value]);\n      });\n\n\n      this.view = new GoogleCharts.api.visualization.DataView(this.dataTable);\n    }\n\n    if (this.view) {\n      this.chart.draw(this.dataTable, GRAPH_OPTIONS);\n    }\n  }\n\n  setActive(state): void {\n    this.isActive = state;\n    setTimeout(() => {\n      this.update();\n    });\n  }\n\n\n  onDelete(): void {\n    this.service.deleteSelf();\n\n  }\n\n  onClose(): void {\n    // TODO\n  }\n\n  connected(localSocket: XxlSocket, removeSocket: XxlSocket): void {\n  }\n\n  getFormat(socket: XxlSocket): string {\n    return '';\n  }\n\n  disconnect(localSocket: XxlSocket, removeSocket: XxlSocket): void {\n  }\n}\n","module.exports = \"<fb-normal-node>\\n  <canvas #canvas></canvas>\\n</fb-normal-node>\\n\"","module.exports = \"canvas {\\n  height: 400px;\\n  width: 400px; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9sdWNhc2NhbGplL1dlYnN0b3JtUHJvamVjdHMvZmxvdy1iYXNlZC9zcmMvYXBwL25vZGVzL2NhbnZhcy9jYW52YXMuY29tcG9uZW50LnNjc3MiLCIvVXNlcnMvbHVjYXNjYWxqZS9XZWJzdG9ybVByb2plY3RzL2Zsb3ctYmFzZWQvcHJvamVjdHMvZmxvdy1iYXNlZC9zcmMvbGliL3V0aWxzL191dGlscy5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUVBO0VDeUNFLGNEeEN1QjtFQ3lDdkIsYUR6Q3VCLEVBQ3hCIiwiZmlsZSI6InNyYy9hcHAvbm9kZXMvY2FudmFzL2NhbnZhcy5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIkBpbXBvcnQgJy4uLy4uLy4uLy4uL3Byb2plY3RzL2Zsb3ctYmFzZWQvc3JjL2xpYi91dGlscy9fdXRpbHMuc2Nzcyc7XG5cbmNhbnZhcyB7XG4gIEBpbmNsdWRlIHh4bC1zaXplKDQwMHB4KTtcbn1cbiIsIkBtaXhpbiBmYi1wb3NpdGlvbigkcG9zaXRpb246IHJlbGF0aXZlLCAkY29vcmRpbmF0ZXM6IDAgMCAwIDApIHtcbiAgQGlmIHR5cGUtb2YoJHBvc2l0aW9uKSA9PSBsaXN0IHtcbiAgICAkY29vcmRpbmF0ZXM6ICRwb3NpdGlvbjtcbiAgICAkcG9zaXRpb246IHJlbGF0aXZlO1xuICB9XG5cbiAgJHRvcDogbnRoKCRjb29yZGluYXRlcywgMSk7XG4gICRyaWdodDogbnRoKCRjb29yZGluYXRlcywgMik7XG4gICRib3R0b206IG50aCgkY29vcmRpbmF0ZXMsIDMpO1xuICAkbGVmdDogbnRoKCRjb29yZGluYXRlcywgNCk7XG5cbiAgcG9zaXRpb246ICRwb3NpdGlvbjtcblxuICAvLyBUb3BcbiAgQGlmICR0b3AgPT0gYXV0byB7XG4gICAgdG9wOiAkdG9wO1xuICB9IEBlbHNlIGlmIG5vdCh1bml0bGVzcygkdG9wKSkge1xuICAgIHRvcDogJHRvcDtcbiAgfVxuXG4gIC8vIFJpZ2h0XG4gIEBpZiAkcmlnaHQgPT0gYXV0byB7XG4gICAgcmlnaHQ6ICRyaWdodDtcbiAgfSBAZWxzZSBpZiBub3QodW5pdGxlc3MoJHJpZ2h0KSkge1xuICAgIHJpZ2h0OiAkcmlnaHQ7XG4gIH1cblxuICAvLyBCb3R0b21cbiAgQGlmICRib3R0b20gPT0gYXV0byB7XG4gICAgYm90dG9tOiAkYm90dG9tO1xuICB9IEBlbHNlIGlmIG5vdCh1bml0bGVzcygkYm90dG9tKSkge1xuICAgIGJvdHRvbTogJGJvdHRvbTtcbiAgfVxuXG4gIC8vIExlZnRcbiAgQGlmICRsZWZ0ID09IGF1dG8ge1xuICAgIGxlZnQ6ICRsZWZ0O1xuICB9IEBlbHNlIGlmIG5vdCh1bml0bGVzcygkbGVmdCkpIHtcbiAgICBsZWZ0OiAkbGVmdDtcbiAgfVxufVxuXG5AbWl4aW4geHhsLXNpemUoJHdpZHRoLCAkaGVpZ2h0OiAkd2lkdGgpIHtcbiAgaGVpZ2h0OiAkaGVpZ2h0O1xuICB3aWR0aDogJHdpZHRoO1xufVxuIl19 */\"","import { AfterViewInit, Component, ElementRef, Host, OnInit, ViewChild } from '@angular/core';\nimport { NodeService } from '../../../../projects/flow-based/src/lib/node/node-service';\nimport { CanvasWorker } from '../../workers/canvas';\n\n@Component({\n  selector: 'fb-canvas',\n  templateUrl: './canvas.component.html',\n  styleUrls: ['./canvas.component.scss']\n})\nexport class CanvasComponent implements OnInit, AfterViewInit {\n  @ViewChild('canvas') canvas: ElementRef;\n\n  private worker: CanvasWorker;\n  private ctx;\n\n  constructor(@Host() private service: NodeService) { }\n\n  ngOnInit() {\n    this.worker = this.service.worker as CanvasWorker;\n  }\n\n  ngAfterViewInit(): void {\n    this.ctx = this.canvas.nativeElement.getContext('2d');\n\n    this.worker.imageData$.subscribe((pixels: ImageData) => {\n      if (pixels) {\n        this.canvas.nativeElement.width = 400;\n        this.canvas.nativeElement.height = 400;\n        this.ctx.putImageData(pixels, 0, 0);\n      }\n    });\n  }\n\n}\n","module.exports = \"<fb-normal-node (active)=\\\"onActive($event)\\\">\\n  <section class=\\\"minified\\\">\\n    <fb-default-front [title]=\\\"title\\\"></fb-default-front>\\n  </section>\\n\\n  <section class=\\\"expanded fb-drag-ignore\\\">\\n    <form class=\\\"format-form\\\">\\n      <mat-form-field class=\\\"example-full-width\\\">\\n        <input type=\\\"text\\\" placeholder=\\\"Input format\\\" aria-label=\\\"Number\\\" matInput [formControl]=\\\"inputFormatControl\\\" [matAutocomplete]=\\\"auto\\\">\\n        <mat-autocomplete #auto=\\\"matAutocomplete\\\">\\n          <mat-option *ngFor=\\\"let option of types\\\" [value]=\\\"option\\\">\\n            {{option}}\\n          </mat-option>\\n        </mat-autocomplete>\\n      </mat-form-field>\\n\\n      <mat-form-field class=\\\"example-full-width\\\">\\n        <input type=\\\"text\\\" placeholder=\\\"Output format\\\" aria-label=\\\"Number\\\" matInput [formControl]=\\\"outputFormatControl\\\" [matAutocomplete]=\\\"auto\\\">\\n        <mat-autocomplete #auto=\\\"matAutocomplete\\\">\\n          <mat-option *ngFor=\\\"let option of types\\\" [value]=\\\"option\\\">\\n            {{option}}\\n          </mat-option>\\n        </mat-autocomplete>\\n      </mat-form-field>\\n    </form>\\n\\n    <div #code class=\\\"code\\\" (change)=\\\"onKeyDown()\\\"></div>\\n    <div class=\\\"errors\\\">\\n      <span *ngIf=\\\"hasCompileError\\\">Could not compile the code</span>\\n      <span *ngIf=\\\"hasRuntimeError && !hasCompileError\\\">Runtime error occured</span>\\n      <span *ngIf=\\\"!hasCompileError && !hasRuntimeError\\\">&nbsp;</span>\\n    </div>\\n  </section>\\n</fb-normal-node>\\n\"","module.exports = \":host .expanded {\\n  background-color: #fff;\\n  display: flex;\\n  flex: 1;\\n  flex-direction: column;\\n  justify-content: center;\\n  padding: 10px 20px; }\\n\\n.format-form {\\n  display: flex;\\n  justify-content: space-between; }\\n\\n.code {\\n  width: 400px; }\\n\\n.errors {\\n  color: #f00;\\n  text-align: center; }\\n\\nfb-normal-node:not(.is-active) .expanded {\\n  display: none; }\\n\\nfb-normal-node.is-active .minified {\\n  display: none; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9sdWNhc2NhbGplL1dlYnN0b3JtUHJvamVjdHMvZmxvdy1iYXNlZC9zcmMvYXBwL25vZGVzL2N1c3RvbS1jb2RlL2N1c3RvbS1jb2RlLmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUVBO0VBRUksdUJBQXNCO0VBQ3RCLGNBQWE7RUFDYixRQUFPO0VBQ1AsdUJBQXNCO0VBQ3RCLHdCQUF1QjtFQUN2QixtQkFBa0IsRUFDbkI7O0FBR0g7RUFDRSxjQUFhO0VBQ2IsK0JBQThCLEVBQy9COztBQUVEO0VBQ0UsYUFBWSxFQUNiOztBQUVEO0VBQ0UsWUFBVztFQUNYLG1CQUFrQixFQUNuQjs7QUFFRDtFQUdNLGNBQWEsRUFDZDs7QUFKTDtFQVNNLGNBQWEsRUFDZCIsImZpbGUiOiJzcmMvYXBwL25vZGVzL2N1c3RvbS1jb2RlL2N1c3RvbS1jb2RlLmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiQGltcG9ydCAndXRpbHMvdXRpbHMnO1xuXG46aG9zdCB7XG4gIC5leHBhbmRlZCB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGZsZXg6IDE7XG4gICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICBwYWRkaW5nOiAxMHB4IDIwcHg7XG4gIH1cbn1cblxuLmZvcm1hdC1mb3JtIHtcbiAgZGlzcGxheTogZmxleDtcbiAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xufVxuXG4uY29kZSB7XG4gIHdpZHRoOiA0MDBweDtcbn1cblxuLmVycm9ycyB7XG4gIGNvbG9yOiAjZjAwO1xuICB0ZXh0LWFsaWduOiBjZW50ZXI7XG59XG5cbmZiLW5vcm1hbC1ub2RlIHtcbiAgJjpub3QoLmlzLWFjdGl2ZSkge1xuICAgIC5leHBhbmRlZCB7XG4gICAgICBkaXNwbGF5OiBub25lO1xuICAgIH1cbiAgfVxuXG4gICYuaXMtYWN0aXZlIHtcbiAgICAubWluaWZpZWQge1xuICAgICAgZGlzcGxheTogbm9uZTtcbiAgICB9XG4gIH1cbn1cbiJdfQ== */\"","import { AfterViewInit, ChangeDetectorRef, Component, ElementRef, Host, Inject, NgZone, OnInit, ViewChild } from '@angular/core';\nimport { NodeService } from '../../../../projects/flow-based/src/lib/node/node-service';\nimport { CustomCodeWorker } from '../../workers/custom-code';\nimport { FB_SOCKET_COLORS, FbNodeState } from '../../../../projects/flow-based/src/lib/flow-based';\nimport { Editor, EditorChangeLinkedList } from 'codemirror';\nimport { FormControl } from '@angular/forms';\n\ndeclare var require: any;\nconst CodeMirror = require('codemirror');\n\n@Component({\n  selector: 'fb-custom-code',\n  templateUrl: './custom-code.component.html',\n  styleUrls: ['./custom-code.component.scss']\n})\nexport class CustomCodeComponent implements OnInit, AfterViewInit {\n  private worker: CustomCodeWorker;\n  private state: FbNodeState;\n  public error: boolean;\n  private editor: any;\n\n  inputFormatControl = new FormControl();\n  outputFormatControl = new FormControl();\n\n  @ViewChild('code') codeRef: ElementRef;\n\n  constructor(@Host() private service: NodeService,\n              @Inject(FB_SOCKET_COLORS) private colors: Record<string, string>,\n              private _ngZone: NgZone,\n              private cdr: ChangeDetectorRef) {\n    this.state = service.state;\n  }\n\n  ngOnInit() {\n    this.worker = this.service.worker as CustomCodeWorker;\n\n    this.inputFormatControl.valueChanges.subscribe((format: string) => {\n      this.state.sockets![0].format = format;\n    });\n\n    this.outputFormatControl.valueChanges.subscribe((format: string) => {\n      this.state.sockets![1].format = format;\n    });\n\n    this.inputFormatControl.setValue(this.state.sockets![0].format);\n    this.outputFormatControl.setValue(this.state.sockets![1].format);\n  }\n\n  ngAfterViewInit(): void {\n  }\n\n  get func(): string {\n    return this.state.config.func;\n  }\n\n  set func(str: string) {\n    this.state.config.func = str;\n    this.error = false;\n\n    try {\n      this.worker.compileFunction(str);\n    } catch (err) {\n      this.error = true;\n    }\n  }\n\n  get title(): string {\n    return this.state.title!;\n  }\n\n  get hasRuntimeError(): boolean {\n    return !!this.worker.runtimeError;\n  }\n\n  get hasCompileError(): boolean {\n    return !!this.worker.compileError;\n  }\n\n  onKeyDown(): void {\n    console.log(this.func);\n  }\n\n   onActive(isActive): void {\n    // this._ngZone.runOutsideAngular(() => {\n      if (!this.editor) {\n        this.editor = CodeMirror(this.codeRef.nativeElement, {\n          lineNumbers: true,\n          theme: 'material',\n          mode: 'javascript',\n          value: this.state.config.func\n        });\n\n        this.editor.on(\n          'change',\n          (cm: Editor, change: EditorChangeLinkedList) => {\n            this.worker.compileFunction(cm.getValue());\n            this.cdr.detectChanges();\n            // this._ngZone.run(() => this.codemirrorValueChanged(cm, change)),\n          }\n        );\n      }\n    // });\n  }\n\n  get types(): string[] {\n    return Object.keys(this.colors);\n  }\n}\n","module.exports = \"<mat-toolbar color=\\\"primary\\\">\\n  <h1>Create socket</h1>\\n  <button *ngIf=\\\"!isNew\\\" mat-button color=\\\"warn\\\" (click)=\\\"onDelete()\\\">\\n    <mat-icon>delete_forever</mat-icon>\\n  </button>\\n</mat-toolbar>\\n\\n<form [formGroup]=\\\"socketForm\\\" (ngSubmit)=\\\"onSubmit()\\\">\\n  <mat-form-field>\\n    <input matInput formControlName=\\\"name\\\" placeholder=\\\"Socket name\\\">\\n  </mat-form-field>\\n\\n  <footer>\\n    <button type=\\\"button\\\" (click)=\\\"onCancel()\\\" mat-button color=\\\"warn\\\">Cancel</button>\\n    <button *ngIf=\\\"!isNew\\\" type=\\\"submit\\\" mat-button>Edit</button>\\n    <button *ngIf=\\\"isNew\\\" type=\\\"submit\\\" mat-button>Create</button>\\n  </footer>\\n</form>\\n\"","module.exports = \":host {\\n  background-color: #fff; }\\n\\nmat-toolbar {\\n  display: flex;\\n  justify-content: space-between; }\\n\\nform {\\n  display: flex;\\n  flex-direction: column;\\n  margin: 16px; }\\n\\nform footer {\\n    display: flex;\\n    justify-content: space-between;\\n    margin-top: 32px; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9sdWNhc2NhbGplL1dlYnN0b3JtUHJvamVjdHMvZmxvdy1iYXNlZC9zcmMvYXBwL25vZGVzL2RlZmF1bHQtZmxvdy9hZGQtc29ja2V0L2FkZC1zb2NrZXQuY29tcG9uZW50LnNjc3MiLCIvVXNlcnMvbHVjYXNjYWxqZS9XZWJzdG9ybVByb2plY3RzL2Zsb3ctYmFzZWQvcHJvamVjdHMvZmxvdy1iYXNlZC9zcmMvbGliL3V0aWxzL192YXJpYWJsZXMuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFHQTtFQUNFLHVCQUFzQixFQUN2Qjs7QUFFRDtFQUNFLGNBQWE7RUFDYiwrQkFBOEIsRUFDL0I7O0FBRUQ7RUFDRSxjQUFhO0VBQ2IsdUJBQXNCO0VBQ3RCLGFDZm9CLEVEc0JyQjs7QUFWRDtJQU1JLGNBQWE7SUFDYiwrQkFBOEI7SUFDOUIsaUJBQWdDLEVBQ2pDIiwiZmlsZSI6InNyYy9hcHAvbm9kZXMvZGVmYXVsdC1mbG93L2FkZC1zb2NrZXQvYWRkLXNvY2tldC5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIkBpbXBvcnQgJy4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL2Zsb3ctYmFzZWQvc3JjL2xpYi91dGlscy91dGlscyc7XG5AaW1wb3J0ICcuLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy9mbG93LWJhc2VkL3NyYy9saWIvdXRpbHMvdmFyaWFibGVzJztcblxuOmhvc3Qge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmO1xufVxuXG5tYXQtdG9vbGJhciB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2Vlbjtcbn1cblxuZm9ybSB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gIG1hcmdpbjogJHh4bC1ndXR0ZXItc2l6ZTtcblxuICBmb290ZXIge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuICAgIG1hcmdpbi10b3A6IDIgKiAkeHhsLWd1dHRlci1zaXplO1xuICB9XG59XG4iLCIkeHhsLWd1dHRlci1zaXplOiAxNnB4O1xuLy8gei1pbmRpY2VzXG4kemluZGV4LW5vZGU6IDEwO1xuJHppbmRleC1ub2RlLWFjdGl2ZTogMjA7XG5cbiR4eGwtYWRkLXNvY2tldC1mb3JtOiAxMDtcbiRhY3RpdmUtY29sb3I6ICNmYTA7XG4kYWNjZXB0LWNvbG9yOiAjYmFkYTU1O1xuJHJlamVjdC1jb2xvcjogI2YwNjtcbiJdfQ== */\"","import { Component, Inject, OnInit } from '@angular/core';\nimport { XxlSocket } from 'projects/flow-based/src/lib/flow-based';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { MAT_DIALOG_DATA, MatDialogRef } from '@angular/material';\n\nexport interface DialogAction {\n  action: 'delete' | 'edit' | 'create';\n  socket?: XxlSocket;\n}\n@Component({\n  selector: 'fb-add-socket',\n  templateUrl: './add-socket.component.html',\n  styleUrls: ['./add-socket.component.scss']\n})\nexport class AddSocketComponent implements OnInit {\n  socketForm: FormGroup;\n  isNew: boolean;\n\n  constructor(private fb: FormBuilder,\n              public dialogRef: MatDialogRef<AddSocketComponent>,\n              @Inject(MAT_DIALOG_DATA) public socket: Partial<XxlSocket>) {\n  }\n\n  ngOnInit() {\n    this.isNew = !this.socket.id;\n\n    this.socketForm = this.fb.group({\n        type: this.socket.type,\n        name: [this.socket.name, Validators.required],\n        description: [this.socket.description],\n        color: []\n      });\n  }\n\n\n  onSubmit(): void {\n    if (this.socketForm.valid) {\n      this.dialogRef.close({\n        action: this.isNew ? 'create' : 'edit',\n        socket: this.socketForm.value\n      });\n    }\n  }\n\n  onCancel(): void {\n    this.dialogRef.close();\n  }\n\n  onDelete(): void {\n    this.dialogRef.close({action: 'delete'});\n  }\n}\n","module.exports = \"<fb-normal-node [fullscreen]=\\\"true\\\" [deleteSocket]=\\\"true\\\">\\n  <img class=\\\"minified\\\" src=\\\"./assets/config.svg\\\">\\n\\n  <div class=\\\"expanded\\\">\\n    <button mat-fab class=\\\"add-socket socket-in\\\" (click)=\\\"openDialog({type: 'in'})\\\">\\n      <mat-icon>add</mat-icon>\\n    </button>\\n\\n    <button mat-fab class=\\\"add-socket socket-out\\\" (click)=\\\"openDialog({type: 'out'})\\\">\\n      <mat-icon>add</mat-icon>\\n    </button>\\n  </div>\\n</fb-normal-node>\\n\"","module.exports = \":host img {\\n  pointer-events: none;\\n  width: 100%; }\\n\\n:host.is-active {\\n  width: 0; }\\n\\nfb-normal-node:not(.is-active) {\\n  height: 72px;\\n  width: 72px; }\\n\\nfb-normal-node:not(.is-active) .expanded {\\n    display: none; }\\n\\nfb-normal-node.is-active .minified {\\n  display: none; }\\n\\n.add-socket,\\n.edit-socket {\\n  position: absolute;\\n  top: 8px; }\\n\\n.socket-out {\\n  right: 8px; }\\n\\n.socket-in {\\n  left: 8px; }\\n\\n.edit-socket.socket-in {\\n  left: 76px; }\\n\\n.edit-socket.socket-out {\\n  right: 76px; }\\n\\nfooter {\\n  background-color: rgba(255, 255, 255, 0.8);\\n  display: flex;\\n  justify-content: space-between;\\n  -webkit-transform: translateX(-50%);\\n          transform: translateX(-50%);\\n  width: 300px;\\n  position: absolute;\\n  bottom: 8px;\\n  left: 50%; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9sdWNhc2NhbGplL1dlYnN0b3JtUHJvamVjdHMvZmxvdy1iYXNlZC9zcmMvYXBwL25vZGVzL2RlZmF1bHQtZmxvdy9kZWZhdWx0LWZsb3cuY29tcG9uZW50LnNjc3MiLCIvVXNlcnMvbHVjYXNjYWxqZS9XZWJzdG9ybVByb2plY3RzL2Zsb3ctYmFzZWQvcHJvamVjdHMvZmxvdy1iYXNlZC9zcmMvbGliL3V0aWxzL191dGlscy5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUVBO0VBRUkscUJBQW9CO0VBQ3BCLFlBQVcsRUFDWjs7QUFKSDtFQU9JLFNBQVEsRUFDVDs7QUFHSDtFQzhCRSxhRDVCd0I7RUM2QnhCLFlEN0J3QixFQUt2Qjs7QUFQSDtJQUtNLGNBQWEsRUFDZDs7QUFOTDtFQWFNLGNBQWEsRUFDZDs7QUFJTDs7RUNwQkUsbUJEc0I2QjtFQ2hCM0IsU0RnQmdDLEVBQ25DOztBQUVEO0VBQ0UsV0FBVSxFQUNYOztBQUVEO0VBQ0UsVUFBUyxFQUNWOztBQUVEO0VBQ0UsV0FBVSxFQUNYOztBQUVEO0VBQ0UsWUFBVyxFQUNaOztBQUVEO0VBQ0UsMkNBQTBDO0VBQzFDLGNBQWE7RUFDYiwrQkFBOEI7RUFDOUIsb0NBQTJCO1VBQTNCLDRCQUEyQjtFQUMzQixhQUFZO0VDOUNaLG1CRCtDNkI7RUMzQjNCLFlEMkJvQztFQ3BCcEMsVURvQndDLEVBQzNDIiwiZmlsZSI6InNyYy9hcHAvbm9kZXMvZGVmYXVsdC1mbG93L2RlZmF1bHQtZmxvdy5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIkBpbXBvcnQgJy4uLy4uLy4uLy4uL3Byb2plY3RzL2Zsb3ctYmFzZWQvc3JjL2xpYi91dGlscy91dGlscyc7XG5cbjpob3N0IHtcbiAgaW1nIHtcbiAgICBwb2ludGVyLWV2ZW50czogbm9uZTtcbiAgICB3aWR0aDogMTAwJTtcbiAgfVxuXG4gICYuaXMtYWN0aXZlIHtcbiAgICB3aWR0aDogMDtcbiAgfVxufVxuXG5mYi1ub3JtYWwtbm9kZSB7XG4gICY6bm90KC5pcy1hY3RpdmUpIHtcbiAgICBAaW5jbHVkZSB4eGwtc2l6ZSg3MnB4KTtcblxuICAgIC5leHBhbmRlZCB7XG4gICAgICBkaXNwbGF5OiBub25lO1xuICAgIH1cbiAgfVxuXG4gICYuaXMtYWN0aXZlIHtcbiAgICAvLyBAaW5jbHVkZSBmYi1wb3NpdGlvbihhYnNvbHV0ZSwgNHB4IDRweCA0cHggNHB4KTtcblxuICAgIC5taW5pZmllZCB7XG4gICAgICBkaXNwbGF5OiBub25lO1xuICAgIH1cbiAgfVxufVxuXG4uYWRkLXNvY2tldCxcbi5lZGl0LXNvY2tldCB7XG4gIEBpbmNsdWRlIGZiLXBvc2l0aW9uKGFic29sdXRlLCA4cHggMCAwIDApO1xufVxuXG4uc29ja2V0LW91dCB7XG4gIHJpZ2h0OiA4cHg7XG59XG5cbi5zb2NrZXQtaW4ge1xuICBsZWZ0OiA4cHg7XG59XG5cbi5lZGl0LXNvY2tldC5zb2NrZXQtaW4ge1xuICBsZWZ0OiA3NnB4O1xufVxuXG4uZWRpdC1zb2NrZXQuc29ja2V0LW91dCB7XG4gIHJpZ2h0OiA3NnB4O1xufVxuXG5mb290ZXIge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuOCk7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcbiAgdHJhbnNmb3JtOiB0cmFuc2xhdGVYKC01MCUpO1xuICB3aWR0aDogMzAwcHg7XG4gIEBpbmNsdWRlIGZiLXBvc2l0aW9uKGFic29sdXRlLCAwIDAgOHB4IDUwJSk7XG59XG4iLCJAbWl4aW4gZmItcG9zaXRpb24oJHBvc2l0aW9uOiByZWxhdGl2ZSwgJGNvb3JkaW5hdGVzOiAwIDAgMCAwKSB7XG4gIEBpZiB0eXBlLW9mKCRwb3NpdGlvbikgPT0gbGlzdCB7XG4gICAgJGNvb3JkaW5hdGVzOiAkcG9zaXRpb247XG4gICAgJHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgfVxuXG4gICR0b3A6IG50aCgkY29vcmRpbmF0ZXMsIDEpO1xuICAkcmlnaHQ6IG50aCgkY29vcmRpbmF0ZXMsIDIpO1xuICAkYm90dG9tOiBudGgoJGNvb3JkaW5hdGVzLCAzKTtcbiAgJGxlZnQ6IG50aCgkY29vcmRpbmF0ZXMsIDQpO1xuXG4gIHBvc2l0aW9uOiAkcG9zaXRpb247XG5cbiAgLy8gVG9wXG4gIEBpZiAkdG9wID09IGF1dG8ge1xuICAgIHRvcDogJHRvcDtcbiAgfSBAZWxzZSBpZiBub3QodW5pdGxlc3MoJHRvcCkpIHtcbiAgICB0b3A6ICR0b3A7XG4gIH1cblxuICAvLyBSaWdodFxuICBAaWYgJHJpZ2h0ID09IGF1dG8ge1xuICAgIHJpZ2h0OiAkcmlnaHQ7XG4gIH0gQGVsc2UgaWYgbm90KHVuaXRsZXNzKCRyaWdodCkpIHtcbiAgICByaWdodDogJHJpZ2h0O1xuICB9XG5cbiAgLy8gQm90dG9tXG4gIEBpZiAkYm90dG9tID09IGF1dG8ge1xuICAgIGJvdHRvbTogJGJvdHRvbTtcbiAgfSBAZWxzZSBpZiBub3QodW5pdGxlc3MoJGJvdHRvbSkpIHtcbiAgICBib3R0b206ICRib3R0b207XG4gIH1cblxuICAvLyBMZWZ0XG4gIEBpZiAkbGVmdCA9PSBhdXRvIHtcbiAgICBsZWZ0OiAkbGVmdDtcbiAgfSBAZWxzZSBpZiBub3QodW5pdGxlc3MoJGxlZnQpKSB7XG4gICAgbGVmdDogJGxlZnQ7XG4gIH1cbn1cblxuQG1peGluIHh4bC1zaXplKCR3aWR0aCwgJGhlaWdodDogJHdpZHRoKSB7XG4gIGhlaWdodDogJGhlaWdodDtcbiAgd2lkdGg6ICR3aWR0aDtcbn1cbiJdfQ== */\"","import { Component, Host, HostBinding, Input, OnDestroy, OnInit } from '@angular/core';\nimport { XxlSocket } from 'projects/flow-based/src/lib/flow-based';\nimport { NodeService } from '../../../../projects/flow-based/src/lib/node/node-service';\nimport { MatDialog, MatDialogRef } from '@angular/material';\nimport { AddSocketComponent, DialogAction } from './add-socket/add-socket.component';\nimport { Subscription } from 'rxjs';\n\n@Component({\n  selector: 'fb-default-flow',\n  templateUrl: './default-flow.component.html',\n  styleUrls: ['./default-flow.component.scss']\n})\nexport class DefaultFlowComponent implements OnInit, OnDestroy {\n  @Input() title: string;\n  private worker: any;\n  private clickSubscription: Subscription;\n  private dialogRef: MatDialogRef<any> | null;\n\n  @HostBinding('class.is-active') isActive = false;\n\n  constructor(public dialog: MatDialog,\n              @Host() private service: NodeService) {\n  }\n\n  ngOnInit() {\n    this.worker = this.service.worker;\n\n    // this.service.closeOnDoubleClick(() => this.onClose());\n\n    // this.clickSubscription = this.service.nodeClicked$.subscribe(() => {\n    //   if (!this.isActive) {\n    //     this.isActive = true;\n    //     this.service.setMaxSize(true);\n    //\n    //     this.service.register(() => {\n    //       if (this.dialogRef) {\n    //         this.dialogRef.close();\n    //         this.dialogRef = null;\n    //         return true;\n    //       }\n    //\n    //       this.onClose();\n    //\n    //       return false; // unregister\n    //     }, 'blur');\n    //   }\n    // });\n  }\n\n  ngOnDestroy(): void {\n    // this.clickSubscription.unsubscribe();\n  }\n\n  onDelete(): void {\n    this.service.deleteSelf();\n  }\n\n  onClose(): void {\n    this.service.setMaxSize(false);\n    this.isActive = false;\n  }\n\n  openDialog(socket: Partial<XxlSocket>): void {\n    this.dialogRef = this.dialog.open(AddSocketComponent, {\n      panelClass: 'add-socket-dialog',\n      width: '400px',\n      data: socket\n    });\n\n    this.dialogRef.afterClosed().subscribe((result: DialogAction) => {\n      if (result) {\n        this.service.addSocket(result.socket!);\n      }\n      this.dialogRef = null;\n    });\n  }\n\n  editDialog(type: 'in' | 'out'): void {\n    // this.dialogRef = this.dialog.open(EditSocketComponent, {\n    //   width: '400px',\n    //   data: {\n    //     sockets: (this.service.state.sockets || []).filter(socket => socket.type === type) || [],\n    //     service: this.service,\n    //     type\n    //   }\n    // });\n    //\n    // this.dialogRef.afterClosed().subscribe((updates: XxlSocket[] = []) => {\n    //   (this.service.state.sockets || []).filter(socket => {\n    //     if (socket.type === type && !updates.some(update => update.id === socket.id)) {\n    //       this.service.socketRemoved(socket);\n    //     }\n    //   });\n    //\n    //   this.dialogRef = null;\n    // });\n  }\n}\n","module.exports = \"<fb-normal-node [isActive]=\\\"true\\\">\\n  <div class=\\\"content-wrapper\\\">\\n    <mat-form-field>\\n      <mat-select placeholder=\\\"Select a fractal\\\" [(ngModel)]=\\\"selected\\\"\\n                  (selectionChange)=\\\"onFractalChange($event.value)\\\" class=\\\"fb-drag-ignore\\\">\\n        <mat-option *ngFor=\\\"let fractal of fractals\\\" [value]=\\\"fractal.id\\\">\\n          {{fractal.name}}\\n        </mat-option>\\n      </mat-select>\\n    </mat-form-field>\\n\\n    <button mat-button (click)=\\\"onReset()\\\">Reset</button>\\n  </div>\\n</fb-normal-node>\\n\"","module.exports = \".content-wrapper {\\n  background-color: #fff;\\n  display: flex;\\n  flex-direction: column;\\n  padding: 16px; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9sdWNhc2NhbGplL1dlYnN0b3JtUHJvamVjdHMvZmxvdy1iYXNlZC9zcmMvYXBwL25vZGVzL2ZyYWN0YWwvZnJhY3RhbC5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFHQTtFQUNFLHVCQUFzQjtFQUN0QixjQUFhO0VBQ2IsdUJBQXNCO0VBQ3RCLGNBQWEsRUFDZCIsImZpbGUiOiJzcmMvYXBwL25vZGVzL2ZyYWN0YWwvZnJhY3RhbC5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIjpob3N0IHtcbn1cblxuLmNvbnRlbnQtd3JhcHBlciB7XG4gIGJhY2tncm91bmQtY29sb3I6ICNmZmY7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gIHBhZGRpbmc6IDE2cHg7XG59XG4iXX0= */\"","import { Component, Host, OnInit } from '@angular/core';\nimport { NodeService } from '../../../../projects/flow-based/src/lib/node/node-service';\nimport { FbNodeState } from '../../../../projects/flow-based/src/lib/flow-based';\nimport { FractalsWorker } from '../../workers/fractals';\nimport { WebWorkerService } from 'ngx-web-worker';\n\n@Component({\n  selector: 'fb-fractal',\n  templateUrl: './fractal.component.html',\n  styleUrls: ['./fractal.component.scss']\n})\nexport class FractalComponent implements OnInit {\n  private state: FbNodeState;\n  private worker: FractalsWorker;\n  fractals = [\n    {name: 'Mandelbrod', id: 'mandelbrod'},\n    {name: 'Koch Snowflake', id: 'snowflake'},\n    {name: 'Julia set', id: 'julia'}\n  ];\n\n  constructor(@Host() private service: NodeService,\n              private webWorkerService: WebWorkerService) {\n    this.state = service.state;\n\n    webWorkerService.run(input => {\n      const square = num => num * num;\n      return square(input);\n    }, 10).then(r => {\n      console.log('done', r);\n    });\n\n  }\n\n  ngOnInit() {\n    this.worker = this.service.worker as FractalsWorker;\n  }\n\n  isSelected(options: string): boolean {\n    return options === this.state.config.selected;\n  }\n\n  setSelected(option: string): void {\n  }\n\n  get selected(): string {\n    return this.state.config.selected;\n  }\n\n  set selected(option: string) {\n    this.state.config.selected = option;\n  }\n\n  onFractalChange(fractal): void {\n    this.worker.setFractal(fractal);\n  }\n\n  onReset(): void {\n    this.worker.reset();\n  }\n}\n","module.exports = \"<fb-normal-node [fullscreen]=\\\"true\\\" [deleteSocket]=\\\"false\\\" (edit)=\\\"onEdit($event)\\\" (maxSize)=\\\"onMaxSize($event)\\\">\\n  <fb-default-front [title]=\\\"title\\\"></fb-default-front>\\n\\n  <section class=\\\"main\\\">\\n    <section class=\\\"inputs\\\">\\n      <ng-container *ngFor=\\\"let socket of state.sockets | socketIn\\\" class=\\\"socket\\\">\\n        <mat-card #inputs *ngFor=\\\"let val of streamValues[socket.id]\\\" [attr.data-socket-id]=\\\"socket.id\\\" class=\\\"socket\\\">\\n          <mat-card-content>{{val !== undefined ? val.toFixed(3) : ''}}</mat-card-content>\\n        </mat-card>\\n      </ng-container>\\n    </section>\\n\\n    <div #output class=\\\"output\\\">\\n      <mat-card #socketOut class=\\\"socket\\\">\\n        <mat-card-content>{{value}}</mat-card-content>\\n      </mat-card>\\n    </div>\\n  </section>\\n</fb-normal-node>\\n\"","module.exports = \":host {\\n  display: block;\\n  height: 100%;\\n  width: 100%; }\\n\\nfb-normal-node.is-active {\\n  width: 100%; }\\n\\nfb-normal-node:not(.is-active) .main {\\n  display: none; }\\n\\nfb-normal-node.is-active fb-default-front {\\n  display: none; }\\n\\nmat-toolbar {\\n  display: flex;\\n  justify-content: space-between;\\n  -webkit-transform: translateX(-50%);\\n          transform: translateX(-50%);\\n  width: 500px;\\n  position: absolute;\\n  top: 16px;\\n  left: 50%; }\\n\\nfooter {\\n  background-color: rgba(255, 255, 255, 0.8);\\n  display: flex;\\n  justify-content: space-between;\\n  -webkit-transform: translateX(-50%);\\n          transform: translateX(-50%);\\n  width: 300px;\\n  z-index: 20;\\n  position: absolute;\\n  bottom: 8px;\\n  left: 50%; }\\n\\n.main {\\n  align-items: center;\\n  display: flex;\\n  height: 100%;\\n  justify-content: center; }\\n\\nmat-card {\\n  align-items: center;\\n  display: flex;\\n  justify-content: center; }\\n\\n.socket {\\n  background-color: #fff;\\n  flex: 1;\\n  margin: 16px;\\n  position: relative;\\n  z-index: 10; }\\n\\n.inputs {\\n  width: 150px; }\\n\\n.output {\\n  display: flex;\\n  margin-left: 100px;\\n  height: 150px;\\n  width: 200px; }\\n\\n.output mat-card-content {\\n    font-size: 30px; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9sdWNhc2NhbGplL1dlYnN0b3JtUHJvamVjdHMvZmxvdy1iYXNlZC9zcmMvYXBwL25vZGVzL21lcmdlLXN0cmVhbXMvbWVyZ2Utc3RyZWFtcy5jb21wb25lbnQuc2NzcyIsIi9Vc2Vycy9sdWNhc2NhbGplL1dlYnN0b3JtUHJvamVjdHMvZmxvdy1iYXNlZC9wcm9qZWN0cy9mbG93LWJhc2VkL3NyYy9saWIvdXRpbHMvX3V0aWxzLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBRUE7RUFDRSxlQUFjO0VDd0NkLGFEdkNzQjtFQ3dDdEIsWUR4Q3NCLEVBQ3ZCOztBQUVEO0VBRUksWUFBVyxFQUNaOztBQUhIO0VBTUksY0FBYSxFQUNkOztBQVBIO0VBV00sY0FBYSxFQUNkOztBQUlMO0VBQ0UsY0FBYTtFQUNiLCtCQUE4QjtFQUM5QixvQ0FBMkI7VUFBM0IsNEJBQTJCO0VBQzNCLGFBQVk7RUNoQlosbUJEaUI2QjtFQ1gzQixVRFdpQztFQ1VqQyxVRFZ5QyxFQUM1Qzs7QUFFRDtFQUNFLDJDQUEwQztFQUMxQyxjQUFhO0VBQ2IsK0JBQThCO0VBQzlCLG9DQUEyQjtVQUEzQiw0QkFBMkI7RUFDM0IsYUFBWTtFQUNaLFlBQVc7RUMxQlgsbUJEMkI2QjtFQ1AzQixZRE9vQztFQ0FwQyxVREF3QyxFQUMzQzs7QUFFRDtFQUNFLG9CQUFtQjtFQUNuQixjQUFhO0VBQ2IsYUFBWTtFQUNaLHdCQUF1QixFQUN4Qjs7QUFFRDtFQUNFLG9CQUFtQjtFQUNuQixjQUFhO0VBQ2Isd0JBQXVCLEVBQ3hCOztBQUVEO0VBQ0UsdUJBQXNCO0VBQ3RCLFFBQU87RUFDUCxhQUFZO0VBQ1osbUJBQWtCO0VBQ2xCLFlBQVcsRUFDWjs7QUFFRDtFQUNFLGFBQVksRUFDYjs7QUFFRDtFQUNFLGNBQWE7RUFDYixtQkFBa0I7RUN6QmxCLGNEMEI4QjtFQ3pCOUIsYUR5QnVCLEVBS3hCOztBQVJEO0lBTUksZ0JBQWUsRUFDaEIiLCJmaWxlIjoic3JjL2FwcC9ub2Rlcy9tZXJnZS1zdHJlYW1zL21lcmdlLXN0cmVhbXMuY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyJAaW1wb3J0ICcuLi8uLi8uLi8uLi9wcm9qZWN0cy9mbG93LWJhc2VkL3NyYy9saWIvdXRpbHMvdXRpbHMnO1xuXG46aG9zdCB7XG4gIGRpc3BsYXk6IGJsb2NrO1xuICBAaW5jbHVkZSB4eGwtc2l6ZSgxMDAlKTtcbn1cblxuZmItbm9ybWFsLW5vZGUge1xuICAmLmlzLWFjdGl2ZSB7XG4gICAgd2lkdGg6IDEwMCU7XG4gIH1cblxuICAmOm5vdCguaXMtYWN0aXZlKSAubWFpbiB7XG4gICAgZGlzcGxheTogbm9uZTtcbiAgfVxuXG4gICYuaXMtYWN0aXZlIHtcbiAgICBmYi1kZWZhdWx0LWZyb250IHtcbiAgICAgIGRpc3BsYXk6IG5vbmU7XG4gICAgfVxuICB9XG59XG5cbm1hdC10b29sYmFyIHtcbiAgZGlzcGxheTogZmxleDtcbiAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoLTUwJSk7XG4gIHdpZHRoOiA1MDBweDtcbiAgQGluY2x1ZGUgZmItcG9zaXRpb24oYWJzb2x1dGUsIDE2cHggMCAwIDUwJSk7XG59XG5cbmZvb3RlciB7XG4gIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC44KTtcbiAgZGlzcGxheTogZmxleDtcbiAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoLTUwJSk7XG4gIHdpZHRoOiAzMDBweDtcbiAgei1pbmRleDogMjA7XG4gIEBpbmNsdWRlIGZiLXBvc2l0aW9uKGFic29sdXRlLCAwIDAgOHB4IDUwJSk7XG59XG5cbi5tYWluIHtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgZGlzcGxheTogZmxleDtcbiAgaGVpZ2h0OiAxMDAlO1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbn1cblxubWF0LWNhcmQge1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBkaXNwbGF5OiBmbGV4O1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbn1cblxuLnNvY2tldCB7XG4gIGJhY2tncm91bmQtY29sb3I6ICNmZmY7XG4gIGZsZXg6IDE7XG4gIG1hcmdpbjogMTZweDtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xuICB6LWluZGV4OiAxMDtcbn1cblxuLmlucHV0cyB7XG4gIHdpZHRoOiAxNTBweDtcbn1cblxuLm91dHB1dCB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIG1hcmdpbi1sZWZ0OiAxMDBweDtcbiAgQGluY2x1ZGUgeHhsLXNpemUoMjAwcHgsIDE1MHB4KTtcblxuICBtYXQtY2FyZC1jb250ZW50IHtcbiAgICBmb250LXNpemU6IDMwcHg7XG4gIH1cbn1cbiIsIkBtaXhpbiBmYi1wb3NpdGlvbigkcG9zaXRpb246IHJlbGF0aXZlLCAkY29vcmRpbmF0ZXM6IDAgMCAwIDApIHtcbiAgQGlmIHR5cGUtb2YoJHBvc2l0aW9uKSA9PSBsaXN0IHtcbiAgICAkY29vcmRpbmF0ZXM6ICRwb3NpdGlvbjtcbiAgICAkcG9zaXRpb246IHJlbGF0aXZlO1xuICB9XG5cbiAgJHRvcDogbnRoKCRjb29yZGluYXRlcywgMSk7XG4gICRyaWdodDogbnRoKCRjb29yZGluYXRlcywgMik7XG4gICRib3R0b206IG50aCgkY29vcmRpbmF0ZXMsIDMpO1xuICAkbGVmdDogbnRoKCRjb29yZGluYXRlcywgNCk7XG5cbiAgcG9zaXRpb246ICRwb3NpdGlvbjtcblxuICAvLyBUb3BcbiAgQGlmICR0b3AgPT0gYXV0byB7XG4gICAgdG9wOiAkdG9wO1xuICB9IEBlbHNlIGlmIG5vdCh1bml0bGVzcygkdG9wKSkge1xuICAgIHRvcDogJHRvcDtcbiAgfVxuXG4gIC8vIFJpZ2h0XG4gIEBpZiAkcmlnaHQgPT0gYXV0byB7XG4gICAgcmlnaHQ6ICRyaWdodDtcbiAgfSBAZWxzZSBpZiBub3QodW5pdGxlc3MoJHJpZ2h0KSkge1xuICAgIHJpZ2h0OiAkcmlnaHQ7XG4gIH1cblxuICAvLyBCb3R0b21cbiAgQGlmICRib3R0b20gPT0gYXV0byB7XG4gICAgYm90dG9tOiAkYm90dG9tO1xuICB9IEBlbHNlIGlmIG5vdCh1bml0bGVzcygkYm90dG9tKSkge1xuICAgIGJvdHRvbTogJGJvdHRvbTtcbiAgfVxuXG4gIC8vIExlZnRcbiAgQGlmICRsZWZ0ID09IGF1dG8ge1xuICAgIGxlZnQ6ICRsZWZ0O1xuICB9IEBlbHNlIGlmIG5vdCh1bml0bGVzcygkbGVmdCkpIHtcbiAgICBsZWZ0OiAkbGVmdDtcbiAgfVxufVxuXG5AbWl4aW4geHhsLXNpemUoJHdpZHRoLCAkaGVpZ2h0OiAkd2lkdGgpIHtcbiAgaGVpZ2h0OiAkaGVpZ2h0O1xuICB3aWR0aDogJHdpZHRoO1xufVxuIl19 */\"","import {\n  AfterViewInit,\n  ChangeDetectorRef,\n  Component,\n  ElementRef,\n  Host,\n  OnDestroy,\n  OnInit,\n  QueryList,\n  ViewChild,\n  ViewChildren\n} from '@angular/core';\nimport { MergeStreamsWorker } from '../../workers/merge-streams';\nimport { FormBuilder } from '@angular/forms';\nimport { NodeService } from '../../../../projects/flow-based/src/lib/node/node-service';\nimport { XxlFlowUnitState } from '../../../../projects/flow-based/src/lib/flow-based';\nimport { Subscription } from 'rxjs';\n\n@Component({\n  selector: 'fb-merge-streams',\n  templateUrl: './merge-streams.component.html',\n  styleUrls: ['./merge-streams.component.scss']\n})\nexport class MergeStreamsComponent implements OnInit, OnDestroy, AfterViewInit {\n  state: XxlFlowUnitState;\n  worker: MergeStreamsWorker;\n  isActive = false;\n  values;\n  value;\n  streamValues = {};\n  private subscriptions: Subscription[] = [];\n  private clickSubscription: Subscription;\n\n  @ViewChild('output', {read: ElementRef}) output: ElementRef;\n  @ViewChildren('inputs', {read: ElementRef}) inputs: QueryList<ElementRef>;\n\n  constructor(private fb: FormBuilder,\n              private cdr: ChangeDetectorRef,\n              @Host() private service: NodeService) {\n    this.state = service.state;\n  }\n\n  ngOnInit() {\n    this.worker = this.service.worker as MergeStreamsWorker;\n\n    this.subscriptions.push(this.worker.getStream().subscribe(value => {\n      this.value = value.toFixed(3);\n      this.cdr.detectChanges();\n    }));\n\n    this.subscriptions.push(this.worker.getValues().subscribe(values => {\n      this.streamValues = values;\n\n      if (this.isActive) {\n        setTimeout(() => {\n          this.cdr.detectChanges();\n        });\n      }\n    }));\n  }\n\n  ngOnDestroy(): void {\n    this.subscriptions.forEach(s => s.unsubscribe());\n  }\n\n  ready(): void {\n    // TODO\n  }\n\n  onMaxSize(isMaxSize: boolean): void {\n    if (isMaxSize) {\n      this.createConnections();\n    }\n  }\n\n  onEdit(isEditing: boolean): void {\n    if (!isEditing) {\n      this.createConnections();\n    }\n  }\n\n  createConnections(): void {\n    this.service.removeConnections();\n\n    setTimeout(() => {\n      this.inputs.forEach((s, i) => {\n        const socketId = s.nativeElement.dataset.socketId;\n        const sd = this.service.getSocket(socketId);\n\n        this.service.addConnection(sd.comp.element.nativeElement, this.inputs.toArray()[i].nativeElement);\n        this.service.addConnection(this.inputs.toArray()[i].nativeElement, this.output.nativeElement);\n      });\n\n      const outSocket = this.state.sockets!.filter(s => s.type === 'out')[0];\n      this.service.addConnection(this.output.nativeElement, this.service.getSocket(outSocket.id!).comp.element.nativeElement);\n\n      // this.cdr.detectChanges();\n    });\n  }\n\n  onDelete(): void {\n    this.service.deleteSelf();\n  }\n\n  onClose(): void {\n    this.service.setMaxSize(false);\n    this.service.unregister('blur');\n    this.isActive = false;\n  }\n\n  ngAfterViewInit(): void {\n    this.inputs.changes.subscribe(() => {\n    });\n  }\n\n  get title(): string | null | undefined {\n    return this.state.title;\n  }\n}\n","module.exports = \"<fb-normal-node>\\n  <section class=\\\"minified\\\">\\n    <fb-default-front [title]=\\\"title\\\"></fb-default-front>\\n  </section>\\n\\n  <section class=\\\"config\\\">\\n    <div class=\\\"card-wrapper\\\">\\n      <mat-card class=\\\"form\\\">\\n        <mat-card-content>\\n          <form [formGroup]=\\\"configForm\\\">\\n            <label>\\n              <span>Start</span>\\n              <div>\\n                <mat-slider [min]=\\\"worker.min\\\" [max]=\\\"worker.max\\\" step=\\\".1\\\"\\n                            [thumbLabel]=\\\"true\\\"\\n                            formControlName=\\\"startValue\\\" class=\\\"fb-drag-ignore\\\"></mat-slider>\\n                <span>{{configForm.controls.startValue.value}}</span>\\n              </div>\\n            </label>\\n\\n            <label>\\n              <span>End</span>\\n              <div>\\n                <mat-slider [min]=\\\"worker.min\\\" [max]=\\\"worker.max\\\" step=\\\".1\\\"\\n                            [thumbLabel]=\\\"true\\\"\\n                            formControlName=\\\"endValue\\\" class=\\\"fb-drag-ignore\\\"></mat-slider>\\n                <span>{{configForm.controls.endValue.value}}</span>\\n              </div>\\n            </label>\\n\\n            <label>\\n              <span>Interval</span>\\n              <div>\\n                <mat-slider [min]=\\\"worker.intervalMin\\\" [max]=\\\"worker.intervalMax\\\" step=\\\"100\\\"\\n                            [thumbLabel]=\\\"true\\\"\\n                            formControlName=\\\"intervalValue\\\" class=\\\"fb-drag-ignore\\\"></mat-slider>\\n                <span>{{configForm.controls.intervalValue.value}}</span>\\n              </div>\\n            </label>\\n\\n            <label class=\\\"horizontal\\\">\\n              <span class=\\\"large\\\">Integers only</span>\\n              <mat-checkbox formControlName=\\\"integersOnlyValue\\\"></mat-checkbox>\\n            </label>\\n          </form>\\n        </mat-card-content>\\n      </mat-card>\\n\\n      <mat-card class=\\\"output\\\">\\n        <mat-card-title>Current value</mat-card-title>\\n        <mat-card-content>\\n          {{currentValue}}\\n        </mat-card-content>\\n      </mat-card>\\n    </div>\\n  </section>\\n</fb-normal-node>\\n\"","module.exports = \":host {\\n  align-items: center;\\n  display: inline-flex;\\n  justify-content: center; }\\n\\nfb-normal-node:not(.is-active) .config {\\n  display: none; }\\n\\nfb-normal-node.is-active .minified {\\n  display: none; }\\n\\nfb-default-front {\\n  min-height: 80px;\\n  min-width: 72px; }\\n\\n.card-wrapper {\\n  display: flex; }\\n\\n.card-wrapper mat-card {\\n    flex: 1; }\\n\\n.card-wrapper mat-card ~ mat-card {\\n    margin-left: 8px; }\\n\\nfooter {\\n  display: flex;\\n  justify-content: space-between; }\\n\\n.config {\\n  background-color: #fff;\\n  width: 500px; }\\n\\n.config form {\\n    display: flex;\\n    flex-direction: column;\\n    padding: var(--fb-gutter-size); }\\n\\n.config form label {\\n      align-items: flex-start;\\n      display: inline-flex;\\n      flex-direction: column; }\\n\\n.config form label.horizontal {\\n        flex-direction: row; }\\n\\n.config form label > span {\\n        font-size: 15px; }\\n\\n.config form label mat-checkbox {\\n        margin-left: 16px; }\\n\\n.output {\\n  display: flex;\\n  flex-direction: column; }\\n\\n.output mat-card-content {\\n    align-items: center;\\n    display: flex;\\n    flex: 1;\\n    font-size: 40px;\\n    justify-content: center; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9sdWNhc2NhbGplL1dlYnN0b3JtUHJvamVjdHMvZmxvdy1iYXNlZC9zcmMvYXBwL25vZGVzL3JhbmRvbS1udW1iZXJzL3JhbmRvbS1udW1iZXJzLmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUVBO0VBQ0Usb0JBQW1CO0VBQ25CLHFCQUFvQjtFQUNwQix3QkFBdUIsRUFDeEI7O0FBRUQ7RUFHTSxjQUFhLEVBQ2Q7O0FBSkw7RUFTTSxjQUFhLEVBQ2Q7O0FBSUw7RUFDRSxpQkFBZ0I7RUFDaEIsZ0JBQWUsRUFDaEI7O0FBRUQ7RUFDRSxjQUFhLEVBU2Q7O0FBVkQ7SUFJSSxRQUFPLEVBQ1I7O0FBTEg7SUFRSSxpQkFBZ0IsRUFDakI7O0FBR0g7RUFDRSxjQUFhO0VBQ2IsK0JBQThCLEVBQy9COztBQUVEO0VBQ0UsdUJBQXNCO0VBQ3RCLGFBQVksRUF5QmI7O0FBM0JEO0lBS0ksY0FBYTtJQUNiLHVCQUFzQjtJQUN0QiwrQkFBOEIsRUFtQi9COztBQTFCSDtNQVVNLHdCQUF1QjtNQUN2QixxQkFBb0I7TUFDcEIsdUJBQXNCLEVBYXZCOztBQXpCTDtRQWVRLG9CQUFtQixFQUNwQjs7QUFoQlA7UUFtQlEsZ0JBQWUsRUFDaEI7O0FBcEJQO1FBdUJRLGtCQUFpQixFQUNsQjs7QUFLUDtFQUNFLGNBQWE7RUFDYix1QkFBc0IsRUFTdkI7O0FBWEQ7SUFLSSxvQkFBbUI7SUFDbkIsY0FBYTtJQUNiLFFBQU87SUFDUCxnQkFBZTtJQUNmLHdCQUF1QixFQUN4QiIsImZpbGUiOiJzcmMvYXBwL25vZGVzL3JhbmRvbS1udW1iZXJzL3JhbmRvbS1udW1iZXJzLmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiQGltcG9ydCAndXRpbHMvdXRpbHMnO1xuXG46aG9zdCB7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIGRpc3BsYXk6IGlubGluZS1mbGV4O1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbn1cblxuZmItbm9ybWFsLW5vZGUge1xuICAmOm5vdCguaXMtYWN0aXZlKSB7XG4gICAgLmNvbmZpZyB7XG4gICAgICBkaXNwbGF5OiBub25lO1xuICAgIH1cbiAgfVxuXG4gICYuaXMtYWN0aXZlIHtcbiAgICAubWluaWZpZWQge1xuICAgICAgZGlzcGxheTogbm9uZTtcbiAgICB9XG4gIH1cbn1cblxuZmItZGVmYXVsdC1mcm9udCB7XG4gIG1pbi1oZWlnaHQ6IDgwcHg7XG4gIG1pbi13aWR0aDogNzJweDtcbn1cblxuLmNhcmQtd3JhcHBlciB7XG4gIGRpc3BsYXk6IGZsZXg7XG5cbiAgbWF0LWNhcmQge1xuICAgIGZsZXg6IDE7XG4gIH1cblxuICBtYXQtY2FyZCB+IG1hdC1jYXJkIHtcbiAgICBtYXJnaW4tbGVmdDogOHB4O1xuICB9XG59XG5cbmZvb3RlciB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2Vlbjtcbn1cblxuLmNvbmZpZyB7XG4gIGJhY2tncm91bmQtY29sb3I6ICNmZmY7XG4gIHdpZHRoOiA1MDBweDtcblxuICBmb3JtIHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgcGFkZGluZzogdmFyKC0tZmItZ3V0dGVyLXNpemUpO1xuXG4gICAgbGFiZWwge1xuICAgICAgYWxpZ24taXRlbXM6IGZsZXgtc3RhcnQ7XG4gICAgICBkaXNwbGF5OiBpbmxpbmUtZmxleDtcbiAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG5cbiAgICAgICYuaG9yaXpvbnRhbCB7XG4gICAgICAgIGZsZXgtZGlyZWN0aW9uOiByb3c7XG4gICAgICB9XG5cbiAgICAgICYgPiBzcGFuIHtcbiAgICAgICAgZm9udC1zaXplOiAxNXB4O1xuICAgICAgfVxuXG4gICAgICBtYXQtY2hlY2tib3gge1xuICAgICAgICBtYXJnaW4tbGVmdDogMTZweDtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuLm91dHB1dCB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG5cbiAgbWF0LWNhcmQtY29udGVudCB7XG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGZsZXg6IDE7XG4gICAgZm9udC1zaXplOiA0MHB4O1xuICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICB9XG59XG4iXX0= */\"","import { ChangeDetectorRef, Component, Host, OnDestroy, OnInit } from '@angular/core';\n\nimport { FbNodeState } from '../../../../projects/flow-based/src/lib/flow-based';\nimport { FormBuilder, FormGroup } from '@angular/forms';\nimport { RandomNumbersWorker } from '../../workers/random-numbers';\nimport { NodeService } from '../../../../projects/flow-based/src/lib/node/node-service';\nimport { Subscription } from 'rxjs';\n\n@Component({\n  selector: 'fb-random-numbers',\n  templateUrl: './random-numbers.component.html',\n  styleUrls: ['./random-numbers.component.scss']\n})\nexport class RandomNumbersComponent implements OnInit, OnDestroy {\n  worker: RandomNumbersWorker;\n  configForm: FormGroup;\n  isActive = false;\n  state: FbNodeState;\n  currentValue: number;\n  private clickSubscription: Subscription;\n  private valueSubscription: Subscription;\n\n  constructor(private fb: FormBuilder,\n              private cdr: ChangeDetectorRef,\n              @Host() private service: NodeService) {\n    this.state = service.state;\n  }\n\n  ngOnInit(): void {\n    this.worker = this.service.worker as RandomNumbersWorker;\n\n    this.configForm = this.fb.group({\n      startValue: [this.worker.start],\n      endValue: [this.worker.end],\n      intervalValue: [this.worker.interval],\n      integersOnlyValue: [this.worker.integer]\n    });\n\n\n    this.configForm.valueChanges.subscribe(form => {\n      if (form.startValue > this.configForm.controls.endValue.value) {\n        this.configForm.controls.endValue.setValue(form.startValue, {onlySelf: true, emitEvent: true});\n      }\n\n      setTimeout(() => {\n        this.worker.start = form.startValue;\n        this.worker.end = form.endValue;\n        this.worker.interval = form.intervalValue;\n        this.worker.integer = form.integersOnlyValue;\n      });\n    });\n\n    this.valueSubscription = this.worker.getStream().subscribe(value => {\n      this.currentValue = this.worker.integer ? value : parseFloat(value.toFixed(4));\n      this.cdr.markForCheck();\n    });\n  }\n\n  ngOnDestroy(): void {\n    this.valueSubscription.unsubscribe();\n  }\n\n  get title(): string | undefined {\n    return this.state.title;\n  }\n}\n","module.exports = \"<fb-normal-node (edit)=\\\"onEdit($event)\\\">\\n    <section class=\\\"minified\\\">\\n      <div>\\n        <span class=\\\"label\\\">Min:</span>\\n        <span class=\\\"value\\\">{{min}}</span>\\n        <svg width=\\\"40px\\\" height=\\\"20px\\\">\\n          <defs>\\n            <marker id=\\\"arrow\\\" markerWidth=\\\"10\\\" markerHeight=\\\"10\\\" refX=\\\"0\\\" refY=\\\"3\\\" orient=\\\"auto\\\"\\n                    markerUnits=\\\"strokeWidth\\\">\\n              <path d=\\\"M0,0 L0,6 L4,3 z\\\" fill=\\\"#fff\\\"/>\\n            </marker>\\n          </defs>\\n          <line x1=\\\"4\\\" y1=\\\"10\\\" x2=\\\"30\\\" y2=\\\"10\\\" stroke=\\\"#fff\\\" stroke-width=\\\"2\\\" marker-end=\\\"url(#arrow)\\\"/>\\n        </svg>\\n      </div>\\n      <div>\\n        <span class=\\\"label\\\">Max:</span>\\n        <span class=\\\"value\\\">{{max}}</span>\\n        <svg width=\\\"40px\\\" height=\\\"20px\\\">\\n          <line x1=\\\"4\\\" y1=\\\"10\\\" x2=\\\"30\\\" y2=\\\"10\\\" stroke=\\\"#fff\\\" stroke-width=\\\"2\\\" marker-end=\\\"url(#arrow)\\\"/>\\n        </svg>\\n      </div>\\n    </section>\\n\\n    <section class=\\\"expanded\\\">\\n      <div class=\\\"wrapper\\\">\\n        <mat-card class=\\\"values\\\">\\n          <mat-card-content>\\n            <span>Min value</span>\\n            <span class=\\\"value\\\">{{min}}</span>\\n          </mat-card-content>\\n          <mat-card-content>\\n            <span>Max value</span>\\n            <span class=\\\"value\\\">{{max}}</span>\\n          </mat-card-content>\\n          <mat-card-content>\\n            <span>Average value</span>\\n            <span class=\\\"value\\\">{{avg}}</span>\\n          </mat-card-content>\\n\\n          <button mat-stroked-button (click)=\\\"onReset()\\\">Reset</button>\\n        </mat-card>\\n\\n        <mat-card class=\\\"distribution\\\">\\n          <mat-card-title>Distribution</mat-card-title>\\n          <mat-card-content>\\n            <div #distribution></div>\\n            <div class=\\\"column-width\\\">\\n              <span>Column width: </span>\\n              <mat-slider class=\\\"fb-drag-ignore\\\" min=\\\"0\\\" max=\\\"10\\\" step=\\\".1\\\"\\n                          [(ngModel)]=\\\"worker.columnWidth\\\"></mat-slider>\\n              <span>{{worker.columnWidth}}</span>\\n            </div>\\n          </mat-card-content>\\n        </mat-card>\\n      </div>\\n    </section>\\n</fb-normal-node>\\n\"","module.exports = \":host {\\n  color: #fff;\\n  display: flex;\\n  flex-direction: column;\\n  justify-content: center;\\n  min-width: 167px; }\\n  :host.is-active {\\n    width: 500px; }\\n  :host .expanded {\\n    display: none; }\\n  .minified {\\n  margin: 4px 4px 6px; }\\n  .minified div {\\n    align-items: center;\\n    display: flex;\\n    justify-content: space-between; }\\n  .minified div ~ div {\\n    margin-top: 8px; }\\n  .minified .label {\\n    flex: 0 0 40px; }\\n  .minified .value {\\n    flex: 0 0 80px; }\\n  .minified svg {\\n    flex: 0 0 40px; }\\n  .expanded {\\n  background-color: #fff; }\\n  .expanded .wrapper {\\n    display: flex;\\n    padding: 8px; }\\n  .expanded .wrapper .values {\\n      display: flex;\\n      flex: 1;\\n      flex-direction: column;\\n      height: 300px; }\\n  .expanded .wrapper .values mat-card-content {\\n        display: flex;\\n        flex-direction: column; }\\n  .expanded .wrapper .values mat-card-content .value {\\n          font-size: 30px;\\n          padding-top: 8px; }\\n  .expanded .wrapper .distribution {\\n      flex: 2;\\n      height: 300px;\\n      margin-left: 8px; }\\n  .expanded .wrapper .distribution .column-width {\\n        align-items: center;\\n        display: flex;\\n        justify-content: center; }\\n  .expanded .wrapper .distribution .column-width mat-slider {\\n          margin: 0 8px; }\\n  .is-active .minified {\\n  display: none; }\\n  .is-active .expanded {\\n  display: block; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9sdWNhc2NhbGplL1dlYnN0b3JtUHJvamVjdHMvZmxvdy1iYXNlZC9zcmMvYXBwL25vZGVzL3N0YXRzL3N0YXRzLmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUVBO0VBQ0UsWUFBVztFQUNYLGNBQWE7RUFDYix1QkFBc0I7RUFDdEIsd0JBQXVCO0VBQ3ZCLGlCQUFnQixFQVNqQjtFQWREO0lBUUksYUFBWSxFQUNiO0VBVEg7SUFZSSxjQUFhLEVBQ2Q7RUFHSDtFQUNFLG9CQUFtQixFQXVCcEI7RUF4QkQ7SUFJSSxvQkFBbUI7SUFDbkIsY0FBYTtJQUNiLCtCQUE4QixFQUMvQjtFQVBIO0lBVUksZ0JBQWUsRUFDaEI7RUFYSDtJQWNJLGVBQWMsRUFDZjtFQWZIO0lBa0JJLGVBQWMsRUFDZjtFQW5CSDtJQXNCSSxlQUFjLEVBQ2Y7RUFHSDtFQUNFLHVCQUFzQixFQXVDdkI7RUF4Q0Q7SUFJSSxjQUFhO0lBQ2IsYUFBWSxFQWtDYjtFQXZDSDtNQVFNLGNBQWE7TUFDYixRQUFPO01BQ1AsdUJBQXNCO01BQ3RCLGNBQWEsRUFXZDtFQXRCTDtRQWNRLGNBQWE7UUFDYix1QkFBc0IsRUFNdkI7RUFyQlA7VUFrQlUsZ0JBQWU7VUFDZixpQkFBZ0IsRUFDakI7RUFwQlQ7TUF5Qk0sUUFBTztNQUNQLGNBQWE7TUFDYixpQkFBZ0IsRUFXakI7RUF0Q0w7UUE4QlEsb0JBQW1CO1FBQ25CLGNBQWE7UUFDYix3QkFBdUIsRUFLeEI7RUFyQ1A7VUFtQ1UsY0FBYSxFQUNkO0VBTVQ7RUFFSSxjQUFhLEVBQ2Q7RUFISDtFQU1JLGVBQWMsRUFDZiIsImZpbGUiOiJzcmMvYXBwL25vZGVzL3N0YXRzL3N0YXRzLmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiQGltcG9ydCAnLi4vLi4vLi4vLi4vcHJvamVjdHMvZmxvdy1iYXNlZC9zcmMvbGliL3V0aWxzL3V0aWxzJztcblxuOmhvc3Qge1xuICBjb2xvcjogI2ZmZjtcbiAgZGlzcGxheTogZmxleDtcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gIG1pbi13aWR0aDogMTY3cHg7XG5cbiAgJi5pcy1hY3RpdmUge1xuICAgIHdpZHRoOiA1MDBweDtcbiAgfVxuXG4gIC5leHBhbmRlZCB7XG4gICAgZGlzcGxheTogbm9uZTtcbiAgfVxufVxuXG4ubWluaWZpZWQge1xuICBtYXJnaW46IDRweCA0cHggNnB4O1xuXG4gIGRpdiB7XG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcbiAgfVxuXG4gIGRpdiB+IGRpdiB7XG4gICAgbWFyZ2luLXRvcDogOHB4O1xuICB9XG5cbiAgLmxhYmVsIHtcbiAgICBmbGV4OiAwIDAgNDBweDtcbiAgfVxuXG4gIC52YWx1ZSB7XG4gICAgZmxleDogMCAwIDgwcHg7XG4gIH1cblxuICBzdmcge1xuICAgIGZsZXg6IDAgMCA0MHB4O1xuICB9XG59XG5cbi5leHBhbmRlZCB7XG4gIGJhY2tncm91bmQtY29sb3I6ICNmZmY7XG5cbiAgLndyYXBwZXIge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgcGFkZGluZzogOHB4O1xuXG4gICAgLnZhbHVlcyB7XG4gICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgZmxleDogMTtcbiAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICBoZWlnaHQ6IDMwMHB4O1xuXG4gICAgICBtYXQtY2FyZC1jb250ZW50IHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcblxuICAgICAgICAudmFsdWUge1xuICAgICAgICAgIGZvbnQtc2l6ZTogMzBweDtcbiAgICAgICAgICBwYWRkaW5nLXRvcDogOHB4O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLmRpc3RyaWJ1dGlvbiB7XG4gICAgICBmbGV4OiAyO1xuICAgICAgaGVpZ2h0OiAzMDBweDtcbiAgICAgIG1hcmdpbi1sZWZ0OiA4cHg7XG5cbiAgICAgIC5jb2x1bW4td2lkdGgge1xuICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcblxuICAgICAgICBtYXQtc2xpZGVyIHtcbiAgICAgICAgICBtYXJnaW46IDAgOHB4O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbi5pcy1hY3RpdmUge1xuICAubWluaWZpZWQge1xuICAgIGRpc3BsYXk6IG5vbmU7XG4gIH1cblxuICAuZXhwYW5kZWQge1xuICAgIGRpc3BsYXk6IGJsb2NrO1xuICB9XG59XG4iXX0= */\"","import { ChangeDetectorRef, Component, ElementRef, Host, HostBinding, OnDestroy, OnInit, ViewChild } from '@angular/core';\nimport { FormBuilder } from '@angular/forms';\nimport { NodeService } from '../../../../projects/flow-based/src/lib/node/node-service';\nimport { StatsWorker } from '../../workers/stats';\nimport { XxlFlowUnitState } from '../../../../projects/flow-based/src/lib/flow-based';\nimport { GoogleCharts } from 'google-charts';\n\n@Component({\n  selector: 'fb-stats',\n  templateUrl: './stats.component.html',\n  styleUrls: ['./stats.component.scss']\n})\nexport class StatsComponent implements OnInit, OnDestroy {\n  public worker: StatsWorker;\n  private state: XxlFlowUnitState;\n  public isEditing = false;\n  public data: number[][] = [];\n  private graphPlaceHolder: ElementRef;\n  private chart;\n\n  @ViewChild('distribution')\n  set graph(element: ElementRef) {\n    this.graphPlaceHolder = element;\n    this.chart = null;\n  }\n\n  constructor(private fb: FormBuilder,\n              private cdr: ChangeDetectorRef,\n              @Host() private service: NodeService) {\n    this.state = service.state;\n  }\n\n  distribution(data): void {\n      const dataTable = new GoogleCharts.api.visualization.DataTable();\n      dataTable.addColumn('number', 'Value');\n      dataTable.addColumn('number', 'Count');\n      dataTable.addColumn('number', 'Gauss');\n\n      const width = this.worker.columnWidth;\n      let count = 0;\n\n      while ((count - 1) * width < data.end) {\n        dataTable.addRow([data.start + count++ * width + width / 2, data.values[count], data.gauss ? data.gauss[count] : null]);\n      }\n\n      const view = new GoogleCharts.api.visualization.DataView(dataTable);\n      if (!this.chart) {\n        this.chart = new GoogleCharts.api.visualization.ColumnChart(this.graphPlaceHolder.nativeElement);\n      }\n      this.chart.draw(view, {legend: 'top', series: {1: {type: 'line'}}});\n  }\n\n  ngOnInit(): void {\n    this.worker = this.service.worker as StatsWorker;\n\n    this.worker.updated$.subscribe(data => {\n      if (this.graphPlaceHolder) {\n        this.distribution(data);\n      }\n\n      this.cdr.detectChanges();\n    });\n  }\n\n  ngOnDestroy(): void {\n    this.cdr.detach();\n  }\n\n  onEdit(isEditing: boolean): void {\n    this.isEditing = isEditing;\n  }\n\n  onReset(): void {\n    this.worker.reset();\n  }\n\n  get min(): string | null {\n    return this.worker.min === null ? null : this.worker.min.toFixed(4);\n  }\n\n  get max(): string | null {\n    return this.worker.max === null ? null : this.worker.max.toFixed(4);\n  }\n\n  get avg(): string {\n    return this.worker.avg.toFixed(4);\n  }\n}\n","module.exports = \"<fb-normal-node *ngIf=\\\"worker\\\">\\n  <p class=\\\"minified\\\">{{value}}</p>\\n\\n  <section class=\\\"expanded\\\">\\n    <article>\\n      <div class=\\\"wrapper-current\\\">\\n        <mat-card class=\\\"current\\\">\\n          <mat-card-title>Current value</mat-card-title>\\n          <mat-card-content>{{value}}</mat-card-content>\\n        </mat-card>\\n        <mat-card class=\\\"total\\\">\\n          <mat-card-title>Values received</mat-card-title>\\n          <mat-card-content>{{worker.count}}</mat-card-content>\\n        </mat-card>\\n      </div>\\n\\n      <mat-card class=\\\"history\\\">\\n        <mat-card-title>History</mat-card-title>\\n        <mat-card-content *ngIf=\\\"worker.history\\\">\\n          <span *ngFor=\\\"let val of worker.history\\\">{{val}}</span>\\n        </mat-card-content>\\n      </mat-card>\\n    </article>\\n  </section>\\n</fb-normal-node>\\n\"","module.exports = \":host {\\n  align-items: center;\\n  color: #fff;\\n  display: flex;\\n  flex-direction: column;\\n  justify-content: center; }\\n  :host .minified {\\n    display: flex;\\n    justify-content: center;\\n    width: 70px; }\\n  fb-normal-node:not(.is-active) .expanded {\\n  display: none; }\\n  fb-normal-node.is-active .minified {\\n  display: none; }\\n  section {\\n  background-color: #fff;\\n  display: flex;\\n  flex-direction: column;\\n  width: 500px;\\n  height: 450px;\\n  width: 500px; }\\n  section footer {\\n    display: flex;\\n    justify-content: space-between; }\\n  section footer .close {\\n      color: #000; }\\n  article {\\n  display: flex;\\n  flex: 1;\\n  margin-bottom: 20px; }\\n  article .wrapper-current,\\n  article .history {\\n    flex: 1; }\\n  article .wrapper-current {\\n    align-items: center;\\n    display: flex;\\n    flex-direction: column;\\n    justify-content: space-between;\\n    padding: 8px; }\\n  article .current {\\n    padding: 8px;\\n    height: 150px;\\n    width: 100%; }\\n  article .current mat-card-content {\\n      color: #000;\\n      display: flex;\\n      font-size: 50px;\\n      text-align: left; }\\n  article .total mat-card-content {\\n    font-size: 40px; }\\n  article .history {\\n    margin: 8px; }\\n  article .history mat-card-content {\\n      display: flex;\\n      flex-direction: column;\\n      flex-wrap: wrap;\\n      height: 90%; }\\n  article .history mat-card-content span {\\n        font-size: 20px;\\n        text-align: left; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9sdWNhc2NhbGplL1dlYnN0b3JtUHJvamVjdHMvZmxvdy1iYXNlZC9zcmMvYXBwL25vZGVzL3RhcC90YXAuY29tcG9uZW50LnNjc3MiLCIvVXNlcnMvbHVjYXNjYWxqZS9XZWJzdG9ybVByb2plY3RzL2Zsb3ctYmFzZWQvcHJvamVjdHMvZmxvdy1iYXNlZC9zcmMvbGliL3V0aWxzL191dGlscy5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUVBO0VBQ0Usb0JBQW1CO0VBQ25CLFlBQVc7RUFDWCxjQUFhO0VBQ2IsdUJBQXNCO0VBQ3RCLHdCQUF1QixFQU94QjtFQVpEO0lBUUksY0FBYTtJQUNiLHdCQUF1QjtJQUN2QixZQUFXLEVBQ1o7RUFHSDtFQUdNLGNBQWEsRUFDZDtFQUpMO0VBU00sY0FBYSxFQUNkO0VBSUw7RUFDRSx1QkFBc0I7RUFDdEIsY0FBYTtFQUNiLHVCQUFzQjtFQUN0QixhQUFZO0VDU1osY0RSOEI7RUNTOUIsYURUdUIsRUFVeEI7RUFmRDtJQVFJLGNBQWE7SUFDYiwrQkFBOEIsRUFLL0I7RUFkSDtNQVlNLFlBQVcsRUFDWjtFQUlMO0VBQ0UsY0FBYTtFQUNiLFFBQU87RUFDUCxvQkFBbUIsRUFnRHBCO0VBbkREOztJQU9JLFFBQU8sRUFDUjtFQVJIO0lBV0ksb0JBQW1CO0lBQ25CLGNBQWE7SUFDYix1QkFBc0I7SUFDdEIsK0JBQThCO0lBQzlCLGFBQVksRUFDYjtFQWhCSDtJQW1CSSxhQUFZO0lDdkJkLGNEd0IrQjtJQ3ZCL0IsWUR1QndCLEVBUXZCO0VBNUJIO01BdUJNLFlBQVc7TUFDWCxjQUFhO01BQ2IsZ0JBQWU7TUFDZixpQkFBZ0IsRUFDakI7RUEzQkw7SUFnQ00sZ0JBQWUsRUFDaEI7RUFqQ0w7SUFxQ0ksWUFBVyxFQWFaO0VBbERIO01Bd0NNLGNBQWE7TUFDYix1QkFBc0I7TUFDdEIsZ0JBQWU7TUFDZixZQUFXLEVBTVo7RUFqREw7UUE4Q1EsZ0JBQWU7UUFDZixpQkFBZ0IsRUFDakIiLCJmaWxlIjoic3JjL2FwcC9ub2Rlcy90YXAvdGFwLmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiQGltcG9ydCAnLi4vLi4vLi4vLi4vcHJvamVjdHMvZmxvdy1iYXNlZC9zcmMvbGliL3V0aWxzL3V0aWxzJztcblxuOmhvc3Qge1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBjb2xvcjogI2ZmZjtcbiAgZGlzcGxheTogZmxleDtcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG5cbiAgLm1pbmlmaWVkIHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgIHdpZHRoOiA3MHB4O1xuICB9XG59XG5cbmZiLW5vcm1hbC1ub2RlIHtcbiAgJjpub3QoLmlzLWFjdGl2ZSkge1xuICAgIC5leHBhbmRlZCB7XG4gICAgICBkaXNwbGF5OiBub25lO1xuICAgIH1cbiAgfVxuXG4gICYuaXMtYWN0aXZlIHtcbiAgICAubWluaWZpZWQge1xuICAgICAgZGlzcGxheTogbm9uZTtcbiAgICB9XG4gIH1cbn1cblxuc2VjdGlvbiB7XG4gIGJhY2tncm91bmQtY29sb3I6ICNmZmY7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gIHdpZHRoOiA1MDBweDtcbiAgQGluY2x1ZGUgeHhsLXNpemUoNTAwcHgsIDQ1MHB4KTtcblxuICBmb290ZXIge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuXG4gICAgLmNsb3NlIHtcbiAgICAgIGNvbG9yOiAjMDAwO1xuICAgIH1cbiAgfVxufVxuXG5hcnRpY2xlIHtcbiAgZGlzcGxheTogZmxleDtcbiAgZmxleDogMTtcbiAgbWFyZ2luLWJvdHRvbTogMjBweDtcblxuICAud3JhcHBlci1jdXJyZW50LFxuICAuaGlzdG9yeSB7XG4gICAgZmxleDogMTtcbiAgfVxuXG4gIC53cmFwcGVyLWN1cnJlbnQge1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcbiAgICBwYWRkaW5nOiA4cHg7XG4gIH1cblxuICAuY3VycmVudCB7XG4gICAgcGFkZGluZzogOHB4O1xuICAgIEBpbmNsdWRlIHh4bC1zaXplKDEwMCUsIDE1MHB4KTtcblxuICAgIG1hdC1jYXJkLWNvbnRlbnQge1xuICAgICAgY29sb3I6ICMwMDA7XG4gICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgZm9udC1zaXplOiA1MHB4O1xuICAgICAgdGV4dC1hbGlnbjogbGVmdDtcbiAgICB9XG4gIH1cblxuICAudG90YWwge1xuICAgIG1hdC1jYXJkLWNvbnRlbnQge1xuICAgICAgZm9udC1zaXplOiA0MHB4O1xuICAgIH1cbiAgfVxuXG4gIC5oaXN0b3J5IHtcbiAgICBtYXJnaW46IDhweDtcblxuICAgIG1hdC1jYXJkLWNvbnRlbnQge1xuICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICBmbGV4LXdyYXA6IHdyYXA7XG4gICAgICBoZWlnaHQ6IDkwJTtcblxuICAgICAgc3BhbiB7XG4gICAgICAgIGZvbnQtc2l6ZTogMjBweDtcbiAgICAgICAgdGV4dC1hbGlnbjogbGVmdDtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbiIsIkBtaXhpbiBmYi1wb3NpdGlvbigkcG9zaXRpb246IHJlbGF0aXZlLCAkY29vcmRpbmF0ZXM6IDAgMCAwIDApIHtcbiAgQGlmIHR5cGUtb2YoJHBvc2l0aW9uKSA9PSBsaXN0IHtcbiAgICAkY29vcmRpbmF0ZXM6ICRwb3NpdGlvbjtcbiAgICAkcG9zaXRpb246IHJlbGF0aXZlO1xuICB9XG5cbiAgJHRvcDogbnRoKCRjb29yZGluYXRlcywgMSk7XG4gICRyaWdodDogbnRoKCRjb29yZGluYXRlcywgMik7XG4gICRib3R0b206IG50aCgkY29vcmRpbmF0ZXMsIDMpO1xuICAkbGVmdDogbnRoKCRjb29yZGluYXRlcywgNCk7XG5cbiAgcG9zaXRpb246ICRwb3NpdGlvbjtcblxuICAvLyBUb3BcbiAgQGlmICR0b3AgPT0gYXV0byB7XG4gICAgdG9wOiAkdG9wO1xuICB9IEBlbHNlIGlmIG5vdCh1bml0bGVzcygkdG9wKSkge1xuICAgIHRvcDogJHRvcDtcbiAgfVxuXG4gIC8vIFJpZ2h0XG4gIEBpZiAkcmlnaHQgPT0gYXV0byB7XG4gICAgcmlnaHQ6ICRyaWdodDtcbiAgfSBAZWxzZSBpZiBub3QodW5pdGxlc3MoJHJpZ2h0KSkge1xuICAgIHJpZ2h0OiAkcmlnaHQ7XG4gIH1cblxuICAvLyBCb3R0b21cbiAgQGlmICRib3R0b20gPT0gYXV0byB7XG4gICAgYm90dG9tOiAkYm90dG9tO1xuICB9IEBlbHNlIGlmIG5vdCh1bml0bGVzcygkYm90dG9tKSkge1xuICAgIGJvdHRvbTogJGJvdHRvbTtcbiAgfVxuXG4gIC8vIExlZnRcbiAgQGlmICRsZWZ0ID09IGF1dG8ge1xuICAgIGxlZnQ6ICRsZWZ0O1xuICB9IEBlbHNlIGlmIG5vdCh1bml0bGVzcygkbGVmdCkpIHtcbiAgICBsZWZ0OiAkbGVmdDtcbiAgfVxufVxuXG5AbWl4aW4geHhsLXNpemUoJHdpZHRoLCAkaGVpZ2h0OiAkd2lkdGgpIHtcbiAgaGVpZ2h0OiAkaGVpZ2h0O1xuICB3aWR0aDogJHdpZHRoO1xufVxuIl19 */\"","import { ChangeDetectorRef, Component, Host, HostBinding, OnDestroy, OnInit } from '@angular/core';\nimport { XxlSocket } from '../../../../projects/flow-based/src/lib/flow-based';\nimport { NodeService } from '../../../../projects/flow-based/src/lib/node/node-service';\nimport { TapWorker } from '../../workers/tap';\nimport { Subscription } from 'rxjs';\n\n@Component({\n  selector: 'fb-tap',\n  templateUrl: './tap.component.html',\n  styleUrls: ['./tap.component.scss']\n})\nexport class TapComponent implements OnInit, OnDestroy {\n  public worker: TapWorker;\n  public sockets: XxlSocket[] = [];\n  private subscriptions: Subscription[] = [];\n\n  @HostBinding('class.is-active') isActive = false;\n  value: any;\n  values: any[];\n\n  constructor(private cdr: ChangeDetectorRef,\n              @Host() private service: NodeService) {\n  }\n\n  private connectWithWorker(): void {\n    if (this.worker.currentValue !== undefined) {\n      this.value = this.worker.currentValue.toFixed(2);\n    }\n\n    this.subscriptions.push(this.worker.getStream().subscribe(log => {\n      this.value = this.worker.currentValue;\n      this.cdr.detectChanges();\n    }));\n  }\n\n  ngOnInit(): void {\n    this.worker = this.service.worker as TapWorker;\n    this.connectWithWorker();\n  }\n\n  ngOnDestroy(): void {\n    this.subscriptions.forEach(s => s.unsubscribe());\n  }\n}\n","module.exports = \"<fb-normal-node [isActive]=\\\"true\\\" [label]=\\\"getTitle()\\\">\\n  <canvas (mousemove)=\\\"onMouseMove($event)\\\"\\n          (mousedown)=\\\"onMouseDown($event)\\\"\\n          (mouseup)=\\\"onMouseUp($event)\\\"\\n          #canvas class=\\\"fb-drag-ignore\\\"></canvas>\\n</fb-normal-node>\\n\"","module.exports = \"canvas {\\n  cursor: default;\\n  height: 400px;\\n  width: 400px; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9sdWNhc2NhbGplL1dlYnN0b3JtUHJvamVjdHMvZmxvdy1iYXNlZC9zcmMvYXBwL25vZGVzL3pvb20tY2FudmFzL3pvb20tY2FudmFzLmNvbXBvbmVudC5zY3NzIiwiL1VzZXJzL2x1Y2FzY2FsamUvV2Vic3Rvcm1Qcm9qZWN0cy9mbG93LWJhc2VkL3Byb2plY3RzL2Zsb3ctYmFzZWQvc3JjL2xpYi91dGlscy9fdXRpbHMuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFFQTtFQUNFLGdCQUFlO0VDd0NmLGNEdkN1QjtFQ3dDdkIsYUR4Q3VCLEVBQ3hCIiwiZmlsZSI6InNyYy9hcHAvbm9kZXMvem9vbS1jYW52YXMvem9vbS1jYW52YXMuY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyJAaW1wb3J0ICcuLi8uLi8uLi8uLi9wcm9qZWN0cy9mbG93LWJhc2VkL3NyYy9saWIvdXRpbHMvX3V0aWxzLnNjc3MnO1xuXG5jYW52YXMge1xuICBjdXJzb3I6IGRlZmF1bHQ7XG4gIEBpbmNsdWRlIHh4bC1zaXplKDQwMHB4KTtcbn1cbiIsIkBtaXhpbiBmYi1wb3NpdGlvbigkcG9zaXRpb246IHJlbGF0aXZlLCAkY29vcmRpbmF0ZXM6IDAgMCAwIDApIHtcbiAgQGlmIHR5cGUtb2YoJHBvc2l0aW9uKSA9PSBsaXN0IHtcbiAgICAkY29vcmRpbmF0ZXM6ICRwb3NpdGlvbjtcbiAgICAkcG9zaXRpb246IHJlbGF0aXZlO1xuICB9XG5cbiAgJHRvcDogbnRoKCRjb29yZGluYXRlcywgMSk7XG4gICRyaWdodDogbnRoKCRjb29yZGluYXRlcywgMik7XG4gICRib3R0b206IG50aCgkY29vcmRpbmF0ZXMsIDMpO1xuICAkbGVmdDogbnRoKCRjb29yZGluYXRlcywgNCk7XG5cbiAgcG9zaXRpb246ICRwb3NpdGlvbjtcblxuICAvLyBUb3BcbiAgQGlmICR0b3AgPT0gYXV0byB7XG4gICAgdG9wOiAkdG9wO1xuICB9IEBlbHNlIGlmIG5vdCh1bml0bGVzcygkdG9wKSkge1xuICAgIHRvcDogJHRvcDtcbiAgfVxuXG4gIC8vIFJpZ2h0XG4gIEBpZiAkcmlnaHQgPT0gYXV0byB7XG4gICAgcmlnaHQ6ICRyaWdodDtcbiAgfSBAZWxzZSBpZiBub3QodW5pdGxlc3MoJHJpZ2h0KSkge1xuICAgIHJpZ2h0OiAkcmlnaHQ7XG4gIH1cblxuICAvLyBCb3R0b21cbiAgQGlmICRib3R0b20gPT0gYXV0byB7XG4gICAgYm90dG9tOiAkYm90dG9tO1xuICB9IEBlbHNlIGlmIG5vdCh1bml0bGVzcygkYm90dG9tKSkge1xuICAgIGJvdHRvbTogJGJvdHRvbTtcbiAgfVxuXG4gIC8vIExlZnRcbiAgQGlmICRsZWZ0ID09IGF1dG8ge1xuICAgIGxlZnQ6ICRsZWZ0O1xuICB9IEBlbHNlIGlmIG5vdCh1bml0bGVzcygkbGVmdCkpIHtcbiAgICBsZWZ0OiAkbGVmdDtcbiAgfVxufVxuXG5AbWl4aW4geHhsLXNpemUoJHdpZHRoLCAkaGVpZ2h0OiAkd2lkdGgpIHtcbiAgaGVpZ2h0OiAkaGVpZ2h0O1xuICB3aWR0aDogJHdpZHRoO1xufVxuIl19 */\"","import { AfterViewInit, Component, ElementRef, Host, OnInit, ViewChild } from '@angular/core';\nimport { NodeService } from '../../../../projects/flow-based/src/lib/node/node-service';\nimport { ZoomCanvasWorker } from '../../workers/zoom-canvas';\nimport { IDimensions, IZoomable, PIXEL_RATIO_SCALE } from '../../fb-config';\n\n@Component({\n  selector: 'fb-zoom-canvas',\n  templateUrl: './zoom-canvas.component.html',\n  styleUrls: ['./zoom-canvas.component.scss']\n})\nexport class ZoomCanvasComponent implements OnInit, AfterViewInit {\n  private worker: ZoomCanvasWorker;\n  private label: string;\n  private left: number;\n  private top: number;\n  private startX: number;\n  private startY: number;\n  private dragging = false;\n  private ctx: any;\n  private imageData: ImageData;\n  private dimensions: IDimensions;\n  private startTime: number;\n\n  @ViewChild('canvas') canvas: ElementRef;\n\n  constructor(@Host() private service: NodeService) {\n  }\n\n  ngOnInit() {\n    this.worker = this.service.worker as ZoomCanvasWorker;\n\n    this.worker.imageData$.subscribe((data: IZoomable) => {\n      if (data) {\n        this.label = data.metadata.label;\n        this.canvas.nativeElement.width = data.metadata.dimensions.width;\n        this.canvas.nativeElement.height = data.metadata.dimensions.height;\n        this.ctx.putImageData(data.imageData, 0, 0);\n        this.imageData = data.imageData;\n        this.dimensions = data.metadata.dimensions;\n      }\n    });\n  }\n\n  ngAfterViewInit(): void {\n    this.ctx = this.canvas.nativeElement.getContext('2d');\n\n  }\n\n  onMouseDown(event): void {\n    const boundingRect = this.canvas.nativeElement.getBoundingClientRect();\n    this.left = boundingRect.left;\n    this.top = boundingRect.top;\n    this.startX = (event.clientX - this.left) * PIXEL_RATIO_SCALE;\n    this.startY = (event.clientY - this.top) * PIXEL_RATIO_SCALE;\n    this.dragging = true;\n    this.startTime = Date.now();\n  }\n\n  onMouseUp(event): void {\n    this.dragging = false;\n    const x = event.clientX;\n    const y = event.clientY;\n\n    const distance = Math.pow(x  - this.left - this.startX, 2) + Math.pow(y - this.top - this.startY, 2);\n    const duration = Date.now() - this.startTime;\n\n    if (distance > 20) {\n      if (duration > 500) {\n        this.compute((event.clientX - this.left) * PIXEL_RATIO_SCALE,\n          (event.clientY - this.top) * PIXEL_RATIO_SCALE);\n      }\n    } else {\n      this.service.nodeIsClicked(event);\n    }\n\n    this.ctx.putImageData(this.imageData, 0, 0);\n  }\n\n  compute(endX, endY): void {\n    let { xMin, xMax, yMin, yMax }  = this.dimensions;\n    const xScale = (xMax - xMin) / this.canvas.nativeElement.width;\n    const yScale = (yMax - yMin) / this.canvas.nativeElement.height;\n    const aspectRatio = this.canvas.nativeElement.width / this.canvas.nativeElement.height;\n\n    // const width = (endX - this.startX) * SCALE;\n    // const height = (endY - this.top - this.startY) * SCALE;\n\n    const left = Math.min(this.startX, endX);\n    const right = Math.max(this.startX, endX);\n    const top = Math.min(this.startY, endY);\n    const bottom = Math.max(this.startY, endY);\n\n    // let width = right - left;\n    // let height = bottom - top;\n    //\n    // if (width > height) {\n    //   height = width / aspectRatio;\n    // } else {\n    //   width = height * aspectRatio;\n    // }\n\n    xMax = xMin + right * xScale;\n    xMin = xMin + left * xScale;\n    yMax = yMin + bottom * yScale;\n    yMin = yMin + top * yScale;\n\n    this.worker.updateDimensions({\n        xMin, xMax, yMin, yMax,\n        width: this.canvas.nativeElement.width,\n        height: this.canvas.nativeElement.height\n    });\n\n  }\n\n  onMouseMove(event): void {\n    if (this.dragging) {\n      const x = (event.clientX - this.left) * PIXEL_RATIO_SCALE ;\n      const y = (event.clientY - this.top) * PIXEL_RATIO_SCALE;\n\n      this.ctx.putImageData(this.imageData, 0, 0);\n      this.ctx.fillStyle = 'rgba(64,64,64,0.6)';\n      this.ctx.strokeStyle = 'rgba(255,255,255,1.0)';\n      this.ctx.fillRect(this.startX, this.startY, x - this.startX, y - this.startY);\n      this.ctx.strokeRect(this.startX, this.startY, x - this.startX, y - this.startY);\n    }\n  }\n\n  getTitle(): string {\n    return 'Fractal: ' + this.label ? this.label : 'none';\n  }\n}\n","import { TapWorker } from './tap';\n\nexport const BASIC_GRAPH_CONFIG = {\n  title: 'Basic Graph',\n  sockets: [\n    {\n      type: 'in',\n      format: 'number'\n    },\n    {\n      type: 'out',\n      format: 'number'\n    }\n  ]\n};\n\nexport class BasicGraphWorker extends TapWorker {\n  get values(): number[] {\n    return this.history;\n  }\n\n  // connect(conn: XxlConnection, sockets: FbKeyValues<XxlSocket>): void {\n  //\n  // }\n}\n","import { FbKeyValues, XxlConnection, XxlSocket, FbNodeWorker } from '../../../projects/flow-based/src/lib/flow-based';\nimport { BehaviorSubject, Observable, Subject, Subscription } from 'rxjs';\n\nexport const CANVAS_SETTINGS = {\n  title: 'Canavs',\n  config: {},\n  sockets: [\n    {\n      type: 'in',\n    },\n    {\n      type: 'out',\n      format: 'point'\n    }\n  ]\n};\n\nexport class CanvasWorker implements FbNodeWorker {\n  private stream: Observable<any>;\n  private subscriptions: { [id: string]: Subscription } = {};\n  private subject = new Subject<any>();\n\n  private imageDataSubject = new BehaviorSubject<ImageData | null>(null);\n\n  private imageData: number[];\n\n\n  constructor() {\n  }\n\n  destroy(): void {\n    Object.keys(this.subscriptions).forEach(key => this.subscriptions[key].unsubscribe());\n  }\n\n  getStream(): Observable<any> {\n    return this.subject.asObservable();\n  }\n\n  setStream(stream: Observable<any>, socket: XxlSocket, connection: XxlConnection): void {\n    this.stream = stream;\n\n    this.subscriptions[connection.id] = stream.subscribe((val: any) => {\n      this.imageDataSubject.next(val);\n    });\n  }\n\n  removeStream(connection: XxlConnection): void {\n    this.subscriptions[connection.id].unsubscribe();\n\n    delete this.subscriptions[connection.id];\n  }\n\n  connect(conn: XxlConnection, sockets: FbKeyValues<XxlSocket>): void {\n\n  }\n\n  get imageData$(): Observable<ImageData | null> {\n    return this.imageDataSubject.asObservable();\n  }\n}\n","import { FbKeyValues, XxlConnection, XxlSocket, FbNodeWorker, XxlFlowUnitState } from '../../../projects/flow-based/src/lib/flow-based';\nimport { Observable, Subject, Subscription } from 'rxjs';\n\nexport const CUSTOM_CODE_SETTINGS = {\n  title: 'Custom code',\n  config: { func: '// const out = new Subject();\\n// function(val) {\\nout.next(val)'},\n  sockets: [\n    {\n      type: 'in',\n    },\n    {\n      type: 'out'\n    }\n  ]\n};\n\nexport class CustomCodeWorker implements FbNodeWorker {\n  private subject = new Subject<any>(); // OUTPUT\n  private subscriptions: { [id: string]: Subscription } = {};\n  private func: (any) => void;\n\n  public compileError: Error | null;\n  public runtimeError: Error | null;\n\n  constructor(private config: any) {\n    this.compileFunction();\n  }\n\n  destroy(): void {\n    Object.keys(this.subscriptions).forEach(key => this.subscriptions[key].unsubscribe());\n  }\n\n  getStream(): Observable<any> {\n    return this.subject.asObservable();\n  }\n\n  setStream(stream: Observable<any>, socket: XxlSocket, connection: XxlConnection): void {\n    this.subscriptions[connection.id] = stream.subscribe((val: any) => {\n      try {\n        this.func(val);\n      } catch (err) {\n        this.runtimeError = err;\n      }\n    });\n  }\n\n  removeStream(connection: XxlConnection): void {\n    this.subscriptions[connection.id].unsubscribe();\n\n    delete this.subscriptions[connection.id];\n  }\n\n  connect(conn: XxlConnection, sockets: FbKeyValues<XxlSocket>): void {\n\n  }\n\n  compileFunction(funcStr = this.config.func): void {\n    this.config.func = funcStr;\n    this.compileError = this.runtimeError = null;\n\n    const inputFunc = `return function(val) { ${funcStr} }`;\n    try {\n      this.func = new Function('out', inputFunc)(this.subject);\n      this.func(null); // Initial call\n    } catch (err) {\n      this.compileError = err;\n    }\n  }\n}\n","import { FbKeyValues, XxlConnection, XxlSocket, FbNodeWorker } from '../../../projects/flow-based/src/lib/flow-based';\nimport { BehaviorSubject, Observable, Subscription } from 'rxjs';\nimport { IDimensions, IZoomable, PIXEL_RATIO_SCALE } from '../fb-config';\nimport { FbWebWorker } from './webworker';\nimport * as Mandelbrod from './fractals/mandelbrod';\n\nexport const AVAILABLE_FRACTALS = {\n  'mandelbrod': {\n    fn: Mandelbrod,\n    dimensions: {\n      xMin: -2.1,\n      xMax: 0.9,\n      yMin: -1,\n      yMax: 1,\n      width: 400,\n      height: 400,\n      maxIterations: 100,\n    } as IDimensions\n  }\n};\n\nexport interface FractalsConfig {\n  selected: string;\n}\n\nexport const FRACTALS_SETTINGS = {\n  title: 'Fractals',\n  config: {\n    selected: 'mandelbrod'\n  },\n  sockets: [\n    {\n      type: 'in',\n      format: 'dimension'\n    },\n    {\n      type: 'out',\n      format: 'imageData'\n    }\n  ]\n};\n\nexport class FractalsWorker implements FbNodeWorker {\n  private webWorker: FbWebWorker<ImageData>;\n\n  private subscriptions: { [id: string]: Subscription } = {};\n  private subjects = new BehaviorSubject<IZoomable | null>(null);\n  private dimensions;\n\n  constructor(private config: FractalsConfig,\n              private sockets: XxlSocket[]) {\n    this.setFractal(config.selected);\n  }\n\n  setFractal(name: string): void {\n    this.config.selected = name;\n    this.dimensions = null;\n\n    if (this.webWorker) {\n      this.webWorker.terminate();\n    }\n\n    if (PIXEL_RATIO_SCALE !== 1) {\n      AVAILABLE_FRACTALS[name].dimensions.width *= PIXEL_RATIO_SCALE;\n      AVAILABLE_FRACTALS[name].dimensions.height *= PIXEL_RATIO_SCALE;\n    }\n\n    if (name) {\n      this.run();\n\n      // this.webWorker = new Worker('fractals-worker.js');\n      //\n      // this.webWorker.onmessage = (event: MessageEvent) => {\n      //   this.subjects.next({\n      //     metadata: {\n      //       label: name,\n      //       dimensions: this.dimensions\n      //     },\n      //     imageData: event.data\n      //   });\n      // };\n      //\n      // this.run(AVAILABLE_FRACTALS[name]);\n    }\n  }\n\n  run(dim: IDimensions = AVAILABLE_FRACTALS[this.config.selected].dimensions): void {\n    const name = this.config.selected;\n\n    if (name) {\n      this.dimensions = dim || AVAILABLE_FRACTALS[name].dimensions;\n\n      this.webWorker = new FbWebWorker(AVAILABLE_FRACTALS[name].fn);\n\n      this.webWorker.run(this.dimensions)\n        .then((data: ImageData) => {\n          this.subjects.next({\n            metadata: {\n              label: name,\n              dimensions: this.dimensions\n            },\n            imageData: data\n          });\n        });\n    }\n  }\n\n  destroy(): void {\n    Object.keys(this.subscriptions).forEach(key => this.subscriptions[key].unsubscribe());\n  }\n\n  getStream(socket: XxlSocket): Observable<any> {\n    return this.subjects.asObservable();\n  }\n\n  setStream(stream: Observable<any>, socket: XxlSocket, connection: XxlConnection): void {\n    this.subscriptions[connection.id] = stream.subscribe((dim: IDimensions) => {\n      if (this.webWorker && dim) {\n        this.run(Object.assign({maxIterations: 100}, dim));\n      }\n    });\n  }\n\n  removeStream(connection: XxlConnection): void {\n    this.subscriptions[connection.id].unsubscribe();\n\n    delete this.subscriptions[connection.id];\n  }\n\n  connect(conn: XxlConnection, sockets: FbKeyValues<XxlSocket>): void {\n\n  }\n\n  reset(): void {\n    this.run(AVAILABLE_FRACTALS[this.config.selected]);\n  }\n}\n","// https://github.com/JamesRandall/Mandelbrot-Set.git\n\nexport class FractalClazz {\n  maxIterations: number;\n  xMin: number;\n  xMax: number;\n  yMin: number;\n  yMax: number;\n  width: number;\n  height: number;\n  pixels: number[];\n  xScale: number;\n  yScale: number;\n\n  constructor({xMin, xMax, yMin, yMax, width, height, maxIterations}) {\n    this.xMin = xMin;\n    this.xMax = xMax;\n    this.yMin = yMin;\n    this.yMax = yMax;\n    this.width = width;\n    this.height = height;\n    this.maxIterations = maxIterations;\n\n    this.pixels = Array(width * height * 4);\n  }\n\n  updatePixel(offset, red, green, blue, alpha = 255): void {\n    this.pixels[offset] = red;\n    this.pixels[offset + 1] = green;\n    this.pixels[offset + 2] = blue;\n    this.pixels[offset + 3] = alpha;\n  }\n\n  coord2Index(x: number, y: number): number {\n    return (y * this.width + x) * 4;\n  }\n\n  compute(): ImageData {\n    this.xScale = (this.xMax - this.xMin) / this.width;\n    this.yScale = (this.yMax - this.yMin) / this.height;\n\n    console.log(this.width, this.xScale);\n    for (let sx = 0; sx < this.width; sx++) {\n      for (let sy = 0; sy < this.height; sy++) {\n        const xScaled = sx * this.xScale + this.xMin;\n        const yScaled = sy * this.yScale + this.yMin;\n\n        let iteration = 0;\n        let x = 0;\n        let y = 0;\n        while ((x * x + y * y) <= (2 * 2) && iteration < this.maxIterations) {\n          const xTemp = x * x - y * y + xScaled;\n          y = 2 * x * y + yScaled;\n          x = xTemp;\n\n          iteration = iteration + 1;\n        }\n\n        if (iteration === this.maxIterations) {\n          this.updatePixel(this.coord2Index(sx, sy), 0, 0, 0);\n        } else {\n          const colors = this.getColor(iteration, this.maxIterations);\n\n          this.updatePixel(this.coord2Index(sx, sy), colors[0], colors[1], colors[2]);\n          // this.updatePixel(this.coord2Index(sx, sy), 255, 255, 255, 255); // colors[0], colors[1], colors[2]);\n        }\n      }\n    }\n\n    return new ImageData(Uint8ClampedArray.from(this.pixels), this.width, this.height);\n  }\n\n  getColor(iter: number, maxIterations): number[] {\n    const ratio = iter / maxIterations;\n    let red = 0;\n    let green = 0;\n    let blue = 0;\n\n    if ((ratio >= 0) && (ratio < 0.125)) {\n      red = (ratio / 0.125) * (512) + 0.5;\n      green = 0;\n      blue = 0;\n    }\n\n    if ((ratio >= 0.125) && (ratio < 0.250)) {\n      red = 255;\n      green = (((ratio - 0.125) / 0.125) * (512) + 0.5);\n      blue = 0;\n    }\n\n    if ((ratio >= 0.250) && (ratio < 0.375)) {\n      red = ((1.0 - ((ratio - 0.250) / 0.125)) * (512) + 0.5);\n      green = 255;\n      blue = 0;\n    }\n\n    if ((ratio >= 0.375) && (ratio < 0.500)) {\n      red = 0;\n      green = 255;\n      blue = (((ratio - 0.375) / 0.125) * (512) + 0.5);\n    }\n\n    if ((ratio >= 0.500) && (ratio < 0.625)) {\n      red = 0;\n      green = ((1.0 - ((ratio - 0.500) / 0.125)) * (512) + 0.5);\n      blue = 255;\n    }\n\n    if ((ratio >= 0.625) && (ratio < 0.750)) {\n      red = (((ratio - 0.625) / 0.125) * (512) + 0.5);\n      green = 0;\n      blue = 255;\n    }\n\n    if ((ratio >= 0.750) && (ratio < 0.875)) {\n      red = 255;\n      green = (((ratio - 0.750) / 0.125) * (512) + 0.5);\n      blue = 255;\n    }\n\n    if ((ratio >= 0.875) && (ratio <= 1.000)) {\n      red = ((1.0 - ((ratio - 0.875) / 0.125)) * (512) + 0.5);\n      green = ((1.0 - ((ratio - 0.875) / 0.125)) * (512) + 0.5);\n      blue = ((1.0 - ((ratio - 0.875) / 0.125)) * (512) + 0.5);\n    }\n\n    return [this.toInteger(red), this.toInteger(green), this.toInteger(blue)];\n  }\n\n  toInteger(num: number): number {\n    return Math[num < 0 ? 'ceil' : 'floor'](num);\n  }\n}\n\n\n","import { FbKeyValues, XxlConnection, XxlFlowUnitState, XxlSocket, FbNodeWorker } from '../../../projects/flow-based/src/lib/flow-based';\nimport { Observable, ReplaySubject, Subject, Subscription, zip } from 'rxjs';\nimport { map } from 'rxjs/operators';\n\nexport const MERGE_STREAMS_SETTINGS = {\n  title: 'Merge streams',\n  sockets: [\n    {\n      type: 'in',\n      format: 'number'\n    },\n    {\n      type: 'in',\n      format: 'number'\n    },\n    {\n      type: 'out',\n      format: 'number'\n    }\n  ]\n};\n\nexport class MergeStreamsWorker implements FbNodeWorker {\n  private subscription: Subscription;\n  private subject = new ReplaySubject<number>(1);\n\n  private streams$: { [s: string]: Observable<{ value: number, connection: XxlConnection }> } = {};\n  public streamValues: { [key: string]: number[] } = {};\n  public outputValue: number;\n  private valuesSubject = new Subject<any>();\n\n  constructor(private state: XxlFlowUnitState) {\n  }\n\n  destroy(): void {\n    if (this.subscription) {\n      this.subscription.unsubscribe();\n    }\n  }\n\n  getValues(): Observable<any> {\n    return this.valuesSubject.asObservable();\n  }\n\n  getStream(): Observable<number> {\n    return this.subject.asObservable();\n  }\n\n  getSockets(): XxlSocket[] {\n    return this.state.sockets || this.state.config.sockets;\n  }\n\n  removeStream(connection: XxlConnection): void { /* not used */\n    delete this.streams$[connection.id];\n\n    this.createStream();\n  }\n\n  createStream(): void {\n    if (this.subscription) {\n      this.subscription.unsubscribe();\n    }\n\n    const ids = Object.keys(this.streams$);\n    const streams$ = ids.reduce((out: any, item) => {\n      out.push(this.streams$[item]);\n\n      return out;\n    }, []);\n\n    if (!ids.length) {\n      return;\n    }\n\n    this.subscription = zip(...streams$)\n      .subscribe((values: { value: number, connection: XxlConnection }[]) => {\n        this.outputValue = values.reduce((a, b) => a + b.value, 0);\n        this.subject.next(this.outputValue);\n\n        const vals = values.reduce((o: any, v) => {\n          const id = v.connection.in!;\n          if (!o[id]) {\n            o[id] = [];\n          }\n\n          o[id].push(v.value);\n          return o;\n        }, {});\n        this.valuesSubject.next(vals);\n\n        // this.streamValues = values.reduce((out, v) => {\n        //   if (!out[v.connection.to as number]) {\n        //     out[v.connection.to as number] = [];\n        //   }\n        //\n        //   out[v.connection.to as number].push(v.value);\n        //\n        //   return out;\n        // }, {});\n      });\n  }\n\n  setStream(stream: Observable<number>, socket: XxlSocket, connection: XxlConnection): void {\n    this.streams$[connection.id] = stream.pipe(map(v => ({value: v, connection})));\n    this.createStream();\n  }\n\n  get title(): string | undefined | null {\n    return this.state.title;\n  }\n\n  connect(conn: XxlConnection, sockets: FbKeyValues<XxlSocket>): void {\n\n  }\n}\n","import { FbKeyValues, XxlConnection, XxlSocket, FbNodeWorker } from '../../../projects/flow-based/src/lib/flow-based';\nimport { Observable, Subject } from 'rxjs';\n\nexport const RANDOM_NUMBER_SETTINGS = {\n  title: 'Random number generator',\n  config: {\n    min: 0,\n    max: 100,\n    start: 0,\n    end: 1,\n    intervalMax: 10000,\n    intervalMin: 100,\n    interval: 1000,\n    integer: true\n  },\n  sockets: [\n    {\n      type: 'out',\n      format: 'number'\n    }\n  ]\n};\n\nexport class RandomNumbersWorker implements FbNodeWorker {\n  private intervalId: number;\n  private subject = new Subject<any>();\n\n  constructor(private config: any) {\n    this.initialize();\n  }\n\n  destroy(): void {\n    clearInterval(this.intervalId);\n  }\n\n  getStream(): Observable<any> {\n    return this.subject.asObservable();\n  }\n\n  initialize(): void {\n    clearInterval(this.intervalId);\n\n    this.intervalId = setInterval(() => {\n      const random = Math.random() * (this.end - this.start) + this.start;\n\n      this.subject.next(this.integer ? Math.round(random) : random);\n    }, this.config.interval);\n\n  }\n\n  removeStream(connection: XxlConnection): void { /* not used */\n  }\n\n  setStream(stream: Observable<any>, socket: XxlSocket, connection: XxlConnection): void {  /* not used */\n  }\n\n  get start(): number {\n    return this.config.start;\n  }\n\n  set start(value: number) {\n    this.config.start = value;\n  }\n\n  get end(): number {\n    return this.config.end;\n  }\n\n  set end(value: number) {\n    this.config.end = value;\n  }\n\n  get min(): number {\n    return this.config.min;\n  }\n\n  get max(): number {\n    return this.config.max;\n  }\n\n  get interval(): number {\n    return this.config.interval;\n  }\n\n  set interval(val) {\n    this.config.interval = val;\n    this.initialize();\n  }\n\n  get intervalMin(): number {\n    return this.config.intervalMin;\n  }\n\n  get intervalMax(): number {\n    return this.config.intervalMax;\n  }\n\n  get integer(): boolean {\n    return this.config.integers;\n  }\n\n  set integer(val: boolean) {\n    this.config.integers = val;\n  }\n\n  connect(conn: XxlConnection, sockets: FbKeyValues<XxlSocket>): void {\n\n  }\n}\n","import { FbKeyValues, XxlConnection, XxlFlowUnitState, XxlSocket, FbNodeWorker } from '../../../projects/flow-based/src/lib/flow-based';\nimport { Observable, Subject, Subscription } from 'rxjs';\nimport { calcMax, calcMean, calcStandardDeviation, getGaussian } from './utils/gauss';\n\nexport const STATS_SETTINGS = {\n  title: 'Statistics',\n  config: { columnWidth: 1 },\n  sockets: [\n    {\n      type: 'in',\n      format: 'number'\n    },\n    {\n      type: 'out',\n      aux: 'min',\n      name: 'Min valuex',\n      format: 'number'\n    },\n    {\n      type: 'out',\n      aux: 'max',\n      name: 'Max value',\n      format: 'number'\n    }]\n};\n\nexport class StatsWorker implements FbNodeWorker {\n  private subjects = { min: new Subject<any>(), max: new Subject<any>()};\n  private subscriptions: Subscription[] = [];\n\n  public min: number | null = null;\n  public max: number | null = null;\n  private total = 0;\n  private count = 0;\n  private values: any = [];\n\n  private updatedSubject = new Subject<any>();\n  public updated$ = this.updatedSubject.asObservable();\n\n  constructor(private config: any, private sockets: XxlSocket[]) {\n    this.initialize();\n  }\n\n  destroy(): void {\n  }\n\n  getStream(socket: XxlSocket): Observable<any> {\n    return this.subjects[socket.aux!].asObservable();\n  }\n\n  // getSockets(): XxlSocket[] {\n  //   return this.state.config.sockets;\n  // }\n\n  initialize(): void {\n  }\n\n  removeStream(connection: XxlConnection): void { /* not used */\n    this.subscriptions[connection.id].unsubscribe();\n    delete this.subscriptions[connection.id];\n  }\n\n  reset(): void {\n    this.max = null;\n    this.total = 0;\n    this.count = 0;\n  }\n\n  // INPUT\n  setStream(stream: Observable<any>, socket: XxlSocket, connection: XxlConnection): void {\n    // TODO: Refactor\n    this.subscriptions[connection.id] = stream.subscribe(val => {\n      if (this.columnWidth === 0) {\n        return;\n      }\n\n      const oldMin = this.min;\n      const oldMax = this.max;\n\n      this.total += val;\n      this.count++;\n\n      if (this.max === null) {\n        this.values = [];\n        this.min = val;\n        this.max = val;\n      } else {\n        this.min = Math.min(val, this.min!);\n        this.max = Math.max(val, this.max!);\n      }\n\n      if (oldMin !== this.min) {\n        this.subjects.min.next(this.min);\n      }\n\n      if (oldMax !== this.max) {\n        this.subjects.max.next(this.max);\n      }\n\n      const index = Math.round(val / this.columnWidth);\n\n      this.values[index] = (this.values[index] || 0) + 1;\n\n      const mean = calcMean(this.values);\n      const averageMax = calcMax(this.values, mean);\n      const sd = calcStandardDeviation(mean, this.values);\n      let gauss;\n      if (averageMax) { // TODO: Maximum required\n        gauss = getGaussian(mean, sd, averageMax, this.values.length);\n      }\n\n\n      this.updatedSubject.next({\n        values: this.values,\n        gauss,\n        start: this.min,\n        end: this.max,\n      });\n    });\n  }\n\n  get avg(): number {\n    return this.count === 0 ? 0 : this.total / this.count;\n  }\n\n  get columnWidth(): number {\n    return this.config.columnWidth;\n  }\n\n  set columnWidth(width: number) {\n    this.config.columnWidth = width;\n    this.reset();\n  }\n\n  connect(conn: XxlConnection, sockets: FbKeyValues<XxlSocket>): void {\n\n  }\n}\n","import { FbKeyValues, XxlConnection, XxlSocket, FbNodeWorker } from '../../../projects/flow-based/src/lib/flow-based';\nimport { Observable, Subject, Subscription } from 'rxjs';\n\nexport const TAP_SETTINGS = {\n  title: 'Tap',\n  config: {expanded: false},\n  sockets: [\n    {\n      type: 'in',\n    },\n    {\n      type: 'out'\n    }\n  ]\n};\n\nexport class TapWorker implements FbNodeWorker {\n  private stream: Observable<any>;\n  private subscriptions: { [id: string]: Subscription } = {};\n  private subject = new Subject<any>();\n\n  public history: number[] = [];\n  public currentValue: any;\n  public count = 0;\n\n  constructor() {\n  }\n\n  destroy(): void {\n    Object.keys(this.subscriptions).forEach(key => this.subscriptions[key].unsubscribe());\n  }\n\n  getStream(): Observable<any> {\n    return this.subject.asObservable();\n  }\n\n  setStream(stream: Observable<any>, socket: XxlSocket, connection: XxlConnection): void {\n    this.stream = stream;\n\n    this.subscriptions[connection.id] = stream.subscribe((val: number) => {\n      if (!isNaN(val)) {\n        val = Number.isInteger(val) ? val : parseFloat(val.toFixed(2));\n      }\n\n      this.currentValue = val;\n      this.count++;\n\n      this.history.unshift(val);\n      this.history = this.history.slice(0, 33);\n      this.subject.next(val);\n    });\n  }\n\n  removeStream(connection: XxlConnection): void {\n    this.subscriptions[connection.id].unsubscribe();\n\n    delete this.subscriptions[connection.id];\n  }\n\n  connect(conn: XxlConnection, sockets: FbKeyValues<XxlSocket>): void {\n\n  }\n}\n","/*\n   Gaussian distribution: http://mathworld.wolfram.com/NormalDistribution.html\n\n   u: mean\n   a: standard deviation\n   a^2: variance\n */\n\nexport function calcMean(values: number[]): number {\n  let count = 0;\n\n  const index = Math.round(values.reduce((sum, val, i) => {\n    count += val;\n    return sum + i * val;\n  }, 0) / count);\n\n  return index;\n}\n\nexport function calcMax(values: number[], mean: number): number {\n  let hits = 0,\n    index = 0,\n    total = 0;\n\n  while (hits < 4 && index < 20) {\n    if (values[mean - index]) {\n      total += values[mean - index];\n      hits++;\n    }\n\n    if (values[mean + index]) {\n      total += values[mean + index];\n      hits++;\n    }\n\n    index++;\n  }\n\n  return total / hits;\n}\n\nexport function calcStandardDeviation(mean: number, values: number[]): number {\n  let count = 0;\n\n  return Math.sqrt(values.reduce((sum, val, i) => {\n    count += val;\n\n    return sum + Math.pow(i - mean, 2) * val;\n  }, 0) / count);\n}\n\nexport function getGaussian(mean: number, sd: number, maxAmpl: number, length: number): number[] {\n  const frac = 1 / (mean * Math.sqrt(2 * Math.PI));\n  const denominator = 2 * Math.pow(sd, 2);\n\n  let output: number[] = [];\n  let max = 0;\n  let index = 0;\n\n  for (let x = 0; x < length; x++) {\n    const numerator = -Math.pow(x - mean, 2);\n    max = Math.max(output[index++] = frac * Math.pow(Math.E, numerator / denominator), max);\n  }\n\n  output = output.map(val => val / max * maxAmpl);\n\n  return output;\n}\n","export class FbWebWorker<T> {\n  private worker: Worker;\n\n  constructor(private workerClazz: any) {}\n\n  run(data: any): Promise<T> {\n    const promise: Promise<T> = this.createPromiseForWorker(data);\n\n    return promise;\n  }\n\n  terminate(): void {\n    this.worker.terminate();\n  }\n\n  private build(): string {\n    const clazzStr = this.workerClazz['FractalClazz'].toString();\n    const proto = this.workerClazz['FractalClazz'].prototype;\n    const clazzProtoStr = Object.keys(proto)\n      .reduce((out, key) => (out += `FractalClazz.prototype.${key} = ${proto[key].toString()}\\n`, out), '');\n    const webWorkerTemplate = `\n            ${clazzStr}\n            ${clazzProtoStr}\n            self.addEventListener('message', function(e) {\n                debugger;\n                postMessage(new FractalClazz(e.data).compute());\n            });\n        `;\n    console.log(webWorkerTemplate);\n    const blob = new Blob([webWorkerTemplate], { type: 'text/javascript' });\n    return URL.createObjectURL(blob);\n  }\n\n  private createPromiseForWorker(data: any): Promise<T> {\n    if (!this.worker) {\n      this.worker = new Worker(this.build());\n    }\n\n    return new Promise<T>((resolve, reject) => {\n      this.worker.addEventListener('message', event => resolve(event.data));\n      this.worker.addEventListener('error', reject);\n      this.worker.postMessage(data);\n    });\n  }\n}\n","import { FbKeyValues, XxlConnection, XxlSocket, FbNodeWorker } from '../../../projects/flow-based/src/lib/flow-based';\nimport { BehaviorSubject, Observable, Subject, Subscription } from 'rxjs';\nimport { IDimensions, IWorker, IZoomable } from '../fb-config';\nimport { ElementRef, ViewChild } from '@angular/core';\n\nexport const ZOOM_CANVAS_SETTINGS = {\n  title: 'Zoomable canavs',\n  config: {expanded: false},\n  sockets: [\n    {\n      type: 'in',\n      format: 'imageData'\n    },\n    {\n      type: 'out',\n      format: 'dimension'\n    }\n  ]\n};\n\nexport class ZoomCanvasWorker implements FbNodeWorker {\n  label: string;\n  private imageData = new Subject<IZoomable>();\n  private subscriptions: { [id: string]: Subscription } = {};\n  private subject = new BehaviorSubject<IDimensions | null>(null);\n\n  constructor() {\n  }\n\n  destroy(): void {\n    Object.keys(this.subscriptions).forEach(key => this.subscriptions[key].unsubscribe());\n  }\n\n  getStream(): Observable<any> {\n    return this.subject.asObservable();\n  }\n\n  setStream(stream: Observable<any>, socket: XxlSocket, connection: XxlConnection): void {\n    this.subscriptions[connection.id] = stream.subscribe((data: IZoomable) => {\n      if (data) {\n        this.imageData.next(data);\n      }\n    });\n  }\n\n  removeStream(connection: XxlConnection): void {\n    this.subscriptions[connection.id].unsubscribe();\n\n    delete this.subscriptions[connection.id];\n  }\n\n  get imageData$(): Observable<IZoomable> {\n    return this.imageData.asObservable();\n  }\n\n  updateDimensions(data: IDimensions): void {\n    this.subject.next(data);\n  }\n\n  connect(conn: XxlConnection, sockets: FbKeyValues<XxlSocket>): void {\n\n  }\n}\n","// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build ---prod` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n  production: false\n};\n\n/*\n * In development mode, to ignore zone related error stack frames such as\n * `zone.run`, `zoneDelegate.invokeTask` for easier debugging, you can\n * import the following file, but please comment it out in production mode\n * because it will have performance impact when throw error\n */\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nimport 'hammerjs';\nimport 'codemirror/mode/javascript/javascript';\n\nimport { GoogleCharts } from 'google-charts';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nGoogleCharts.load(() => {\n  platformBrowserDynamic().bootstrapModule(AppModule)\n    .catch(err => console.log(err));\n});\n"],"sourceRoot":""}